<!-- Branch: main --><!-- Revision: b3935e3068e087e9473905822ca2dd90a1852a66 --><!-- Created at: 24 of February 2025 17:45:56 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:-webkit-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:-moz-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}button{padding:0}#dynamic{height:100vh;overflow:hidden}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.wnLcbW_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1h-4.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29zm4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9v-14zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7zm-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29zm47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8z%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.mqB7Ka_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.mqB7Ka_skipIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2294.7%22%20height%3D%2294.9%22%3E%3Cg%20fill%3D%22%23FFF%22%20stroke%3D%22%23000%22%20stroke-width%3D%223.417%22%20stroke-miterlimit%3D%2210%22%3E%3Cpath%20d%3D%22m37%2075.5%2022.4-22.4H1.9V41.7h57.5L37%2019.3l8.1-8.1%2036.2%2036.2-36.2%2036.2z%22%2F%3E%3Cpath%20d%3D%22M92.733%2011.138v72.4h-11.5v-72.4z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E) 50%/100% no-repeat;width:18px;height:18px}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74zm9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3Ageometricprecision%3Btext-rendering%3Ageometricprecision%3Bimage-rendering%3Aoptimizequality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20style%3D%22opacity%3A.849%22%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7c-3.399%2011.06-11.065%2016.227-23%2015.5%203.026%202.298%203.692%205.13%202%208.5h-5c-3-3.667-6.333-7-10-10v-5a133.238%20133.238%200%200%200%2010-9.5c5.167-1.5%207%20.333%205.5%205.5L12.5%2029c8.637%201.53%2013.97-1.97%2016-10.5-1.08-7.537-5.414-11.37-13-11.5-2.101-1.733-2.435-3.733-1-6%2010.787-1.378%2017.787%203.122%2021%2013.5Z%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:15px 15px 0 0;padding:16px 16px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}.FbTWOG_popupHeader{justify-content:space-between;display:flex}.FbTWOG_popupTitle{font-size:14px;font-weight:700}.FbTWOG_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20width%3D%2231%22%20height%3D%2231%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20clip-path%3D%22url%28%27%23clip0_1168_1960%27%29%22%20fill%3D%22%23000%22%3E%3Cpath%20d%3D%22M27.12%2030.4c-.84%200-1.68-.32-2.32-.96L.96%205.61a3.295%203.295%200%200%201%200-4.65%203.295%203.295%200%200%201%204.65%200l23.83%2023.83a3.295%203.295%200%200%201%200%204.65c-.64.64-1.48.96-2.32.96Z%22%2F%3E%3Cpath%20d%3D%22M3.29%2030.4c-.84%200-1.68-.32-2.32-.96a3.295%203.295%200%200%201%200-4.65L24.79.96a3.295%203.295%200%200%201%204.65%200%203.295%203.295%200%200%201%200%204.65L5.61%2029.44c-.64.64-1.48.96-2.32.96Z%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3CclipPath%20id%3D%22clip0_1168_1960%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M0%200h30.4v30.4H0z%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-size:100%;width:14px;height:14px;display:inline-block}.FbTWOG_readMore{color:#485099;padding:16px 0;font-size:16px;font-weight:700}.FbTWOG_ids{color:#bfbfbf;font-size:11px}.FbTWOG_ids.FbTWOG_hasEventMetadata{flex-wrap:wrap;padding:6px 0;display:flex}.FbTWOG_ids .FbTWOG_id{height:15px;display:flex}.FbTWOG_ids .FbTWOG_id:first-child{margin-right:1em}.FbTWOG_ids .FbTWOG_id .FbTWOG_idName{text-align:left;width:60px}.FbTWOG_ids .FbTWOG_id .FbTWOG_idContent{padding-left:4px}.FbTWOG_popupBody{padding-top:16px;font-size:14px}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_debug{color:#bfbfbf;height:200px;font-size:11px;overflow-x:hidden;overflow-y:auto}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;background-color:#000;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="5.50.2";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var s=t();return(n=function(r,n){return s[r-=143]})(r,e)}var r=n;function t(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(t=function(){return r})()}!function(r){for(var t=n,e=r();;)try{if(parseInt(t(154))/1*(parseInt(t(158))/2)+-parseInt(t(159))/3*(-parseInt(t(150))/4)+parseInt(t(147))/5+parseInt(t(157))/6*(-parseInt(t(155))/7)+parseInt(t(160))/8+parseInt(t(146))/9*(-parseInt(t(149))/10)+parseInt(t(145))/11*(-parseInt(t(152))/12)==159889)break;e.push(e.shift())}catch(r){e.push(e.shift())}}(t),("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">var e=t;function n(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(n=function(){return e})()}function t(e,o){var r=n();return(t=function(e,n){return r[e-=234]})(e,o)}if(function(e){for(var n=t,o=e();;)try{if(parseInt(n(239))/1*(parseInt(n(234))/2)+parseInt(n(250))/3+parseInt(n(246))/4+parseInt(n(249))/5+-parseInt(n(255))/6+-parseInt(n(251))/7+parseInt(n(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}}(n),"function"==typeof getVungleReplacementTokens){var o,r={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},s=getVungleReplacementTokens(),i=(o={},Object[e(245)](s).forEach((function(e){o[vungleTokenMap[e]]=s[e]})),o);window[e(254)][e(237)][e(235)](i);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:i[e(253)]("INCENTIVIZED")&&"true"===i[e(236)].toLowerCase()};Object[e(245)](r)[e(244)]((function(t){i[e(253)](t)&&(n[r[t]]=i[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t;var n=class extends Error{};class i{static getInstance(e){return this.instance||(this.instance=new i(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new n(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var r=i,a=class{},o=class extends a{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{};return a.map((e=>o[e]))}getSeriesTokens(e){var t,n,i,r;let a=[],o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{},s=[];return Object.keys(o).filter((t=>t.startsWith(e))).forEach((t=>{let n=t.replace(e,"");/^\d+$/.test(n)?s.push(parseInt(n,10)):a.push(t)})),0===s.length||(s.sort(((e,t)=>e-t)),s.forEach((t=>a.push(`${e}${t}`)))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},s=(e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},l=class extends a{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=s(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter((t=>t.activity.type===e)):this.activity}getActivityEvents(){return this.activity.filter((e=>"event"===e.activity.type))}getActivityLogs(){return this.activity.filter((e=>"log"===e.activity.type))}getActivityEventPairs(e,t,n){let i=this.getActivityEvents().filter((t=>t.activity.eventType===e)),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.name===t?a=e:i.name===n&&a&&(r.push([a,e]),a=null)})),r}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event))}};function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}))}return e}(ed=eO||(eO={}))[ed.NotStarted=0]="NotStarted",ed[ed.Running=1]="Running",ed[ed.Stopped=2]="Stopped";const c={type:"xstate.init"},u="xstate.assign";function E(e){return void 0===e?[]:[].concat(e)}function v(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function _(e){return t=>e===t}function h(e){return"string"==typeof e?{type:e}:e}function S(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===u){r=!0;let t=d({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}const T=(e,t)=>e.actions.forEach((({exec:n})=>n&&n(e.context,t)));function g(e){return{type:u,assignment:e}}var p=class extends a{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=S(E(e.states[e.initial].entry).map((e=>v(e,t.actions))),e.context,c),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:_(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,o=h(n),s=e.states[i];if(s.on){let t=E(s.on[o.type]);for(let n of("*"in s.on&&t.push(...E(s.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:c=()=>!0}="string"==typeof n?{target:n}:n,d=void 0===t,u=null!=t?t:i,h=e.states[u];if(c(a,o)){let[e,n,c]=S((d?E(l):[].concat(s.exit,l,h.entry).filter((e=>e))).map((e=>v(e,r._options.actions))),a,o),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||c,matches:_(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:_(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null===(t=e.config)||void 0===t?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=eO.NotStarted,i=new Set,r={_machine:e,send:r=>{n===eO.Running&&(T(t=e.transition(t,r),h(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:_(n.value)}}else t=e.initialState;return n=eO.Running,T(t,c),r},stop:()=>(n=eO.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var I=()=>"mb3935e306";(ec=eA||(eA={})).LOADING="loading",ec.DEFAULT="default",ec.EXPANDED="expanded",ec.RESIZED="resized",ec.HIDDEN="hidden";var O=(e=I())=>{var t,n,i,r,a,o,s,l;let c=null===(t=window[e])||void 0===t?void 0:t.mraid,u=null===(n=window[e])||void 0===n?void 0:n.mraidExt;return!c&&((null===(o=window.vungle)||void 0===o?void 0:o.mraid)?window[e]={mraid:d({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:d({},window.mraid)})),!u&&(null===(i=window.vungle)||void 0===i?void 0:i.mraidExt)&&(window[e]=C(d({},window[e]),{mraidExt:d({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null===(s=window.vungle.mraidExt)||void 0===s?void 0:s.getOS,getOSVersion:null===(l=window.vungle.mraidExt)||void 0===l?void 0:l.getOSVersion})),{mraid:null===(r=window[e])||void 0===r?void 0:r.mraid,mraidExt:null===(a=window[e])||void 0===a?void 0:a.mraidExt}},A=class extends a{init(){let{mraid:e,mraidExt:t}=O(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},m=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},f=class extends a{getNewInterval(e,t){let n=new m(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},N=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()})),this.remainingTime=e,this.isDestroyed=!1}},D=class extends a{destroyAll(){this.timers.forEach((e=>{e.destroy()}))}getNewTimer(e,t){let n=new N(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach((e=>{e.start()}))}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},y=()=>{let e=r.getInstance(),t=A.getServiceIdentifier();return e.get(t)};(eu=em||(em={})).UNKNOWN="unknown",eu.MREC="mrec",eu.FULLSCREEN="fullscreen",eu.BANNER="banner",eu.IN_LINE="in_line";var R=()=>{let e=r.getInstance(),t=o.getServiceIdentifier();return e.get(t)};(eE=ef||(ef={})).ACC_TESTS="ACC_TESTS",eE.ADM_HTML="ADM_HTML",eE.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",eE.AD_EXPERIENCE="AD_EXPERIENCE",eE.AD_SOURCE="AD_SOURCE",eE.ALT_EC_0="ALT_EC_0",eE.APP_CONTENT_RATING="APP_CONTENT_RATING",eE.APP_DESCRIPTION="APP_DESCRIPTION",eE.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",eE.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",eE.APP_ICON="APP_ICON",eE.APP_INFO_POSITION="APP_INFO_POSITION",eE.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",eE.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",eE.APP_NAME="APP_NAME",eE.APP_NAME_ENCODED="APP_NAME_ENCODED",eE.APP_RATING="APP_RATING",eE.APP_RATING_COUNT="APP_RATING_COUNT",eE.APP_SCREENSHOTS="APP_SCREENSHOTS",eE.APP_STORE_ID="APP_STORE_ID",eE.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",eE.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",eE.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",eE.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",eE.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",eE.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",eE.APP_STORE_RATING="APP_STORE_RATING",eE.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",eE.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",eE.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",eE.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",eE.COUNTRY_CODE="COUNTRY_CODE",eE.CREATIVE_FORMAT="CREATIVE_FORMAT",eE.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",eE.CREATIVE_ID="CREATIVE_ID",eE.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",eE.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",eE.CTA_BUTTON_ICON="CTA_BUTTON_ICON",eE.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",eE.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",eE.CTA_BUTTON_URL="CTA_BUTTON_URL",eE.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",eE.DSA_REQUIRED="DSA_REQUIRED",eE.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",eE.EC_CTA_URL="EC_CTA_URL",eE.EC_HTML="EC_HTML",eE.EC_HTML_2="EC_HTML_2",eE.EC_HTML_COMPRESS="EC_HTML_COMPRESS",eE.EC_IMAGE="EC_IMAGE",eE.EC_IMAGE_2="EC_IMAGE_2",eE.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",eE.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",eE.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",eE.ERID_ADVERTISER_INFO="ERID_ADVERTISER_INFO",eE.ERID_ADVERTISER_LINK="ERID_ADVERTISER_LINK",eE.ERID_RECOMMEND_RULE="ERID_RECOMMEND_RULE",eE.FULL_CTA="FULL_CTA",eE.FULL_CTA_OPTION="FULL_CTA_OPTION",eE.GLOBAL_TIMER="GLOBAL_TIMER",eE.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT="GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT",eE.HEADER_BIDDING="HEADER_BIDDING",eE.INCENTIVIZED="INCENTIVIZED",eE.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",eE.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",eE.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",eE.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",eE.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",eE.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",eE.IS_RUNNING_INSIDE_EMBED="IS_RUNNING_INSIDE_EMBED",eE.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",eE.MAIN_MANIFEST="MAIN_MANIFEST",eE.MAIN_STREAM="MAIN_STREAM",eE.MAIN_VIDEO="MAIN_VIDEO",eE.MAX_AD_DURATION="MAX_AD_DURATION",eE.MEDIATION_NAME="MEDIATION_NAME",eE.NAUTILUS_VERSION="NAUTILUS_VERSION",eE.OBSERVABILITY="OBSERVABILITY",eE.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",eE.OM_ENABLED="OM_ENABLED",eE.OM_SDK_DATA="OM_SDK_DATA",eE.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",eE.PICTURE_IN_PICTURE="PICTURE_IN_PICTURE",eE.PLACEMENT_TYPE="PLACEMENT_TYPE",eE.PLATFORM="PLATFORM",eE.REAL_START_MUTED="REAL_START_MUTED",eE.SDK_VERSION="SDK_VERSION",eE.SESSION_ID="SESSION_ID",eE.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",eE.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",eE.SKOVERLAY_AUTO="SKOVERLAY_AUTO",eE.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",eE.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",eE.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",eE.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",eE.SKOVERLAY_POSITION="SKOVERLAY_POSITION",eE.SK_CTA_ONLY="SK_CTA_ONLY",eE.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",eE.SK_FSC="SK_FSC",eE.START_MUTED="START_MUTED",eE.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",eE.STREAM_CHUNK_0="STREAM_CHUNK_0",eE.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",eE.TRACK_0="TRACK_0",eE.USER_AGENT="USER_AGENT",eE.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",eE.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",eE.VIDEO_LOOPING="VIDEO_LOOPING",eE.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",eE.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",eE.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",eE.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",eE.VX_ENDCARD="VX_ENDCARD",eE.EC_HTML_PRELOAD="EC_HTML_PRELOAD",eE.PUB_ID="PUB_ID",eE.PLACEMENT_ID="PLACEMENT_ID";var L=ef;(ev=eN||(eN={}))[ev.ACCELERATE=0]="ACCELERATE",ev[ev.EDSP=1]="EDSP",ev[ev.UNKNOWN=2]="UNKNOWN";var P=eN,b=class extends a{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return em.BANNER;case"mrec":return em.MREC;case"fullscreen":return em.FULLSCREEN;case"in_line":return em.IN_LINE;default:return em.UNKNOWN}},r=i(null!==(t=null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.getPlacementType())&&void 0!==t?t:"");return r!==em.UNKNOWN?r:i(null!==(n=this.tokenService.get(L.PLACEMENT_TYPE))&&void 0!==n?n:"")}isMrec(){return this.getPlacementType()===em.MREC}isBanner(){return this.getPlacementType()===em.BANNER}isFullscreen(){return this.getPlacementType()===em.FULLSCREEN}isInLine(){return this.getPlacementType()===em.IN_LINE}getAdSource(){var e;if(!this.tokenService.has(L.AD_SOURCE)||void 0===this.tokenService.get(L.AD_SOURCE))return P.UNKNOWN;switch(null===(e=this.tokenService.get(L.AD_SOURCE))||void 0===e?void 0:e.toLowerCase()){case"":return P.UNKNOWN;case"accelerate":return P.ACCELERATE;default:return P.EDSP}}constructor(e=R(),t=y()){super(),this.tokenService=e,this.mraidService=t}},w=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},V=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));(e_=eD||(eD={})).iOS="iOS",e_.Android="Android",e_.Windows="Windows",e_.Amazon="Amazon",e_.Unknown="Unknown",(eh=ey||(ey={}))[eh.LANDSCAPE=0]="LANDSCAPE",eh[eh.PORTRAIT=1]="PORTRAIT",eh[eh.UNKNOWN=2]="UNKNOWN";class M extends a{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null===(n=this.mraidService)||void 0===n||null===(t=n.getMraidExt())||void 0===t||null===(e=t.getOS)||void 0===e?void 0:e.call(t);return r&&(this.operatingSystem=M.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=M.parseOperatingSystem(null!==(i=this.tokenService.get(L.PLATFORM))&&void 0!==i?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new w(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getOSVersion)||void 0===e?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getSDKVersion)||void 0===e?void 0:e.call(t);return void 0!==n&&"0.0.0"!==n||!this.tokenService.has(L.SDK_VERSION)?this.sdkVersion=new w(n):this.sdkVersion=new w(this.tokenService.get(L.SDK_VERSION)),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new w(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getMraidVersion)||void 0===e?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.version)&&void 0!==n?n:""}getBrowserName(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.name)&&void 0!==n?n:""}getDeviceModel(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.model)&&void 0!==n?n:""}getDeviceType(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.type)&&void 0!==n?n:""}getOrientation(){return window.outerHeight>window.outerWidth?1:window.outerHeight<window.outerWidth?0:2}getDeviceCountryCode(){var e;return null!==(e=this.tokenService.get(L.COUNTRY_CODE))&&void 0!==e?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new w("17"))&&t.isLessThan(new w("17.1.1"))}constructor(e=R(),t=y()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(L.USER_AGENT);if(n)try{this.uaParserResult=JSON.parse(V(n))}catch(e){}}}M.sdkSeven=new w("7"),(eS=eR||(eR={})).ERROR="error",eS.EVENT="event",eS.SIGNAL_EVENT="signal-event",(eT=eL||(eL={})).AD_CLOSE="ad-close",eT.AD_LOAD="ad-load",eT.AD_LOAD_COMPLETE="ad-load-complete",eT.AD_START="ad-start",eT.ALTERNATIVE_VIEW="alternative-view",eT.APP_STORE_DURATION="app-store-duration",eT.BANDWIDTH_ESTIMATION="bandwidth-estimation",eT.IMPRESSION="impression",eT.INACTIVITY_OBSERVED="inactivity-observed",eT.CLICK_OCCURRED="click-occurred",eT.CTA="cta",eT.ENDCARD_CLICK="endcard-click",eT.ENDCARD_CLOSE_BUTTON_CLICK="endcard-close-button-click",eT.ENDCARD_SCENE_END="endcard-scene-end",eT.ERROR="error",eT.FORFEIT_REWARD="forfeit-reward",eT.FRUSTRATION_CLICKS="frustration-clicks",eT.GRANT_REWARD="grant-reward",eT.HLS_NOT_SUPPORTED="hls-not-supported",eT.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE="interaction-after-close-button-visible",eT.NESTED_IFRAME_TYPE="nested-iframe-type",eT.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",eT.PRIVACY_CTA="privacy-cta",eT.PROXY_MRAID="proxy-mraid",eT.SCENE_END="scene-end",eT.SCENE_START="scene-start",eT.SIGNAL_TIMER_START="signal-timer-start",eT.STORE_KIT_OVERLAY="store-kit-overlay",eT.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",eT.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",eT.VIDEO_CLOSE_BUTTON_CLICK="video-close-button-click",eT.VIDEO_SCENE_END="video-scene-end",eT.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",eT.VIDEO_START="video-start",eT.VIDEO_START_SUCCESS="video-start-success",eT.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",eT.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",eT.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",eT.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",(eg=eP||(eP={})).RESOURCE="resource",eg.PLAYABLE="playable",eg.TEMPLATE="template",(eb||(eb={})).lastChanceEndcard="lastChanceEndcard";var k=()=>[eL.AD_CLOSE,eL.AD_LOAD,eL.AD_LOAD_COMPLETE,eL.AD_START,eL.ALTERNATIVE_VIEW,eL.APP_STORE_DURATION,eL.CTA,eL.ENDCARD_SCENE_END,eL.ERROR,eL.FRUSTRATION_CLICKS,eL.GRANT_REWARD,eL.HLS_NOT_SUPPORTED,eL.IMPRESSION,eL.INACTIVITY_OBSERVED,eL.PRIVACY_CTA,eL.PROXY_MRAID,eL.SCENE_END,eL.SCENE_START,eL.SIGNAL_TIMER_START,eL.STORE_KIT_OVERLAY_PREPARE_ERROR,eL.UNKNOWN_MRAID_COMMAND,eL.VIDEO_SCENE_END,eL.VIDEO_SKIP_TO_ENDCARD,eL.VIDEO_START,eL.WEB_VITALS_FIRST_CONTENTFUL_PAINT,eL.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,eL.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,eL.WEB_VITALS_TIME_TO_FIRST_BYTE];const U="Unable to load img resource",B="video load fail after retry",H="notify fatal error after video load fail",W="video load fail with no retry",x="video does not play after 10s",F="video play fail after 30s",G="video failed to play",Y=[B,H,W,x,F,G,U];var K=()=>{let e=r.getInstance(),t=M.getServiceIdentifier();return e.get(t)},j=()=>{let e=r.getInstance(),t=b.getServiceIdentifier();return e.get(t)},X=(e,t)=>{let n=`context_${t}`;return r.getInstance().has(n)||r.getInstance().bind(n,e),{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}}},z=X({scene:void 0},"SceneContext"),$=()=>{var e;return null===(e=z.getValue())||void 0===e?void 0:e.scene},Z=class extends a{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.environmentService,this.placementTypeService,this.injectedGetCurrentScene),this.isObserved=this.observability.isObserved()}pushEvent(e){if(this.isObserved&&this.singleEventsToAccept.includes(e.name)){var t;let n=e.name;null===(t=this.observability)||void 0===t||t.pushEvent(n,e)}}pushError(e,t){var n;this.isObserved&&(null===(n=this.observability)||void 0===n||n.pushError(e,{error_source:this.getErrorSource(e,t)}))}getErrorSource(e,t){var n,i;let r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,a=null!==(i=null==e?void 0:e.error_source)&&void 0!==i?i:eP.TEMPLATE;return(null==t?void 0:t.error_source)&&(a=t.error_source),(Y.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=eP.RESOURCE),a}constructor(e=R(),t=K(),n=j(),i=$,r=k()){super(),this.tokenService=e,this.environmentService=t,this.placementTypeService=n,this.injectedGetCurrentScene=i,this.singleEventsToAccept=r,this.isObserved=!1}},q=e=>{var t;return!!e&&"true"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},Q=(e=R())=>!!e.has(L.INCENTIVIZED)&&q(e.get(L.INCENTIVIZED)),J=(e=R())=>Q(e)&&e.has(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(L.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.CLOSE_BUTTON_DELAY_SECONDS)):0;const ee="scenes-key",et="gdpr";var en=(e=r.getInstance())=>e.get(ee);(ep=ew||(ew={})).closed="closed",ep.composite="composite",ep.endcard="endcard",ep.gdpr="gdpr",ep.image="image",ep.video="video",(eC=eV||(eV={}))[eC.OFF=0]="OFF",eC[eC.SKO=1]="SKO",eC[eC.SKPV=2]="SKPV",eC[eC.STATIC_URL=3]="STATIC_URL",(eI=eM||(eM={})).CLICK_THROUGH="clickThrough",eI.COMPLETE="complete",eI.CREATIVE_VIEW="creativeView",eI.FIRST_QUARTILE="firstQuartile",eI.MIDPOINT="midpoint",eI.MUTE="mute",eI.PAUSE="pause",eI.RESUME="resume",eI.SKIP="skip",eI.START="start",eI.THIRD_QUARTILE="thirdQuartile",eI.UNMUTE="unmute";var ei=(e,t=j(),n=J())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e);const er="mute-button",ea="#555FFF";var eo=()=>{let e=r.getInstance(),t=l.getServiceIdentifier();return e.get(t)},es=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}addToActivity(e){this.wrappedService.addToActivity(e)}clearActivity(){this.wrappedService.clearActivity()}getActivity(e){return this.wrappedService.getActivity(e)}getActivityEvents(){return this.wrappedService.getActivityEvents()}getActivityLogs(){return this.wrappedService.getActivityLogs()}getActivityEventPairs(e,t,n){return this.wrappedService.getActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}};const el=e=>"observability"===e.type&&null!=e.event;var ed,ec,eu,eE,ev,e_,eh,eS,eT,eg,ep,eC,eI,eO,eA,em,ef,eN,eD,ey,eR,eL,eP,eb,ew,eV,eM,ek,eU,eB,eH,eW,ex,eF,eG,eY,eK,ej,eX,ez=class extends es{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}emitLegacy(e,t=Number.MAX_SAFE_INTEGER,n=["name"]){t!==Number.MAX_SAFE_INTEGER&&this.getEventCount(e,n)>=t||this.emit(e)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.getActivityEvents().filter((e=>e.activity.type===eR.EVENT&&"observability"===e.activity.eventType&&t.every((t=>{var i;return(null===(i=e.activity.data)||void 0===i?void 0:i[t])===n.data[t]})))).length}getReportableEvent(e,t){return el(e)?e:{type:"observability",event:eR.EVENT,data:"string"==typeof e?d({name:e},t):e}}},e$=e=>new ez(null!=e?e:eo()),eZ=class extends a{static getServiceIdentifier(){return"GlobalTimerServiceInterface"}isEnabled(){let e=q(this.tokenService.get(L.GLOBAL_TIMER)),t=Number(this.tokenService.get(L.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT)),n=this.injectedGetScenes().some((e=>e.getSceneType()===ew.video)),i=this.injectedGetScenes().some((e=>this.endcardTypes.includes(e.getSceneType())));return e&&t>=1&&t<=100&&n&&i}getTotalCloseButtonDelaySeconds(){let e=()=>{let e=this.tokenService.get(L.MAX_AD_DURATION);return void 0===e||"-1"===e?60:Number(e)},t=9999===J(this.tokenService),n=()=>{var t,n,i,r,a;let o=e(),s=this.injectedGetScenes().find((e=>this.endcardTypes.includes(e.getSceneType()))),l=[ew.endcard,ew.image].includes(null==s||null===(t=s.next)||void 0===t?void 0:t.getSceneType()),c=null==s?void 0:s.getLastChanceEndcardConfig().enabled;return l&&(o-=null!==(i=null===(n=null==s?void 0:s.next)||void 0===n?void 0:n.getCloseButtonConfig().delay)&&void 0!==i?i:0),c&&(o-=null!==(a=null==s||null===(r=s.getLastChanceEndcardConfig().close)||void 0===r?void 0:r.delay)&&void 0!==a?a:0),o>=0?o:0};return t?n():(()=>{var t,i;let r=e(),a=this.injectedGetScenes().find((e=>e.getSceneType()===ew.video)),o=this.injectedGetScenes().find((e=>this.endcardTypes.includes(e.getSceneType()))),s=(null!==(t=null==a?void 0:a.getCloseButtonConfig().delay)&&void 0!==t?t:0)+(null!==(i=null==o?void 0:o.getCloseButtonConfig().delay)&&void 0!==i?i:0);return s>=r?n():s})()}getVideoPageCloseButtonDelaySeconds(){let e=this.getTotalCloseButtonDelaySeconds();return Number(this.tokenService.get(L.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT))/100*e}hasReachedVideoPageCloseButtonDelaySeconds(){return this.totalDelaySecondsConsumed>=this.getVideoPageCloseButtonDelaySeconds()}setTotalDelaySecondsConsumed(e){this.totalDelaySecondsConsumed=e}isVideoSkipped(){return this.reportingService.getEventCount(eL.VIDEO_SKIP_TO_ENDCARD)>0}getEndcardPageCloseButtonDelaySeconds(){return this.isVideoSkipped()&&(this.totalDelaySecondsConsumed=this.getVideoPageCloseButtonDelaySeconds()),this.getTotalCloseButtonDelaySeconds()-this.totalDelaySecondsConsumed}constructor(e=R(),t=e$(),n=en){super(),this.tokenService=e,this.reportingService=t,this.injectedGetScenes=n,this.totalDelaySecondsConsumed=0,this.endcardTypes=[ew.endcard,ew.image]}},eq=class extends a{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=y()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},eQ={},eJ=[],e0=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,e1=Array.isArray;function e2(e,t){for(var n in t)e[n]=t[n];return e}function e3(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function e5(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?ek.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return e4(e,o,i,r,null)}function e4(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++eB:r,__i:-1,__u:0};return null==r&&null!=eU.vnode&&eU.vnode(a),a}function e6(e){return e.children}function e8(e,t){this.props=e,this.context=t}function e7(e,t){if(null==t)return e.__?e7(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?e7(e):null}function e9(e){(!e.__d&&(e.__d=!0)&&eW.push(e)&&!te.__r++||ex!==eU.debounceRendering)&&((ex=eU.debounceRendering)||eF)(te)}function te(){for(var e,t,n,i,r,a,o=1;eW.length;)eW.length>o&&eW.sort(eG),e=eW.shift(),o=eW.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=e2({},n)).__v=n.__v+1,eU.vnode&&eU.vnode(t),ta(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?e7(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,to(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));te.__r=0}function tt(e,t,n,i,r,a,o,s,l,c,d){var u,E,_,v,h,S,T=i&&i.__k||eJ,g=t.length;for(l=function(e,t,n,i,r){var a,o,s,l,c,d=n.length,u=d,E=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(o=t[a])&&"boolean"!=typeof o&&"function"!=typeof o?(l=a+E,(o=e.__k[a]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?e4(null,o,null,null,null):e1(o)?e4(e6,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?e4(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,-1!==(c=o.__i=function(e,t,n,i){var r,a,o=e.key,s=e.type,l=t[n];if(null===l||l&&o==l.key&&s===l.type&&!(2&l.__u))return n;if(i>(null==l||2&l.__u?0:1))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&o==l.key&&s===l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&o==l.key&&s===l.type)return a;a++}}return-1}(o,n,l,u))&&(u--,(s=n[c])&&(s.__u|=2)),null==s||null===s.__v?(-1==c&&E--,"function"!=typeof o.type&&(o.__u|=4)):c!=l&&(c==l-1?E--:c==l+1?E++:(c>l?E--:E++,o.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<d;a++)null!=(s=n[a])&&!(2&s.__u)&&(s.__e==i&&(i=e7(s)),function e(t,n,i){var r,a;if(eU.unmount&&eU.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ts(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){eU.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||e3(t.__e),t.__c=t.__=t.__e=void 0}(s,s));return i}(n,t,T,l,g),u=0;u<g;u++)null!=(_=n.__k[u])&&(E=-1===_.__i?eQ:T[_.__i]||eQ,_.__i=u,S=ta(e,_,E,r,a,o,s,l,c,d),v=_.__e,_.ref&&E.ref!=_.ref&&(E.ref&&ts(E.ref,null,_),d.push(_.ref,_.__c||v,_)),null==h&&null!=v&&(h=v),4&_.__u||E.__k===_.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=e7(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(_,l,e):"function"==typeof _.type&&void 0!==S?l=S:v&&(l=v.nextSibling),_.__u&=-7);return n.__e=h,l}function tn(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||e0.test(t)?n:n+"px"}function ti(e,t,n,i,r){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||tn(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||tn(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(eY,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=eK,e.addEventListener(t,a?eX:ej,a)):e.removeEventListener(t,a?eX:ej,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function tr(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=eK++;else if(t.t<n.u)return;return n(eU.event?eU.event(t):t)}}}function ta(e,t,n,i,r,a,o,s,l,c){var d,u,E,_,v,h,S,T,g,p,C,I,A,O,m,f,N,L,R=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=t.__e=n.__e]),(d=eU.__b)&&d(t);e:if("function"==typeof R)try{if(T=t.props,g="prototype"in R&&R.prototype.render,p=(d=R.contextType)&&i[d.__c],C=d?p?p.props.value:d.__:i,n.__c?S=(u=t.__c=n.__c).__=u.__E:(g?t.__c=u=new R(T,C):(t.__c=u=new e8(T,C),u.constructor=R,u.render=tl),p&&p.sub(u),u.props=T,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),g&&null==u.__s&&(u.__s=u.state),g&&null!=R.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=e2({},u.__s)),e2(u.__s,R.getDerivedStateFromProps(T,u.__s))),_=u.props,v=u.state,u.__v=t,E)g&&null==R.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),g&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(g&&null==R.getDerivedStateFromProps&&T!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(T,C),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(T,u.__s,C)||t.__v==n.__v)){for(t.__v!=n.__v&&(u.props=T,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(T,u.__s,C),g&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(_,v,h)}))}if(u.context=C,u.props=T,u.__P=e,u.__e=!1,A=eU.__r,O=0,g){for(u.state=u.__s,u.__d=!1,A&&A(t),d=u.render(u.props,u.state,u.context),m=0;m<u._sb.length;m++)u.__h.push(u._sb[m]);u._sb=[]}else do{u.__d=!1,A&&A(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++O<25);u.state=u.__s,null!=u.getChildContext&&(i=e2(e2({},i),u.getChildContext())),g&&!E&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(_,v)),N=(f=null!=d&&d.type===e6&&null==d.key)?d.props.children:d,f&&(d.props.children=null),s=tt(e,e1(N)?N:[N],t,n,i,r,a,o,s,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),S&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else for(L=a.length;L--;)e3(a[L]);else t.__e=n.__e,t.__k=n.__k;eU.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,r,a,o,s,l){var c,d,u,E,_,v,h,S=n.props,T=t.props,g=t.type;if("svg"==g?r="http://www.w3.org/2000/svg":"math"==g?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((_=a[c])&&"setAttribute"in _==!!g&&(g?_.localName==g:3==_.nodeType)){e=_,a[c]=null;break}if(null==e){if(null==g)return document.createTextNode(T);e=document.createElementNS(r,g,T.is&&T),s&&(eU.__m&&eU.__m(t,a),s=!1),a=null}if(null===g)S===T||s&&e.data===T||(e.data=T);else{if(a=a&&ek.call(e.childNodes),S=n.props||eQ,!s&&null!=a)for(S={},c=0;c<e.attributes.length;c++)S[(_=e.attributes[c]).name]=_.value;for(c in S)if(_=S[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=_;else if(!(c in T)){if("value"==c&&"defaultValue"in T||"checked"==c&&"defaultChecked"in T)continue;ti(e,c,null,_,r)}for(c in T)_=T[c],"children"==c?E=_:"dangerouslySetInnerHTML"==c?d=_:"value"==c?v=_:"checked"==c?h=_:s&&"function"!=typeof _||S[c]===_||ti(e,c,_,S[c],r);if(d)s||u&&(d.__html===u.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),tt("template"===t.type?e.content:e,e1(E)?E:[E],t,n,i,"foreignObject"==g?"http://www.w3.org/1999/xhtml":r,a,o,a?a[0]:n.__k&&e7(n,0),s,l),null!=a)for(c=a.length;c--;)e3(a[c]);s||(c="value","progress"==g&&null==v?e.removeAttribute("value"):void 0===v||v===e[c]&&("progress"!=g||v)&&("option"!=g||v===S[c])||ti(e,c,v,S[c],r),c="checked",void 0!==h&&h!==e[c]&&ti(e,c,h,S[c],r))}return e}(n.__e,t,n,i,r,a,o,l,c);return(d=eU.diffed)&&d(t),128&t.__u?void 0:s}function to(e,t,n){for(var i=0;i<n.length;i++)ts(n[i],n[++i],n[++i]);eU.__c&&eU.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){eU.__e(e,t.__v)}}))}function ts(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){eU.__e(e,n)}}function tl(e,t,n){return this.constructor(e,n)}ek=eJ.slice,eU={__e:function(e,t,n,i){for(var r,a,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},eB=0,eH=function(e){return null!=e&&null==e.constructor},e8.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=e2({},this.state),"function"==typeof e&&(e=e(e2({},n),this.props)),e&&e2(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),e9(this))},e8.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),e9(this))},e8.prototype.render=e6,eW=[],eF="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eG=function(e,t){return e.__v.__b-t.__v.__b},te.__r=0,eY=/(PointerCapture)$|Capture$/i,eK=0,ej=tr(!1),eX=tr(!0);var td,tc,tu,tE,tv=0,t_=[],th=eU,tS=th.__b,tT=th.__r,tg=th.diffed,tp=th.__c,tC=th.unmount,tI=th.__;function tO(e,t){th.__h&&th.__h(tc,e,tv||t),tv=0;var n=tc.__H||(tc.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tA(e,t,n){var i=tO(td++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):tb(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=tc,!tc.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),a&&a.call(this,e,t,n)||o};tc.__f=!0;var a=tc.shouldComponentUpdate,o=tc.componentWillUpdate;tc.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}o&&o.call(this,e,t,n)},tc.shouldComponentUpdate=r}return i.__N||i.__}function tm(e,t){var n=tO(td++,3);!th.__s&&tP(n.__H,t)&&(n.__=e,n.u=t,tc.__H.__h.push(n))}function tf(e){return tv=5,tN((function(){return{current:e}}),[])}function tN(e,t){var n=tO(td++,7);return tP(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tD(){for(var e;e=t_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(tR),e.__H.__h.forEach(tL),e.__H.__h=[]}catch(t){e.__H.__h=[],th.__e(t,e.__v)}}th.__b=function(e){tc=null,tS&&tS(e)},th.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),tI&&tI(e,t)},th.__r=function(e){tT&&tT(e),td=0;var t=(tc=e.__c).__H;t&&(tu===tc?(t.__h=[],tc.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(tR),t.__h.forEach(tL),t.__h=[],td=0)),tu=tc},th.diffed=function(e){tg&&tg(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==t_.push(t)&&tE===th.requestAnimationFrame||((tE=th.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),ty&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);ty&&(t=requestAnimationFrame(n))})(tD)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),tu=tc=null},th.__c=function(e,t){t.some((function(e){try{e.__h.forEach(tR),e.__h=e.__h.filter((function(e){return!e.__||tL(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],th.__e(n,e.__v)}})),tp&&tp(e,t)},th.unmount=function(e){tC&&tC(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{tR(e)}catch(e){t=e}})),n.__H=void 0,t&&th.__e(t,n.__v))};var ty="function"==typeof requestAnimationFrame;function tR(e){var t=tc,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),tc=t}function tL(e){var t=tc;e.__c=e.__(),tc=t}function tP(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function tb(e,t){return"function"==typeof t?t(e):t}var tw=Symbol.for("preact-signals");function tV(){if(tB>1)tB--;else{for(var e,t=!1;void 0!==tU;){var n=tU;for(tU=void 0,tH++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&tY(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(tH=0,tB--,t)throw e}}function tM(e){if(tB>0)return e();tB++;try{return e()}finally{tV()}}var tk=void 0,tU=void 0,tB=0,tH=0,tW=0;function tx(e){if(void 0!==tk){var t=e.n;if(void 0===t||t.t!==tk)return t={i:0,S:e,p:tk.s,n:void 0,t:tk,e:void 0,x:void 0,r:t},void 0!==tk.s&&(tk.s.n=t),tk.s=t,e.n=t,32&tk.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=tk.s,t.n=void 0,tk.s.n=t,tk.s=t),t}}function tF(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function tG(e){return new tF(e)}function tY(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tK(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tj(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tX(e){tF.call(this,void 0),this.x=e,this.s=void 0,this.g=tW-1,this.f=4}function tz(e){var t=e.u;if(e.u=void 0,"function"==typeof t){tB++;var n=tk;tk=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,t$(e),t}finally{tk=n,tV()}}}function t$(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,tz(e)}function tZ(e){if(tk!==this)throw Error("Out-of-order effect");tj(this),tk=e,this.f&=-2,8&this.f&&t$(this),tV()}function tq(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function tQ(e){var t=new tq(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}tF.prototype.brand=tw,tF.prototype.h=function(){return!0},tF.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},tF.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},tF.prototype.subscribe=function(e){var t=this;return tQ((function(){var n=t.value,i=tk;tk=void 0;try{e(n)}finally{tk=i}}))},tF.prototype.valueOf=function(){return this.value},tF.prototype.toString=function(){return this.value+""},tF.prototype.toJSON=function(){return this.value},tF.prototype.peek=function(){var e=tk;tk=void 0;try{return this.value}finally{tk=e}},Object.defineProperty(tF.prototype,"value",{get:function(){var e=tx(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(tH>100)throw Error("Cycle detected");this.v=e,this.i++,tW++,tB++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{tV()}}}}),(tX.prototype=new tF).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===tW))return!0;if(this.g=tW,this.f|=1,this.i>0&&!tY(this))return this.f&=-2,!0;var e=tk;try{tK(this),tk=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return tk=e,tj(this),this.f&=-2,!0},tX.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}tF.prototype.S.call(this,e)},tX.prototype.U=function(e){if(void 0!==this.t&&(tF.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tX.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tX.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=tx(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),tq.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},tq.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,tz(this),tK(this),tB++;var e=tk;return tk=this,tZ.bind(this,e)},tq.prototype.N=function(){2&this.f||(this.f|=2,this.o=tU,tU=this)},tq.prototype.d=function(){this.f|=8,1&this.f||t$(this)};var tJ,t0,t1=[],t2=[];function t3(e,t){eU[e]=t.bind(null,eU[e]||function(){})}function t5(e){t0&&t0(),t0=e&&e.S()}function t4(e){var t=this,n=e.data,i=t6(n);i.value=n;var r=tN((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new tX((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})),r=new tX((function(){return!eH(n.value)})),a=tQ((function(){if(this.N=nn,r.value){var e=n.value;t.base&&3===t.base.nodeType&&(t.base.data=e)}})),o=t.__$u.d;return t.__$u.d=function(){a(),o.call(this)},[r,n]}),[]),a=r[0],o=r[1];return a.value?o.peek():o.value}function t6(e){return tN((function(){return tG(e)}),[])}tQ((function(){tJ=this.N}))(),t4.displayName="_st",Object.defineProperties(tF.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:t4},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),t3("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof tF&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),t3("__r",(function(e,t){t5();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u))&&(r.__$u=(tQ((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},i=n)),t5(i),e(t)})),t3("__e",(function(e,t,n,i){t5(),e(t,n,i)})),t3("diffed",(function(e,t){if(t5(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var o in a){var s=a[o];void 0===s||o in i||(s.d(),a[o]=void 0)}else a={},n.U=a;for(var l in i){var c=a[l],d=i[l];void 0===c?(c=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=tG(n);return{o:function(e,t){a.value=e,i=t},d:tQ((function(){this.N=nn;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,d,r),a[l]=c):c.o(d,r)}}}e(t)})),t3("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)})),t3("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),e8.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if("__source"!==o&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};var t8="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,t7=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function t9(){tM((function(){for(var e;e=t1.shift();)tJ.call(e)}))}function ne(){1===t1.push(this)&&(eU.requestAnimationFrame||t8)(t9)}function nt(){tM((function(){for(var e;e=t2.shift();)tJ.call(e)}))}function nn(){1===t2.push(this)&&(eU.requestAnimationFrame||t7)(nt)}function ni(e){var t=tf(e);t.current=e,tm((function(){return tQ((function(){return this.N=ne,t.current()}))}),[])}var nr=class extends a{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=tG(!1)}},na=()=>{let e=r.getInstance(),t=p.getServiceIdentifier();return e.get(t)},no=(e,t)=>(null!=t?t:na()).interpreterMap.get(e);(EJ=_o||(_o={})).SHOW="SHOW",EJ.PRELOAD="PRELOAD",EJ.CANCEL_PRELOAD="CANCEL_PRELOAD",(E0=_s||(_s={})).SHOWING="SHOWING",E0.PRELOADING="PRELOADING",E0.INITIAL="INITIAL",(E1=_l||(_l={})).INITIALIZE_PRELOAD="initializePreload",E1.EMIT_SHOW="emitShow",E1.MARK_PRELOAD_SUCCESS="markPreloadSuccess",E1.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",E1.FLUSH_MRAID_EVENTS="flushMraidEvents",E1.CANCEL_PRELOAD="cancelPreload",(E2=_d||(_d={})).MUTE_SOUND="muteSound",E2.UN_MUTE_SOUND="unMuteSound",E2.EMIT_MUTED="emitMuted",E2.EMIT_VIDEO_ERROR="emitVideoError",E2.CLOSE_VIDEO="closeVideo",E2.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",E2.CLOSE_PICTURE_IN_PICTURE="closePictureInPicture",E2.PAUSE_VIDEO="pauseVideo",E2.PLAY_VIDEO="playVideo",E2.POSTROLL_VIEW="postrollView",E2.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",E2.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT="setPictureInPictureVideoContext",E2.SHOW_PICTURE_IN_PICTURE="showPictureInPicture",E2.SEND_FATAL_VIDEO_ERROR="sendFatalVideoError";var ns=_d;(E3=_c||(_c={})).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",E3.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",E3.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",E3.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",E3.CLOSE_PICTURE_IN_PICTURE="CLOSE_PICTURE_IN_PICTURE",E3.COMPLETE="COMPLETE",E3.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",E3.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",E3.MUTE="MUTE",E3.NEXT="NEXT",E3.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",E3.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",E3.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",E3.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",E3.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",E3.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",E3.UNMUTE="UNMUTE",E3.VIDEO_ERROR="VIDEO_ERROR",E3.VIDEO_FAILURE="VIDEO_FAILURE",E3.CLOSE="CLOSE",E3.CREATIVE_VIEW="CREATIVE_VIEW";var nl=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1}},nd=()=>{let e=r.getInstance(),t=f.getServiceIdentifier();return e.get(t)};(E5=_u||(_u={})).PAUSE_INTERVALS="pauseAllIntervals",E5.START_INTERVALS="startAllIntervals";var nc=e=>({pauseAllIntervals:()=>{(e||nd()).pauseAll()},startAllIntervals:()=>{(e||nd()).startAll()}}),nu=()=>{let e=r.getInstance(),t=D.getServiceIdentifier();return e.get(t)};(E4=_E||(_E={})).STANDBY_TIMERS="standbyTimers",E4.WAKE_TIMERS="wakeTimers";var nE=e=>({standbyTimers:()=>{(e||nu()).standby()},wakeTimers:()=>{(e||nu()).wake()}});(E6=_v||(_v={})).OPEN_PRIVACY_URL="openPrivacyUrl",E6.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",E6.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",E6.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",E6.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",E6.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange";var nv=_v;(E8=__||(__={})).CLOSE="CLOSE",E8.FINISH="FINISH",E8.INTERRUPT="INTERRUPT",E8.SET_ERROR="SET_ERROR",E8.SET_PREPARED="SET_PREPARED",E8.READY="READY",E8.RESUME="RESUME",E8.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",E8.SET_FALLBACK="SET_FALLBACK",E8.SET_VISIBLE="SET_VISIBLE",E8.SHOW="SHOW",E8.START_DELAY_SHOW="START_DELAY_SHOW",E8.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(E7=_h||(_h={})).CLOSING="CLOSING",E7.ERROR="ERROR",E7.DELAY_SHOW="DELAY_SHOW",E7.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",E7.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",E7.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",E7.FALLBACK="FALLBACK",E7.IDLE="IDLE",E7.INITIAL="INITIAL",E7.IMMEDIATE_SHOW="IMMEDIATE_SHOW",E7.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",E7.PREPARING="PREPARING",(E9=_S||(_S={})).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",E9.ASSIGN_FALLBACK="ASSIGN_FALLBACK",E9.CLOSE_SKO="CLOSE_SKO",E9.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",E9.SHOW_FALLBACK="SHOW_FALLBACK",E9.SHOW_SKO="SHOW_SKO",E9.CANCEL_DELAY_SHOW="CANCEL_DELAY_SHOW";const n_=new w("6.4"),nh=new w("6"),nS=(e=K())=>e.getSdkVersion().isGreaterThanOrEqualTo(n_),nT=(e=K())=>e.getOperatingSystem()===eD.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nh);var ng=(e=K())=>nS(e)&&nT(e);(ve=_T||(_T={})).SKPV="SKPV",ve.APP_STORE="APP_STORE",ve.OFF="OFF";var np=(e=K())=>{let t="APP_STORE";return ng(e)&&(t="SKPV"),t},nC=class extends a{canOpen(){return[_h.IDLE,_h.FALLBACK].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:__.CLOSE})}fallback(){this.interpreter.state.context.fallback!==_T.OFF&&(this.interpreter.send({type:__.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:__.FINISH})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:__.INTERRUPT})}isIdle(){var e;return null!==(e=this.interpreter.state.matches(_h.IDLE))&&void 0!==e&&e}isInterrupted(){return[_h.CLOSING,_h.DELAY_SHOW_INTERRUPTED].some((e=>this.interpreter.state.matches(e)))}isOpen(){return[_h.DELAY_SHOW_IMMEDIATE,_h.DELAY_SHOW_VISIBLE,_h.IMMEDIATE_SHOW,_h.IMMEDIATE_SHOW_VISIBLE].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:__.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(_h.DELAY_SHOW)?__.SHOW:__.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:__.RESUME})}setDisplayOptions(e){this.interpreter.send({type:__.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=na()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nI=()=>{let e=r.getInstance(),t=nC.getServiceIdentifier();if(e.has(t))return e.get(t)};(vt=_g||(_g={})).CLOSE_OVERLAY_VIEW="closeOverlayView",vt.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",vt.RESUME_OVERLAY_VIEW="resumeOverlayView",vt.SHOW_OVERLAY_VIEW="showOverlayView";var nO=(e=nI)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}});(vn=_p||(_p={})).START="start",vn.STOP="stop";var nA=_p,nm=()=>eo();(_C||(_C={})).CLOSE_AD="CLOSE_AD";var nf=_C;(_I||(_I={})).CLOSE="close";var nN=_I,nD=(e=nu(),t=nm())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:nN.CLOSE,fireOnlyOnce:!0}),t.emit({type:"heartbeat",event:nA.STOP}),t.emit({type:"close",event:nf.CLOSE_AD,fireOnlyOnce:!0})};(vi=_O||(_O={})).CLOSE="CLOSE",vi.OPEN="OPEN",vi.PREPARE_FINISHED="PREPARE_FINISHED",vi.PREPARE_SUCCESS="PREPARE_SUCCESS",vi.READY="READY",vi.SET_FALLBACK="SET_FALLBACK",(vr=_A||(_A={})).FALLBACK="FALLBACK",vr.HIDDEN="HIDDEN",vr.INITIAL="INITIAL",vr.PREPARING="PREPARING",vr.SHOWING="SHOWING",vr.DONE="DONE";var ny=class extends a{isDone(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_A.DONE))&&void 0!==t&&t}canOpen(){var e,t,n;return null!==(n=(null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_A.HIDDEN))||(null===(t=this.interpreter)||void 0===t?void 0:t.state.matches(_A.FALLBACK)))&&void 0!==n&&n}close(){var e;null===(e=this.interpreter)||void 0===e||e.send({type:_O.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_A.SHOWING))&&void 0!==t&&t}open(e){var t;this.hasFallback=e,null===(t=this.interpreter)||void 0===t||t.send({type:_O.OPEN})}subscribe(e){var t;return null===(t=this.interpreter)||void 0===t?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=na()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nR=()=>{let e=r.getInstance(),t=ny.getServiceIdentifier();if(e.has(t))return e.get(t)},nL=(e=K())=>e.getSdkVersion().isLessThan(new w("7"))&&e.getOrientation()===ey.LANDSCAPE;const nP=new w("14"),nb=new w("6.8.1"),nw=(e=K())=>e.getOperatingSystem()===eD.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nP),nV=(e=K())=>e.getSdkVersion().isGreaterThanOrEqualTo(nb);var nM=(e=K(),t=j())=>nw(e)&&nV(e)&&!(t.isMrec()||t.isBanner()||t.isInLine());(va=_m||(_m={})).MINIMIZED="minimized",va.MAXIMIZED="maximized";var nk=_m;(vo=_f||(_f={})).SHOW_PRODUCT_VIEW="showProductView",vo.HIDE_PRODUCT_VIEW="hideProductView",vo.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose";const nU=()=>({showProductView:()=>{if(nL()&&nM()){let e=nI();return void((null==e?void 0:e.canOpen())&&e.open({fallback:_T.OFF}))}let e=nR();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{K().getSdkVersion().isEqualTo(M.sdkSeven)&&ng()&&eo().addEventHandler("viewability",((e,t)=>{t.event===nk.MAXIMIZED&&nD()}))}});var nB=()=>ng()?nU():void 0;(vs=_N||(_N={}))[vs.CLOSE=0]="CLOSE",vs[vs.SKIP=1]="SKIP",(vl=_D||(_D={})).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",vl.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",vl.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",vl.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden";var nH=_N;const nW={name:_c.PRIVACY_LOGO_SHOW,actions:[{name:nv.SET_PRIVACY_BUTTON_VISIBLE}]},nx={name:_c.PRIVACY_LOGO_HIDE,actions:[{name:nv.SET_PRIVACY_BUTTON_HIDDEN}]},nF=e=>({name:_c.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:nv.SET_PRIVACY_DRAWER_OPEN},{name:nv.TRIGGER_VIEWABLE_CHANGE},{name:ns.PAUSE_VIDEO},{name:_u.PAUSE_INTERVALS},{name:_E.STANDBY_TIMERS},{name:_g.INTERRUPT_OVERLAY_VIEW}]:[{name:nv.OPEN_PRIVACY_URL}]}),nG={name:_c.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:ns.PLAY_VIDEO},{name:nv.SET_PRIVACY_DRAWER_CLOSED},{name:nv.TRIGGER_VIEWABLE_CHANGE},{name:_u.START_INTERVALS},{name:_E.WAKE_TIMERS},{name:_g.RESUME_OVERLAY_VIEW}]},nY={name:_c.OPEN_PRIVACY_PAGE,actions:[{name:nv.OPEN_PRIVACY_URL}]},nK={name:_c.PRODUCT_VIEW_CLOSE,actions:[{name:_f.END_AD_ON_PRODUCT_VIEW_CLOSE}]},nj={name:_c.CLOSE_BUTTON_MOUNT,actions:[{name:_D.SET_CLOSE_BUTTON_VISIBLE}]},nX={name:_c.CLOSE_BUTTON_UNMOUNT,actions:[{name:_D.SET_CLOSE_BUTTON_HIDDEN}]},nz={name:_c.CLOSE_BUTTON_CLICK,actions:[{name:_D.EMIT_CLOSE_BUTTON_CLICK}]},n$={name:_c.CLOSE_BUTTON_WILL_SHOW,actions:[{name:_D.EMIT_CLOSE_BUTTON_SHOW}]},nZ={name:_c.CLOSE_PICTURE_IN_PICTURE,actions:[{name:ns.CLOSE_PICTURE_IN_PICTURE}]};var nq=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},nQ=class extends nl{getTransitions(){return super.getTransitions().concat(nx,nW,nF(this.isFullscreen),nG,nY,nZ)}isLastPage(){var e;return!(nq(this)&&this.getLastChanceEndcardConfig().enabled||(null===(e=this.next)||void 0===e?void 0:e.getSceneType())!==ew.closed)}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const nJ={name:_c.MUTE,actions:[{name:ns.MUTE_SOUND},{name:ns.EMIT_MUTED}]},n0={name:_c.UNMUTE,actions:[{name:ns.UN_MUTE_SOUND},{name:ns.EMIT_MUTED}]},n1={name:_c.VIDEO_ERROR,actions:[{name:ns.EMIT_VIDEO_ERROR}]};var n2=e=>{switch(e){case"off":return eV.OFF;case"overlay_view":return eV.SKO;default:return eV.SKPV}},n3=class{getFullScreenClickConfig(){return{enabled:(()=>{if(this.placementType!==em.FULLSCREEN)return!0;let e=this.skOverlayAutoTokenValue,t=this.fullCtaOptionTokenValue,n=this.fullCtaTokenValue;return"fsc_off"!==t&&("true"===e||"true"===n)})(),id:this.id,target:[em.BANNER,em.MREC].includes(this.placementType)?eV.SKPV:n2(this.skFullCtaTokenValue)}}constructor({skOverlayAutoTokenValue:e,fullCtaOptionTokenValue:t,fullCtaTokenValue:n,skFullCtaTokenValue:i,id:r,placementType:a}){this.skOverlayAutoTokenValue=e,this.fullCtaOptionTokenValue=t,this.fullCtaTokenValue=n,this.skFullCtaTokenValue=i,this.id=r,this.placementType=a}};(vd=_y||(_y={})).CHECKPOINT_0="checkpoint.0",vd.CHECKPOINT_100="checkpoint.100",vd.CHECKPOINT_25="checkpoint.25",vd.CHECKPOINT_50="checkpoint.50",vd.CHECKPOINT_75="checkpoint.75",vd.CLICK_URL="clickUrl",vd.POSTROLL_CLICK="postroll.click",vd.POSTROLL_VIEW="postroll.view",vd.VIDEO_CLOSE="video.close",vd.VIDEO_LENGTH="video.length",vd.VIDEO_MUTE="video.mute",vd.VIDEO_UNMUTE="video.unmute",vd.REWARD_GRANTED="rewardGranted";var n5=_y;const n4=e=>Object.values(n5).includes(e);var n6=class extends es{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&n4(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},n8=e=>new n6(null!=e?e:eo()),n7=(e=n8(),t=$())=>{let n=(null==t?void 0:t.getSceneType())===ew.image||(null==t?void 0:t.getSceneType())===ew.endcard;t&&"shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick?(null==t?void 0:t.getSceneType())===ew.video&&e.emit(n5.CLICK_URL,!0):e.emit(n5.CLICK_URL,!0),n&&e.emit(n5.POSTROLL_CLICK,!0)},n9=class{getStoreKitOverlayAutoShowConfig(e=n7){let t="adv_pref"===this.fullCtaOptionTokenValue,n="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!nM(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&q(this.skOverlayAutoTokenValue)&&t,autoShowDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayDelaySecondsTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?e:()=>{}}}constructor(e,t,n,i,r,a,o=K(),s=j()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=o,this.placementTypeService=s}},ie=(e=R())=>{let t=e.get(L.APP_STORE_ID);if(t)return t;let n=e.get(L.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);return(null==i?void 0:i[1])?i[1]:void 0},it=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnVideoAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!(!ng(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=K(),i=j()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},ii=e=>{var t;return!!e&&"false"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},ir=class{getStoreKitOverlayAutoShowConfig(e=n7){let t=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,n="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!nM(this.environmentService,this.placementTypeService)||!this.appStoreId||ii(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!t&&parseInt(t,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let e=parseInt(null!=t?t:"5",10);return Number.isNaN(e)?3e3:Math.max(3e3,1e3*e)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?()=>e():()=>{}}}constructor(e,t,n,i,r,a,o,s,l,c=K(),d=j()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=o,this.skOverlayAutoCloseTokenValue=s,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=c,this.placementTypeService=d}},ia=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnEndcardAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!!ng(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=K()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const io=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});(vc=_R||(_R={})).RESOURCE="resource",vc.EXCEPTION="exception",vc.UNHANDLEDREJECTION="unhandledrejection",vc.PLAYABLE="playable",(vu=_L||(_L={})).IMAGE="img",vu.VIDEO="video";var is=_R,il=()=>eo(),id=(e,t=il())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:is.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]},ic=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!==(e=this.appRatingCount)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?io.format(t):""}getAppContentRatingImg(){var e,t;return null!==(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!==(e=this.appContentRating)&&void 0!==e?e:""])&&void 0!==t?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!==(t=null!==(e=this.appRating)&&void 0!==e?e:this.appStoreRating)&&void 0!==t?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let o=parseFloat(n);return Number.isNaN(o)?parseFloat("4.4"):o}getAppName(){var e;if(this.appNameEncoded)try{return V(this.appNameEncoded)}catch(e){}return null!==(e=this.appName)&&void 0!==e?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return V(this.appDescriptionEncoded)}catch(e){}return null!==(e=this.appDescription)&&void 0!==e?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return V(this.appLongDescriptionEncoded)}catch(e){}return null!==(e=this.appLongDescription)&&void 0!==e?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return V(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!==(e=this.ctaButtonUrl)&&void 0!==e?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!==(e=this.appContentRating)&&void 0!==e?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!==(t=this.appIcon)&&void 0!==t?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:id(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:o,appRatingCount:s,appLongDescription:l,appContentRating:c,appScreenShots:d,appDownloadCount:u,appRating:E,appStoreRating:_,appStoreId:v,appNameEncoded:h,appDescriptionEncoded:S,appLongDescriptionEncoded:T,errorLoggingReportingService:g=il()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=o,this.appRatingCount=s,this.appLongDescription=l,this.appContentRating=c,this.appScreenShots=d,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=_,this.appStoreId=v,this.appNameEncoded=h,this.appDescriptionEncoded=S,this.appLongDescriptionEncoded=T,this.errorLoggingReportingService=g}};const iu=(e,t=R(),n=j())=>({appNameEncoded:t.get(L.APP_NAME_ENCODED),appStoreId:t.get(L.APP_STORE_ID),ctaButtonDelay:t.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(L.CTA_BUTTON_URL),ctaTarget:eV.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaOptionTokenValue:t.get(L.FULL_CTA_OPTION),fullCtaTokenValue:t.get(L.FULL_CTA),hasEndcard:t.has(L.EC_HTML)||t.has(L.EC_IMAGE),hasVideo:t.has(L.MAIN_VIDEO)||t.has(L.MAIN_STREAM),icon:t.get(L.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(L.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(L.SK_CTA_ONLY),skFscTokenValue:t.get(L.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var iE=class extends ic{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:n2(this.skCtaOnlyTokenValue),delay:parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"4",10)},fsc:{enabled:q(this.fullCtaTokenValue)&&"fsc_off"!==this.fullCtaOptionTokenValue,ctaUrl:this.ctaButtonUrl,target:n2(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:nH.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:o,enabled:s=!1,endcardCloseButtonDelaySeconds:l,fullCtaOptionTokenValue:c,fullCtaTokenValue:d,hasEndcard:u,hasVideo:E,icon:_,id:v,isFullscreen:h,name:S,showECCloseButtonCountDownTokenValue:T,skCtaOnlyTokenValue:g,skFscTokenValue:p,staticEndcardCloseButtonDelaySeconds:C},I){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:S,appIcon:_,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:I}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=o?o:eV.SKPV,this.enabled=s,this.endcardCloseButtonDelaySeconds=l,this.fullCtaOptionTokenValue=c,this.fullCtaTokenValue=d,this.hasEndcard=!!u,this.hasVideo=!!E,this.icon=_,this.id=v,this.isFullscreen=!!h,this.appName=S,this.showECCloseButtonCountDownTokenValue=T,this.skCtaOnlyTokenValue=g,this.skFscTokenValue=p,this.staticEndcardCloseButtonDelaySeconds=C}},iv=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?nH.CLOSE:q(this.endcardCloseButtonAsSkipTokenValue)?nH.SKIP:nH.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||q(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},i_=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},ih=class extends ic{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:n2(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}};(vE=_P||(_P={})).GRANT_REWARD="GRANT_REWARD",vE.FORFEIT_REWARD="FORFEIT_REWARD";var iS=_P;(vv=_b||(_b={})).CLOSE_AD="closeAd",vv.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",vv.ENSURE_REWARD_GRANTED="ensureRewardGranted";var iT=(e=R(),t=nm(),n=nD,i=nI)=>({closeAd:()=>{n()},closeStoreKitOverlay:()=>{var e;null===(e=i())||void 0===e||e.close()},ensureRewardGranted:()=>{let n=t.hasExistingEvent({type:"incentivized-event",event:iS.FORFEIT_REWARD}),i=t.hasExistingEvent({type:"incentivized-event",event:iS.GRANT_REWARD});!Q(e)||n||i||t.emit({type:"incentivized-event",event:iS.GRANT_REWARD,fireOnlyOnce:!0})}});(v_=_w||(_w={})).ON_CREATIVE_VIEW="onCreativeView",v_.DESTROY_IFRAME="destroyIframe",v_.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",v_.INIT_CHECKPOINTS="initCheckpoints",v_.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",v_.ON_ENDCARD_CLOSE="onEndcardClose",v_.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",v_.ON_SHOW="onShow";var ig=_w;class ip extends nl{getId(){return"closed"}static getInstances(){let e=j();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new ip]}getSceneType(){return ew.closed}constructor(){super(),this.addEntryAction({name:_b.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:ig.DESTROY_IFRAME}),this.getEntryActions().some((e=>e.name===_b.CLOSE_AD))||this.addEntryAction({name:_b.CLOSE_AD}),this.addTransition(d({},nK)),this.addTransition(d({},nZ))}}var iC=(e=R(),t=j())=>!!t.isMrec()||q(e.get(L.START_MUTED))||q(e.get(L.REAL_START_MUTED)),iI=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null===(i=e.error)||void 0===i||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null===(t=e.complete)||void 0===t||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},iO=function(e){return t=>new iI((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})))},iA=(e,t)=>new iI((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),im=(e,t,n)=>iA(e,"error-logging").pipe(iO((e=>e.event===t&&(!n||e.data.resourceType===n)))),iN=function(){return e=>new iI((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},iD=function(e){return t=>new iI((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null===(e=n.complete)||void 0===e||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},iy=(e,t)=>iA(e,"scene-event").pipe(iO((e=>e.event===t)));(vh=_V||(_V={})).CLICK="CLICK",vh.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",vh.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",vh.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",vh.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",vh.EMIT_SCENE_END_OBSERVABILITY_EVENT="EMIT_SCENE_END_OBSERVABILITY_EVENT",vh.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",vh.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",vh.LOAD_COMPLETE="LOAD_COMPLETE",vh.LOAD_START="LOAD_START",vh.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",vh.PRELOAD_CANCELLED="PRELOAD_CANCELLED",vh.PRELOAD_COMPLETE="PRELOAD_COMPLETE",vh.PRELOAD_START="PRELOAD_START",vh.SCENE_END="SCENE_END",vh.SCENE_START="SCENE_START";var iR=_V,iL=(e,t)=>new iI((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null===(e=n.complete)||void 0===e||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),iP=function(e){return t=>new iI((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null===(t=n.complete)||void 0===t||t.call(n))},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},ib=(e,t,n)=>new iI((i=>{let r=iL(e,t).subscribe({next:e=>{var t;i.next(e),null===(t=i.complete)||void 0===t||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),iw=(e,t,n)=>new iI((i=>{let r=0,a=null,o=t.subscribe({next:()=>{var e;i.next(r),null===(e=i.complete)||void 0===e||e.call(i),null==a||a.unsubscribe(),o.unsubscribe()}}),s=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null===(t=i.error)||void 0===t?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),s.unsubscribe()}}})),iV=function(e){return t=>new iI((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)}})}))},iM=function(e){return t=>new iI((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null===(r=n.error)||void 0===r||r.call(n,e)}},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})}))},ik=function(e){return t=>new iI((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null===(t=n.complete)||void 0===t||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},iU=e=>iy(e,iR.CLOSE_BUTTON_SHOW).pipe(iV((()=>iy(e,iR.CLICK).pipe(iM((()=>!0))))),iD(iy(e,iR.SCENE_END)),ik(!1)),iB=(e,t)=>iy(e,iR.CLICK).pipe(iD(t),iN(),ik(0)),iH=e=>ib(iy(e,iR.LAST_CHANCE_ENDCARD_OPEN),iy(e,iR.LAST_CHANCE_ENDCARD_CLOSE),iy(e,iR.SCENE_END)),iW=(...e)=>new iI((t=>{let n=[],i=()=>{n.forEach((e=>e()))},r=e=>{var n;t.next(e),null===(n=t.complete)||void 0===n||n.call(t),i()},a=e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},o=()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:r,error:a,complete:o});n.push(t)}))})),ix=e=>iW(iy(e,iR.SCENE_END).pipe(iM((()=>!1))),iy(e,iR.LAST_CHANCE_ENDCARD_OPEN).pipe(iV((()=>iB(e,iy(e,iR.LAST_CHANCE_ENDCARD_CLOSE)))),iM((e=>e>0)),ik(!1))),iF=e=>iw(iy(e,iR.SCENE_START),iW(iy(e,iR.CLOSE_BUTTON_SHOW),iy(e,iR.SCENE_END)),iy(e,iR.NEAR_CLOSE_BUTTON_CLICK)),iG=(e=nm(),t=!1)=>{let n=iL(iy(e,iR.SCENE_START),iy(e,iR.SCENE_END)),i=iy(e,iR.CLICK).pipe(iP(1)),r=ib(iy(e,iR.SCENE_START),i,iy(e,iR.SCENE_END)),a=iw(iy(e,iR.CLOSE_BUTTON_SHOW).pipe(iP(1)),iy(e,iR.SCENE_END),iy(e,iR.NEAR_CLOSE_BUTTON_CLICK)),o=ib(iy(e,iR.CLOSE_BUTTON_SHOW),iy(e,iR.CLOSE_BUTTON_CLICK),iy(e,iR.SCENE_END)),s=iU(e),l=ib(iy(e,iR.CLOSE_BUTTON_SHOW),iW(iy(e,iR.SCENE_END),iy(e,iR.LAST_CHANCE_ENDCARD_OPEN)),iy(e,iR.SCENE_END)),c={click_count:iB(e,iy(e,iR.SCENE_END)),close_button_idle_time:o,duration:n,first_click:r,interaction_after_close_button_visible:s,near_click_count_after_close_button_appears:a,near_click_count_before_close_button_appears:iF(e),time_after_close_button:l};return t&&(c.last_chance_endcard_duration=iH(e),c.last_chance_endcard_clicked=ix(e)),c},iY=(e,t)=>iA(e,"video").pipe(iO((e=>e.event===t)));(vS=_M||(_M={})).BANDWIDTH_ESTIMATION="bandwidthEstimation",vS.CAN_PLAY_THROUGH="canplaythrough",vS.CLOSE="close",vS.DURATION_CHANGE="durationchange",vS.ENDED="ended",vS.ERROR="error",vS.HLS_LEVEL_PLAYLIST_LOADED="hlsLevelPlaylistLoaded",vS.MUTE="mute",vS.PAUSE="pause",vS.PLAY="play",vS.PROGRESS="progress",vS.SUSPEND="suspend",vS.TIME_UPDATE="timeupdate",vS.UNMUTE="unmute",vS.WAITING="waiting";var iK=_M,ij=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n};(vT=_k||(_k={})).PROGRESS="progress",vT.VIDEO_LENGTH="videoLength",vT.VIDEO_REACHED_DURATION="videoReachedDuration";var iX=_k,iz=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const i$=()=>eo(),iZ=()=>eo(),iq=(e,t,n)=>{y().getMraidBridgeExt()&&t>0&&e>0&&iZ().emit({type:"videoViewed",event:iX.VIDEO_LENGTH,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},iQ=(e,t,n)=>{let i=iz(e,t),r=iZ();4===i&&r.emit({type:"videoViewed",event:iX.VIDEO_REACHED_DURATION,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},iJ=(e,t,n)=>{let i=iZ();i.getActivityEvents().some((e=>e.activity.name===iX.PROGRESS&&e.activity.data.seconds>=n))||i.emit({type:"videoViewed",event:iX.PROGRESS,data:{currentTime:e,duration:t,seconds:n}}),iq(e,t,n),iQ(e,t,n)};var i0=(e,t,n=y(),i=n8())=>{var r,a,o,s;let l=n.getMraidBridgeExt();if(!l)return;let c=Math.floor(1e3*Math.max(null!==(o=null===(r=t.data)||void 0===r?void 0:r.currentTime)&&void 0!==o?o:0,.1)),d=Math.floor(1e3*(null!==(s=null===(a=t.data)||void 0===a?void 0:a.duration)&&void 0!==s?s:0));switch(t.event){case iX.PROGRESS:l.notifyEventValuePairEvent("videoViewed",c);break;case iX.VIDEO_REACHED_DURATION:l.notifyEventValuePairEvent("videoViewed",d);break;case iX.VIDEO_LENGTH:l.notifyEventValuePairEvent("videoLength",d),i.emit(n5.VIDEO_LENGTH,!0)}};const i1=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],i2=(e,t)=>[n5.CHECKPOINT_0,n5.CHECKPOINT_25,n5.CHECKPOINT_50,n5.CHECKPOINT_75,n5.CHECKPOINT_100][Math.floor(e/t*4)],i3=(e,t=nu(),n=n8())=>{let i=i1[e],r=i1.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(i2(i.currentTime,5),!0,{currentTime:i.currentTime,duration:5}),iJ(i.currentTime,5,Math.round(i.currentTime)),e!==r&&i3(e+1)})).start()};var i5=(e,t)=>iA(e,"incentivized-event").pipe(iO((e=>e.event===t))),i4=e=>new iI((t=>{let n=()=>{var e;t.next(iS.FORFEIT_REWARD),null===(e=t.complete)||void 0===e||e.call(t)};i5(e,iS.FORFEIT_REWARD).subscribe({next:n,error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:iS.FORFEIT_REWARD})&&n()})),i6=e=>new iI((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:iS.GRANT_REWARD})&&(t.next(iS.FORFEIT_REWARD),null===(n=t.complete)||void 0===n||n.call(t))})),i8=(e,t,n)=>new iI((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null===(e=i.complete)||void 0===e||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),i7=(e,t,n=nm(),i=nu())=>new iI((r=>{let a=(e===ew.video?iY(n,iK.PLAY).pipe(iP(1),iV((e=>{var r;return iW(i8(1e3*ij(null===(r=e.data)||void 0===r?void 0:r.duration,t),i,iS.GRANT_REWARD),iy(n,iR.SCENE_END).pipe(iM((()=>iS.FORFEIT_REWARD))),i4(n),i6(n))}))):iy(n,iR.SCENE_START).pipe(iV((()=>iW(i8(1e3*ij(5,t),i,iS.GRANT_REWARD),iy(n,iR.SCENE_END).pipe(iM((()=>iS.FORFEIT_REWARD))),i4(n),i6(n)))))).subscribe({next:e=>{var t;e===iS.GRANT_REWARD&&n.emit({type:"incentivized-event",event:iS.GRANT_REWARD,fireOnlyOnce:!0}),null===(t=r.complete)||void 0===t||t.call(r)},error:e=>{var t;return null===(t=r.error)||void 0===t?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}}));(vg=_U||(_U={}))[vg.NOT_ENABLED=0]="NOT_ENABLED",vg[vg.CANCELLED=-1]="CANCELLED";var i9=e=>{let t=null,n=iy(e,iR.PRELOAD_START),i=iy(e,iR.PRELOAD_COMPLETE),r=iy(e,iR.PRELOAD_CANCELLED),a=iy(e,iR.SCENE_END);return new iI((e=>{let o=n.subscribe({next:()=>{t=Date.now()}}),s=i.subscribe({next:()=>{var n;null!==t&&(e.next(Date.now()-t),null===(n=e.complete)||void 0===n||n.call(e))}}),l=()=>{var n;e.next(null!=t?-1*(Date.now()-t):0),null===(n=e.complete)||void 0===n||n.call(e)},c=r.subscribe({next:l}),d=a.subscribe({next:l});return{unsubscribe:()=>{o.unsubscribe(),s.unsubscribe(),c.unsubscribe(),d.unsubscribe()}}}))};(vp=_B||(_B={})).NESTED_IFRAME_WITH_CORS="cors",vp.NESTED_IFRAME_WITHOUT_CORS="basic";var re=()=>eo();(_H||(_H={})).NESTED_IFRAME_TYPE="NESTED_IFRAME_TYPE";var rt=_H,rn=(e=$,t=re())=>{let n=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"iframe"===t.activity.eventType&&t.activity.name===rt.NESTED_IFRAME_TYPE&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).map((e=>{var t;return null===(t=e.activity.data)||void 0===t?void 0:t.nested_iframe_type}));return n.includes(_B.NESTED_IFRAME_WITH_CORS)?_B.NESTED_IFRAME_WITH_CORS:n.includes(_B.NESTED_IFRAME_WITHOUT_CORS)?_B.NESTED_IFRAME_WITHOUT_CORS:""},ri=(e,t,n=$)=>new iI((i=>{let r=iy(e,iR.SCENE_END).subscribe({next:()=>{var e;i.next(rn(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),rr=(e,t=!1,n=nm(),i=nu())=>{let r=im(n,is.PLAYABLE).pipe(iN()).pipe(iD(iy(n,iR.SCENE_END))),a=ib(iy(n,iR.LOAD_START),iy(n,iR.LOAD_COMPLETE),iy(n,iR.SCENE_END)),o=C(d({},iG(n,t)),{error_count:r,iframe_type:ri(n,n),load_duration:a,preload_duration:i9(n)});return e.enabled&&(o.grant_reward=i7(ew.endcard,e,n,i)),o},ra=(e,t)=>({ctaButtonUrl:e.get(L.CTA_BUTTON_URL),ctaButtonText:e.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(L.APP_NAME),appIcon:e.get(L.APP_ICON),appDescription:e.get(L.APP_DESCRIPTION),appRatingCount:e.get(L.APP_RATING_COUNT),appLongDescription:e.get(L.APP_LONG_DESCRIPTION),appContentRating:e.get(L.APP_CONTENT_RATING),appScreenShots:e.get(L.APP_SCREENSHOTS),appDownloadCount:e.get(L.APP_DOWNLOAD_COUNT),appRating:e.get(L.APP_RATING),appStoreRating:e.get(L.APP_STORE_RATING),appStoreId:e.get(L.APP_STORE_ID),appNameEncoded:e.get(L.APP_NAME_ENCODED),appDescriptionEncoded:e.get(L.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(L.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t}),ro=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},rs={},rl=function(e,t,n,i,r){var a=new Worker(rs[t]||(rs[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},rd=Uint8Array,rc=Uint16Array,ru=Int32Array,rE=new rd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rv=new rd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r_=new rd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rh=function(e,t){for(var n=new rc(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new ru(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},rS=rh(rE,2),rT=rS.b,rg=rS.r;rT[28]=258,rg[258]=28;for(var rp=rh(rv,0),rC=rp.b,rI=rp.r,rO=new rc(32768),rA=0;rA<32768;++rA){var rm=(43690&rA)>>1|(21845&rA)<<1;rm=(61680&(rm=(52428&rm)>>2|(13107&rm)<<2))>>4|(3855&rm)<<4,rO[rA]=((65280&rm)>>8|(255&rm)<<8)>>1}var rf=function(e,t,n){for(var i,r=e.length,a=0,o=new rc(t);a<r;++a)e[a]&&++o[e[a]-1];var s=new rc(t);for(a=1;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new rc(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],u=s[e[a]-1]++<<d,E=u|(1<<d)-1;u<=E;++u)i[rO[u]>>l]=c}else for(a=0,i=new rc(r);a<r;++a)e[a]&&(i[a]=rO[s[e[a]-1]++]>>15-e[a]);return i},rN=new rd(288);for(rA=0;rA<144;++rA)rN[rA]=8;for(rA=144;rA<256;++rA)rN[rA]=9;for(rA=256;rA<280;++rA)rN[rA]=7;for(rA=280;rA<288;++rA)rN[rA]=8;var rD=new rd(32);for(rA=0;rA<32;++rA)rD[rA]=5;var ry=rf(rN,9,0),rR=rf(rN,9,1),rL=rf(rD,5,0),rP=rf(rD,5,1),rb=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},rw=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},rV=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},rM=function(e){return(e+7)/8|0},rk=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new rd(e.subarray(t,n))},rU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rB=function(e,t,n){var i=Error(t||rU[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,rB),!n)throw i;return i},rH=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new rd(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new rd(3*r));var c=function(e){var t=n.length;if(e>t){var i=new rd(Math.max(2*t,e));i.set(n),n=i}},d=t.f||0,u=t.p||0,E=t.b||0,_=t.l,v=t.d,h=t.m,S=t.n,T=8*r;do{if(!_){d=rw(e,u,1);var g=rw(e,u+1,3);if(u+=3,!g){var p=e[(y=rM(u)+4)-4]|e[y-3]<<8,C=y+p;if(C>r){l&&rB(0);break}s&&c(E+p),n.set(e.subarray(y,C),E),t.b=E+=p,t.p=u=8*C,t.f=d;continue}if(1==g)_=rR,v=rP,h=9,S=5;else if(2==g){var I=rw(e,u,31)+257,A=rw(e,u+10,15)+4,O=I+rw(e,u+5,31)+1;u+=14;for(var m=new rd(O),f=new rd(19),N=0;N<A;++N)f[r_[N]]=rw(e,u+3*N,7);u+=3*A;var L=rb(f),R=(1<<L)-1,D=rf(f,L,1);for(N=0;N<O;){var y,P=D[rw(e,u,R)];if(u+=15&P,(y=P>>4)<16)m[N++]=y;else{var w=0,b=0;for(16==y?(b=3+rw(e,u,3),u+=2,w=m[N-1]):17==y?(b=3+rw(e,u,7),u+=3):18==y&&(b=11+rw(e,u,127),u+=7);b--;)m[N++]=w}}var V=m.subarray(0,I),M=m.subarray(I);h=rb(V),S=rb(M),_=rf(V,h,1),v=rf(M,S,1)}else rB(1);if(u>T){l&&rB(0);break}}s&&c(E+131072);for(var k=(1<<h)-1,U=(1<<S)-1,B=u;;B=u){var H=(w=_[rV(e,u)&k])>>4;if((u+=15&w)>T){l&&rB(0);break}if(w||rB(2),H<256)n[E++]=H;else{if(256==H){B=u,_=null;break}var G=H-254;if(H>264){var W=rE[N=H-257];G=rw(e,u,(1<<W)-1)+rT[N],u+=W}var x=v[rV(e,u)&U],F=x>>4;x||rB(3),u+=15&x;M=rC[F];if(F>3){W=rv[F];M+=rV(e,u)&(1<<W)-1,u+=W}if(u>T){l&&rB(0);break}s&&c(E+131072);var K=E+G;if(E<M){var Y=a-M,j=Math.min(M,K);for(Y+E<0&&rB(3);E<j;++E)n[E]=i[Y+E]}for(;E<K;++E)n[E]=n[E-M]}}t.l=_,t.p=B,t.b=E,t.f=d,_&&(d=1,t.m=h,t.d=v,t.n=S)}while(!d);return E!=n.length&&o?rk(n,0,E):n.subarray(0,E)},rW=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},rx=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},rF=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:r$,l:0};if(1==r){var o=new rd(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};d!=r-1;)s=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:s.f+l.f,l:s,r:l};var E=a[0].s;for(i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var _=new rc(E+1),v=rG(n[d-1],_,0);if(v>t){i=0;var h=0,S=v-t,T=1<<S;for(a.sort((function(e,t){return _[t.s]-_[e.s]||e.f-t.f}));i<r;++i){var g=a[i].s;if(!(_[g]>t))break;h+=T-(1<<v-_[g]),_[g]=t}for(h>>=S;h>0;){var p=a[i].s;_[p]<t?h-=1<<t-_[p]++-1:++i}for(;i>=0&&h;--i){var C=a[i].s;_[C]==t&&(--_[C],++h)}v=t}return{t:new rd(_),l:v}},rG=function(e,t,n){return-1==e.s?Math.max(rG(e.l,t,n+1),rG(e.r,t,n+1)):t[e.s]=n},rY=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new rc(++t),i=0,r=e[0],a=1,o=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(r),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(r);a=1,r=e[s]}return{c:n.subarray(0,i),n:t}},rK=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},rj=function(e,t,n){var i=n.length,r=rM(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return 8*(r+4+i)},rX=function(e,t,n,i,r,a,o,s,l,c,d){rW(t,d++,n),++r[256];for(var u,E,_,v,h=rF(r,15),S=h.t,T=h.l,g=rF(a,15),p=g.t,C=g.l,I=rY(S),A=I.c,O=I.n,m=rY(p),f=m.c,N=m.n,L=new rc(19),R=0;R<A.length;++R)++L[31&A[R]];for(R=0;R<f.length;++R)++L[31&f[R]];for(var D=rF(L,7),y=D.t,P=D.l,w=19;w>4&&!y[r_[w-1]];--w);var b=c+5<<3,V=rK(r,rN)+rK(a,rD)+o,M=rK(r,S)+rK(a,p)+o+14+3*w+rK(L,y)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&b<=V&&b<=M)return rj(t,d,e.subarray(l,l+c));if(rW(t,d,1+(M<V)),d+=2,M<V){u=rf(S,T,0),E=S,_=rf(p,C,0),v=p;var k=rf(y,P,0);rW(t,d,O-257),rW(t,d+5,N-1),rW(t,d+10,w-4),d+=14;for(R=0;R<w;++R)rW(t,d+3*R,y[r_[R]]);d+=3*w;for(var U=[A,f],B=0;B<2;++B){var H=U[B];for(R=0;R<H.length;++R){var G=31&H[R];rW(t,d,k[G]),d+=y[G],G>15&&(rW(t,d,H[R]>>5&127),d+=H[R]>>12)}}}else u=ry,E=rN,_=rL,v=rD;for(R=0;R<s;++R){var W=i[R];if(W>255){rx(t,d,u[(G=W>>18&31)+257]),d+=E[G+257],G>7&&(rW(t,d,W>>23&31),d+=rE[G]);var x=31&W;rx(t,d,_[x]),d+=v[x],x>3&&(rx(t,d,W>>5&8191),d+=rv[x])}else rx(t,d,u[W]),d+=E[W]}return rx(t,d,u[256]),d+E[256]},rz=new ru([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),r$=new rd(0),rZ=function(e,t,n,i,r,a){var o=a.z||e.length,s=new rd(i+o+5*(1+Math.ceil(o/7e3))+r),l=s.subarray(i,s.length-r),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var u=rz[t-1],E=u>>13,_=8191&u,v=(1<<n)-1,h=a.p||new rc(32768),S=a.h||new rc(v+1),T=Math.ceil(n/3),g=2*T,p=function(t){return(e[t]^e[t+1]<<T^e[t+2]<<g)&v},C=new ru(25e3),I=new rc(288),A=new rc(32),O=0,m=0,f=a.i||0,N=0,L=a.w||0,R=0;f+2<o;++f){var D=p(f),y=32767&f,P=S[D];if(h[y]=P,S[D]=y,L<=f){var w=o-f;if((O>7e3||N>24576)&&(w>423||!c)){d=rX(e,l,0,C,I,A,m,N,R,f-R,d),N=O=m=0,R=f;for(var b=0;b<286;++b)I[b]=0;for(b=0;b<30;++b)A[b]=0}var V=2,M=0,k=_,U=y-P&32767;if(w>2&&D==p(f-U))for(var B=Math.min(E,w)-1,H=Math.min(32767,f),G=Math.min(258,w);U<=H&&--k&&y!=P;){if(e[f+V]==e[f+V-U]){for(var W=0;W<G&&e[f+W]==e[f+W-U];++W);if(W>V){if(V=W,M=U,W>B)break;var x=Math.min(U,W-2),F=0;for(b=0;b<x;++b){var K=f-U+b&32767,Y=K-h[K]&32767;Y>F&&(F=Y,P=K)}}}P=h[y=P],U+=y-P&32767}if(M){C[N++]=268435456|rg[V]<<18|rI[M];var j=31&rg[V],X=31&rI[M];m+=rE[j]+rv[X],++I[257+j],++A[X],L=f+V,++O}else C[N++]=e[f],++I[e[f]]}}for(f=Math.max(f,L);f<o;++f)C[N++]=e[f],++I[e[f]];d=rX(e,l,c,C,I,A,m,N,R,f-R,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=S,a.p=h,a.i=f,a.w=L)}else{for(f=a.w||0;f<o+c;f+=65535){var $=f+65535;$>=o&&(l[d/8|0]=c,$=o),d=rj(l,d+1,e.subarray(f,$))}a.i=o}return rk(s,0,i+rM(d)+r)},rq=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new rd(a.length+e.length);o.set(a),o.set(e,a.length),e=o,r.w=a.length}return rZ(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},rQ=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},rJ=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<i.length;++o){var s=i[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var c=s.toString();if(s.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;t+=c.slice(d,c.indexOf("(",d))}else for(var u in t+=c,s.prototype)t+=";"+l+".prototype."+u+"="+s.prototype[u].toString();else t+=c}else n[l]=s}return t},r0=[],r1=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},r2=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&rB(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},r3=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},r5="undefined"!=typeof TextDecoder&&new TextDecoder;try{r5.decode(r$,{stream:!0})}catch(e){}var r4=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:rk(e,n-1)};t+=r?3==r?String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):String.fromCharCode(i)}};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var r6=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),r8=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e},r7=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},r9=class extends a{decompress(e){var t,n;let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);return function(e){if(r5)return r5.decode(e);var t=r4(e),n=t.s;return t.r.length&&rB(8),n}(((n=r2(r))+8>r.length&&rB(6,"invalid gzip data"),rH(r.subarray(n,-8),{i:2},new rd(r3(r)),t))).toString()}decode(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompress(e):V(e);let i=r7(n),r=r8(i);return r6(r)}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=j(),t=il()){super(),this.placementTypeService=e,this.errorLoggingService=t}},ae=()=>{let e=r.getInstance(),t=r9.getServiceIdentifier();return e.get(t)},at=class extends a{getBaseUrl(e){try{return new URL(e).origin}catch(e){return""}}getEndcardContentWithSrcRemoved(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),t.documentElement.innerHTML}isValidDimension(e,t){let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0}getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!this.isValidDimension(n,"width")||!this.isValidDimension(n,"height"))return;return{src:i,baseUrl:this.getBaseUrl(i)}}catch(e){return}}async initializeIframeContentData(e,t){let n={content:e};if(t){let{src:i}=t;n.nestedFrameContent=d({},t);try{let t=await window.fetch(i);if(!t.ok)throw Error("failed to fetch nested iframe content");n.nestedFrameContent.content=await t.text(),n.content=this.getEndcardContentWithSrcRemoved(e)}catch(e){}}return n}static getServiceIdentifier(){return"IframeServiceInterface"}},an=()=>{let e=r.getInstance(),t=at.getServiceIdentifier();return e.get(t)};const ai=[L.EC_IMAGE,L.EC_IMAGE_2,L.EC_HTML,L.ADM_HTML,L.EC_HTML_2];(vC=_W||(_W={})).BASE64_ENCODED="base64-encoded",vC.GZIP="gzip",vC.NONE="none";class ar extends nQ{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nH.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:rr(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(){let e=this.iframeService.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!e,this.iframeContentData=this.iframeService.initializeIframeContentData(this.endcardContent,e)}async getIframeContentData(){var e;return null!==(e=this.iframeContentData)&&void 0!==e?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return C(d({},super.getObservabilityData()),{has_nested_iframe:this.getHasNestedIframe()})}static getInstances(e=R(),t=j(),n=K(),i=il(),r=ae(),a=an()){let o=[L.EC_HTML,L.ADM_HTML,L.EC_HTML_2],s=[],l={[L.EC_HTML]:"endcard",[L.ADM_HTML]:"endcard",[L.EC_HTML_2]:"secondEndcard"},c=q(e.get(L.EC_HTML_PRELOAD));return o.filter((t=>e.has(t))).forEach(((o,d)=>{var u;let E=o===L.ADM_HTML,_=`${l[o]}_${d}`,v=new iE(iu(_,e,t),i);s.push(new ar({id:_,endcardContent:r.decode(null!==(u=e.get(o))&&void 0!==u?u:"",q(e.get(L.EC_HTML_COMPRESS))),index:d,isAlternative:!1,compressionType:q(e.get(L.EC_HTML_COMPRESS))?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new ir(d,this.isEndcardOnly(e),ie(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new ia(d,ie(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:v.getLastChanceEndcardConfig(),omsdkEnabled:E,closeButtonConfig:new iv({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===d}).getCloseButtonConfig(),trackingEventMapConfig:new i_(!1).getTrackingEventMapConfig(),callToActionConfig:new ih({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:ra(e,i)}).getCallToActionConfig(),muted:iC(e,t),eligibleToPreload:c,placementTypeService:t,shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new ro({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),s}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:o,lastChanceEndcardConfig:s,omsdkEnabled:l,closeButtonConfig:c,trackingEventMapConfig:d,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:_,placementTypeService:v=j(),shouldSplitVideoEndcardClick:h=!1,eventStreams:S,incentivizedConfig:T,iframeService:g=an()}){super({isFullscreen:v.isFullscreen()}),this.sceneType=ew.endcard,this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=o,this.lastChanceEndcardConfig=s,this.omsdkEnabled=l,this.trackingEventMapConfig=d,this.closeButtonConfig=c,this.callToActionConfig=_,this.placementTypeService=v,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=h,this.eventStreams=S,this.incentivizedConfig=T,this.iframeService=g,l?this.addEntryAction({name:ig.INIT_OMSDK_HTML_DISPLAY_SERVICE}):this.addExitAction({name:ig.ON_ENDCARD_CLOSE}),this.addTransition(nj),this.addTransition(nX),this.addTransition(nz),this.addTransition(n$),this.addOrUpdateTransition({name:_c.CLOSE,actions:[],scene:new ip}),this.addExitAction({name:ig.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:_c.CLOSE_BUTTON_WILL_SHOW,actions:[{name:ig.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:_c.CREATIVE_VIEW,actions:[{name:ig.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:ig.ON_SHOW})}}ar.isEndcardOnly=(e=R())=>{let t=!e.has(L.MAIN_VIDEO)&&!e.has(L.MAIN_STREAM),n=1===ai.filter((t=>e.has(t))).length;return t&&n};var aa=ar,ao=class{getDelay(){return q(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||q(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return q(this.videoCloseButtonAsSkipTokenValue)?nH.SKIP:nH.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},as=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!ii(this.videoProgressBarTokenValue),color:null!==(t=null!==(e=this.videoProgressBarColorTokenValue)&&void 0!==e?e:this.ctaButtonBackgroundTokenValue)&&void 0!==t?t:ea}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const al=(e=R(),t=j(),n=il())=>{let i=ra(e,n);return{appStoreId:ie(e),skCtaOnlyTokenValue:e.get(L.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(L.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var ad=class extends ic{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?eV.SKPV:n2(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!q(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=j()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},ac=class{getStreamManifest(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:V(this.mainManifestTokenValue),track_0:V(null!==(e=this.track0TokenValue)&&void 0!==e?e:""),chunks:this.chunkSeriesValues}}constructor(e,t,n){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n}},au=function(e){if(null===e||"object"!=typeof e||"function"!=typeof e.getStreamManifest)return!1;let t=e.getStreamManifest();return void 0===t||!(null===t||"object"!=typeof t||void 0!==t.manifest&&"string"!=typeof t.manifest||void 0!==t.track_0&&"string"!=typeof t.track_0||!(void 0===t.chunks||Array.isArray(t.chunks)&&t.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e))))))};const aE=e=>{if("object"==typeof e)return Object.values(e).some((e=>aE(e)));let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")};var av=e=>`file://${window.location.pathname.replace("index.html","")}${e}`,a_=class{getCachedFirstTrack(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!au(n)||!this.hasCachedFirstTrack())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0;return void 0===i?"":i}getCachedManifest(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!au(n)||!this.hasCachedManifest())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest;return void 0===i?"":i}getCachedVideoSegmentUrls(){var e,t,n,i;let r=null===(e=z.getValue())||void 0===e?void 0:e.scene;return au(r)&&null!==(i=null===(n=r.getStreamManifest())||void 0===n||null===(t=n.chunks)||void 0===t?void 0:t.map((e=>{if(aE(e))if("string"==typeof e){if(!e.toLowerCase().startsWith("file://"))return av(e)}else if("object"==typeof e)return Object.entries(e).reduce(((e,[t,n])=>(e[t]=n.toLowerCase().startsWith("file://")?n:av(n),e)),{});return e})))&&void 0!==i?i:[]}hasCachedFirstTrack(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;return!!au(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0)}hasCachedManifest(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;return!!au(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest)}hasCachedStreamChunks(){var e,t,n;let i=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!au(i))return!1;let r=null!==(n=null===(t=i.getStreamManifest())||void 0===t?void 0:t.chunks)&&void 0!==n?n:[];return 0!==r.length&&aE(r[0])}getChunkFormat(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!au(n)||!this.hasCachedStreamChunks())return"";let i=(null===(t=n.getStreamManifest())||void 0===t?void 0:t.chunks)[0].split(".");return i.length<2?"":i[i.length-1]}},ah=(e,t)=>{let n=iY(e,iK.HLS_LEVEL_PLAYLIST_LOADED),i=iy(t,iR.SCENE_END);return new iI((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null===(n=t.data)||void 0===n?void 0:n.startingSequenceNumber),null===(i=e.complete)||void 0===i||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null===(t=e.complete)||void 0===t||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))},aS=(e=$,t=i$())=>{var n,i,r;return null!==(r=null===(i=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"video"===t.activity.eventType&&t.activity.name===iK.BANDWIDTH_ESTIMATION&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).pop())||void 0===i||null===(n=i.activity.data)||void 0===n?void 0:n.bwe)&&void 0!==r?r:-1},aT=(e,t,n=$)=>new iI((i=>{let r=iy(e,iR.SCENE_END).subscribe({next:()=>{var e;i.next(aS(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),ag=(e,t=!1,n=nm(),i=nu())=>{let r=im(n,is.RESOURCE,_L.VIDEO).pipe(iN()).pipe(iD(iy(n,iR.SCENE_END))),a=ib(iy(n,iR.LOAD_START),iy(n,iR.LOAD_COMPLETE),iy(n,iR.SCENE_END)),o=ib(iy(n,iR.CTA_BUTTON_SHOW),iy(n,iR.CTA_BUTTON_CLICK),iy(n,iR.SCENE_END)),s=C(d({},iG(n,t)),{average_bandwidth:aT(n,n),cta_duration:o,error_count:r,hls_staring_sequence_number:ah(n,n),load_duration:a,preload_duration:i9(n)});return e.enabled&&(s.grant_reward=i7(ew.video,e,n,i)),s};(vI=_x||(_x={})).PROGRESSIVE="mp4",vI.HLS="hls";class ap extends nQ{getTransitions(){let e=super.getTransitions();return e.push(nJ,n0,n1,nj,nX,nz,n$),e}getId(){return this.id}getSceneType(){return ew.video}getVideoPlayer(){return"mp4"===this.videoType?"progressive":window.Hls.isSupported()?"custom":"native"}getVideoUrl(){return"mp4"===this.videoType&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i;let r=new a_;return{cached:r.getCachedVideoSegmentUrls().length,format:r.getChunkFormat(),manifest:r.hasCachedManifest(),local:this.url.toLowerCase().startsWith("file://")?1:0,player:this.getVideoPlayer(),segments:null!==(n=null===(t=this.getStreamManifest())||void 0===t||null===(e=t.chunks)||void 0===e?void 0:e.length)&&void 0!==n?n:0,track:r.hasCachedFirstTrack(),url:null!==(i=this.getVideoUrl())&&void 0!==i?i:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nH.CLOSE:this.closeButtonConfig.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getStreamManifest(){return this.streamManifest}getEventStreams(){return this.eventStreams?this.eventStreams:ag(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}static isLoopingVideo(e,t=!1){return t||q(e)}static getInstances(e=R(),t=j(),n=K(),i=al(),r=il()){let a=[L.MAIN_VIDEO,L.MAIN_STREAM],o=[],s=e.get(L.ORIGINAL_VIDEO_URL),l=ap.isLoopingVideo(e.get(L.VIDEO_LOOPING),ap.isVideoOnly(e));return a.filter((t=>e.has(t))).forEach(((a,c)=>{var d;let u=a===L.MAIN_STREAM?"hls":"mp4",E=`video_${c}`,_=new iE(iu(E,e,t),r);o.push(new ap({id:E,url:null!==(d=e.get(a))&&void 0!==d?d:"",index:c,isAlternative:!1,videoType:u,streamManifest:new ac(e.get(L.MAIN_MANIFEST),e.get(L.TRACK_0),e.getSeriesValues("STREAM_CHUNK_")).getStreamManifest(),progressBarConfig:new as({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new n3({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),id:E,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new n9(ie(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new it(e.get(L.APP_STORE_ON_VIDEO_AUTO_DELAY),ie(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:new ad(i).getCallToActionConfig(),lastChanceEndcardConfig:_.getLastChanceEndcardConfig(),trackingEventMapConfig:new i_(!1).getTrackingEventMapConfig(),closeButtonConfig:new ao({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),originalVideoUrl:s,loopVideo:l,isFullscreen:t.isFullscreen(),muted:iC(e,t),shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new ro({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),o}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:s,appStoreOnDelayConfig:l,callToActionConfig:c,lastChanceEndcardConfig:d,progressBarConfig:u,closeButtonConfig:E,originalVideoUrl:_,trackingEventMapConfig:v,loopVideo:h=!1,muted:S=!1,isFullscreen:T,shouldSplitVideoEndcardClick:g=!1,eventStreams:p,incentivizedConfig:C}){super({isFullscreen:T}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.progressBarConfig=u,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=s,this.appStoreOnDelayConfig=l,this.callToActionConfig=c,this.lastChanceEndcardConfig=d,this.closeButtonConfig=E,this.originalVideoUrl=_,this.loopVideo=h,this.muted=S,this.trackingEventMapConfig=v,this.shouldSplitVideoEndcardClick=g,this.eventStreams=p,this.incentivizedConfig=C,this.addTransition({name:_c.NEXT,actions:[{name:ns.CLOSE_VIDEO}]})}}ap.isVideoOnly=(e=R())=>{let t=!e.some(...ai),n=1===[L.MAIN_VIDEO,L.MAIN_STREAM].filter((t=>e.has(t))).length;return t&&n};var aC=function(e){return e instanceof ap&&Object.values(_x).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},aI=e=>e instanceof aa&&e.getSceneType()===ew.endcard,aO=class extends a{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e,t=no(e)){return(null==t?void 0:t.state.value)===_s.PRELOADING}getHTMLScenesToPreload(e){let t=[];if(aC(e)){aI(e.next)&&e.next.eligibleToPreload&&t.push({scene:e.next,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1});let n=e.getTransitions().find((e=>e.name===_c.COMPLETE));aI(null==n?void 0:n.scene)&&n.scene!==e.next&&n.scene.eligibleToPreload&&t.push({scene:n.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1})}else if(aI(e)&&e.eligibleToPreload){let n=no(e.getId());(null==n?void 0:n.state.context.preloadSuccess)&&(t.push({scene:e,isCloseButtonVisible:!0,isPrivacyButtonVisible:!0,shouldRenderIFrame:!0,startPreloading:!1}),e.getTransitions().forEach((e=>{e.scene&&aI(e.scene)&&e.scene.eligibleToPreload&&t.push({scene:e.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!0})})))}return t.length>0?t:void 0}startPreloading(e,t=no(e)){null==t||t.send(_o.PRELOAD)}cancelPreloading(e,t=no(e)){null==t||t.send(_o.CANCEL_PRELOAD)}};(vO=_F||(_F={})).SCRIPT_ERROR="Unexpected script error",vO.UNHANDLED_REJECTION="Unhandled rejection error",vO.TOKEN_ERROR="syntaxerror: unexpected token ':'",(vA=_G||(_G={}))[vA.InvalidImageError=1e4]="InvalidImageError",vA[vA.InvalidVideoError=10001]="InvalidVideoError",vA[vA.Error=30006]="Error";var aA=class extends a{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null===(t=e.error)||void 0===t?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.isFatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null===(t=this.currentScene())||void 0===t?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,o=null!==(i=null===(n=e.data)||void 0===n||null===(t=n.content)||void 0===t?void 0:t.message)&&void 0!==i?i:"";a&&!this.isIgnoredError(o)&&(e.data.content.error_source=eP.PLAYABLE,this.send({type:"error-logging",event:is.PLAYABLE,data:{error:e.data.content,sceneId:null===(r=$())||void 0===r?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:is.UNHANDLEDREJECTION,data:{error:{message:null!==(n=null===(t=e.reason)||void 0===t?void 0:t.toString())&&void 0!==n?n:"Unhandled rejection error",error_source:eP.TEMPLATE}}})}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:is.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:eP.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n)}getErrorCode(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.resourceType;return n===_L.IMAGE?1e4:n===_L.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:is.RESOURCE,data:{resourceType:_L.IMAGE,error:{resource_url:t,error_source:eP.RESOURCE,message:U}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),o=null!==(r=null===(t=e.data.error)||void 0===t?void 0:t.message)&&void 0!==r?r:"Unknown error";null===(i=this.mraidService.getMraidBridgeExt())||void 0===i||null===(n=i.notifyError)||void 0===n||n.call(i,a,o,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=y(),t=il(),n=$){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.currentScene=n}},am={};function af(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(am=af).default=af;class aN extends Error{}var aD=(e,t=1e4,n=new aN("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var o;let s=e();((o=am)&&o.__esModule?o.default:o)(s)?s.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):s?i(s):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)}));const ay=e=>Object.values(iR).includes(e);var aR=class extends es{emit(e){let t;if("string"==typeof e&&ay(e)){let n=this.injectedGetCurrentScene();if(!n)return;t={type:"scene-event",event:e,data:{scene_id:n.getId(),scene_type:n.getSceneType()}}}else"object"==typeof e&&(t=e);t&&this.wrappedService.emit(t)}constructor(e,t=$){super(e),this.injectedGetCurrentScene=t}},aL=(e=$)=>new aR(eo(),e);class aP extends a{addEventStreams(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:iR.SCENE_END,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:iR.SCENE_START,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{aD((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),aP.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=aL()){super(),this.reportingService=e,this.sceneEventStreams={}}}aP.MAX_WAIT_TIME=2e3;class ab{static async hasSufficientSpace(){var e;if(!(null===(e=window.navigator.storage)||void 0===e?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&ab.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Unknown error from IndexedDB")}static async open(e){if(await ab.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,o=window.indexedDB.open(i,a);o.onupgradeneeded=e=>ab.handleUpgrade(e,r),o.onsuccess=e=>t(e.target.result),o.onerror=e=>n(ab.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(ab.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(ab.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(ab.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(ab.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(ab.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(ab.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(ab.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(ab.convertToError(t.error))}))}),void 0)}constructor(e,t,n=il()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var aw=()=>({dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}}),aV=class extends a{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}static getServiceIdentifier(){return"UrlCacheServiceInterface"}},aM=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e=il(),t=aw()){this.indexedDatabaseService=ab.open(t).then((n=>n?new ab(n,t,e):new aV)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},ak=class extends a{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e=il()){super(),this.indexedDatabaseService=new aM(e).getIndexedDatabaseService()}};(vm=_Y||(_Y={})).LANDSCAPE="landscape",vm.PORTRAIT="portrait",vm.UNKNOWN="unknown",(vf=_K||(_K={})).LOAD_FAIL="LOAD_FAIL",vf.PLAY="PLAY",vf.PLAYING="PLAYING",vf.CAN_PLAY="CAN_PLAY",vf.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vf.PAUSE="PAUSE",vf.END="END",vf.TIME_UPDATE="TIME_UPDATE",vf.CLOSE="CLOSE",vf.DURATION_CHANGE="DURATION_CHANGE",vf.WAITING="WAITING",vf.SUSPEND="SUSPEND",vf.RETRY="RETRY",vf.MAXIMIZE="MAXIMIZE",vf.MINIMIZE="MINIMIZE",vf.RESET_CLOSE="RESET_CLOSE",(vN=_j||(_j={})).LOADING="LOADING",vN.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",vN.PLAYING="PLAYING",vN.PAUSED="PAUSED",vN.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vN.ENDED="ENDED",vN.FINAL="FINAL",(vD=_X||(_X={})).UPDATE_PROGRESS="updateProgress",vD.EMIT_PROGRESS="emitProgress",vD.EMIT_LOAD="emitLoad",vD.EMIT_PLAY="emitPlay",vD.EMIT_PLAYING="emitPlaying",vD.EMIT_PAUSE="emitPause",vD.EMIT_CLOSE="emitClose",vD.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",vD.INCREMENT_LOOP_COUNT="incrementLoopCount",vD.REPORT_VIDEO_START="reportVideoStart",vD.SET_CAN_PLAY="setCanPlay",vD.EMIT_DURATION_CHANGE="emitDurationChange",vD.EMIT_TIME_UPDATE="emitTimeUpdate",vD.EMIT_WAITING="emitWaiting",vD.EMIT_SUSPEND="emitSuspend",vD.UPDATE_CURRENT_TIME="updateCurrentTime",vD.RESET_CURRENT_TIME="resetCurrentTime",vD.RESET_CONTEXT="resetContext",vD.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",vD.EMIT_SCENE_EVENT="emitTrackingEvent",(_z||(_z={})).FSC="FSC";var aU=_z;const aB=()=>eo(),aH=()=>eo();var aW=class extends a{setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:C(d({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!==(e=this.videoScene.getFullScreenClickConfig().target)&&void 0!==e?e:eV.SKPV}),trackingEventMapConfig:C(d({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){this.fullScreenCallToActionReportingService.emit({type:"fsc",event:aU.FSC})}videoAdViewableChange(e,t,n=!1){this.videoScene&&this.videoInterpreter&&(t.event!==nk.MAXIMIZED||n?t.event===nk.MINIMIZED&&this.videoInterpreter.send({type:_K.MINIMIZE}):this.videoInterpreter.send({type:_K.MAXIMIZE,hasHlsVideo:this.videoScene.videoType===_x.HLS}))}isPortrait(){return this.environmentService.getOrientation()===ey.PORTRAIT}closeVideo(){var e;null===(e=this.videoInterpreter)||void 0===e||e.send({type:_K.CLOSE}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=K(),t=aH()){super(),this.environmentService=e,this.fullScreenCallToActionReportingService=t,this.videoElement=null}},ax=(e=y(),t=K())=>{var n;let i=e.getMraid();t.getOperatingSystem()===eD.Windows&&(null==i||null===(n=i.useCustomClose)||void 0===n||n.call(i,!0))},aF=0;function aG(e,t,n,i,r,a){t||(t={});var o,s,l=t;if("ref"in l)for(s in l={},t)"ref"==s?o=t[s]:l[s]=t[s];var c={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--aF,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===l[s]&&(l[s]=o[s]);return eU.vnode&&eU.vnode(c),c}const aY={V4_9_0:new w("4.9.0"),V4_9_3:new w("4.9.3"),V5_0_0:new w("5.0.0"),V5_0_1:new w("5.0.1"),V5_1_2:new w("5.1.2"),V5_2_1:new w("5.2.1")};(vy=_$||(_$={})).SILENT="silent",vy.UN_SILENT="un-silent";var aK=_$,aj=(e=y())=>{var t,n,i;return null!==(i=null===(n=e.getMraidExt())||void 0===n||null===(t=n.isSilent)||void 0===t?void 0:t.call(n))&&void 0!==i&&i},aX=(e=en())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();(i===ew.video||i===ew.endcard)&&t.push(e),i===ew.composite&&n(e.getScenes())}))};return n(e),t.some((e=>e.muted))},az=()=>eo();const a$=(e=eo())=>e.getActivityEvents().some((e=>"silent"===e.activity.eventType&&(e.activity.name===aK.SILENT||e.activity.name===aK.UN_SILENT))),aZ=(e,t,n)=>{t||n||e.emit({type:"silent",event:aK.UN_SILENT})},aq=(e,t)=>{e.emit({type:"silent",event:t?aK.SILENT:aK.UN_SILENT})};var aQ=(e,t=y(),n=az(),i=K(),r=aX())=>{let a=aj(t);var o;i.getOperatingSystem()===eD.iOS?(null===(o=t.getMraid())||void 0===o||o.removeEventListener("silentChange",e),aZ(n,r,a)):aq(n,a)},aJ=()=>{let e=r.getInstance(),t=eq.getServiceIdentifier();return e.get(t)},a0=()=>eo(),a1=(e=a0(),t=aJ())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?nk.MAXIMIZED:nk.MINIMIZED})},a2=()=>{let e=r.getInstance(),t=aO.getServiceIdentifier();return e.get(t)};(vR=_Z||(_Z={})).INFO="info",vR.READY="ready",vR.ERROR="error",vR.STATE_CHANGE="stateChange",vR.ORIENTATION_CHANGE="orientationChange",vR.VIEWABLE_CHANGE="viewableChange",vR.SIZE_CHANGE="sizeChange",vR.SILENT_CHANGE="silentChange",(_q||(_q={})).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow";var a3=class extends a{getEventCallbacks(e,t){return this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=this.callbacks[e][t]||[],[...this.callbacks[e][t]]}updateEventCallbacks(e,t,n){this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=n}addEventListener(e,t,n){if(!this.allowedMraidEvents.includes(t))return;let i=this.getEventCallbacks(e,t);this.updateEventCallbacks(e,t,[...i,n])}removeEventListener(e,t,n){if(this.allowedMraidEvents.includes(t))if(n){let i=this.getEventCallbacks(e,t).filter((e=>e!==n));this.updateEventCallbacks(e,t,i)}else this.updateEventCallbacks(e,t,[])}flushAllEventCallbacks(e){this.callbacks[e]&&Object.keys(this.callbacks[e]).forEach((t=>{this.updateEventCallbacks(e,t,[])}))}init(){this.mraidEvents.forEach((e=>{let t=(...n)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(t),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage();let i=$();i&&this.getEventCallbacks(i.getId(),e).forEach((e=>{e(...n)}))};this.mraidService.getMraid().addEventListener(e,t)}))}triggerEvent(e,t,...n){"viewableChange"===t&&this.injectedPreloadService.isHTMLPreloading(e)||this.getEventCallbacks(e,t).forEach((e=>{e(...n)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=y(),n=aQ,i=a1,r=a2()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(_q)],this.callbacks={}}},a5=()=>{let e=r.getInstance(),t=a3.getServiceIdentifier();return e.get(t)};const a4=(e=R())=>e.has(L.ERID_ADVERTISER_INFO,L.ERID_ADVERTISER_LINK,L.ERID_RECOMMEND_RULE,L.CTA_BUTTON_URL);var a6=(e=R())=>({erid_advertiser_info:e.get(L.ERID_ADVERTISER_INFO),erid_advertiser_link:e.get(L.ERID_ADVERTISER_LINK),erid_recommend_rule:e.get(L.ERID_RECOMMEND_RULE)});const a8=e=>e?`?${e.toString()}`:"",a7=(e=R())=>{if(a4(e)){let t=new URLSearchParams;return t.set("adSource",V(e.get(L.ERID_ADVERTISER_INFO))),t.set("adUrl",V(e.get(L.ERID_ADVERTISER_LINK))),t.set("adRulesUrl",V(e.get(L.ERID_RECOMMEND_RULE))),t.set("adCtaUrl",e.get(L.CTA_BUTTON_URL)),`https://cdn-lb.vungle.com/privacy-policy-and-ad-info-erid/index.html${a8(t)}`}return e.get(L.VUNGLE_PRIVACY_URL)};var a9=()=>({[nv.SET_PRIVACY_BUTTON_VISIBLE]:g({isPrivacyButtonVisible:!0}),[nv.SET_PRIVACY_BUTTON_HIDDEN]:g({isPrivacyButtonVisible:!1}),[nv.OPEN_PRIVACY_URL]:()=>{var e,t;let n=K(),i=R(),r=e$(),a=n.getOperatingSystem(),o=a===eD.Android||a===eD.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(aY.V5_0_0);r.emit(d({name:eL.PRIVACY_CTA},a6(i))),o&&!a4()?null===(e=y().getMraidBridgeExt())||void 0===e||e.openPrivacy(a7(i)):null===(t=y().getMraid())||void 0===t||t.open(a7(i))},[nv.SET_PRIVACY_DRAWER_OPEN]:g({isPrivacyDrawerOpen:!0}),[nv.SET_PRIVACY_DRAWER_CLOSED]:g({isPrivacyDrawerOpen:!1}),[nv.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=a5(),n=aJ();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable();let i=$();i&&t.triggerEvent(i.getId(),_Z.VIEWABLE_CHANGE,n.isViewable())}}),oe=()=>{var e;let t=null===(e=z.getValue())||void 0===e?void 0:e.scene;if((null==t?void 0:t.getSceneType())===ew.video)return t;if((null==t?void 0:t.getSceneType())===ew.composite){let e=t.getScenes().find((e=>e.getSceneType()===ew.video));if(e)return e}},ot=(e,t=oe)=>{var n;let i=null===(n=t())||void 0===n?void 0:n.getId();if(i)return(null!=e?e:na()).interpreterMap.get(i)},on=(e=$())=>({scene_id:e.getId(),scene_type:e.getSceneType()});const oi=e=>{let t=eo().getActivityEvents().filter((t=>{var n,i;return t.activity.type===eR.EVENT&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===eL.NESTED_IFRAME_TYPE&&(null===(i=t.activity.data)||void 0===i?void 0:i.scene_id)===e})).map((e=>{var t;return null===(t=e.activity.data)||void 0===t?void 0:t.nested_iframe_type}));return t.includes(_B.NESTED_IFRAME_WITH_CORS)?_B.NESTED_IFRAME_WITH_CORS:t.includes(_B.NESTED_IFRAME_WITHOUT_CORS)?_B.NESTED_IFRAME_WITHOUT_CORS:""},or=e=>eo().getActivityEvents().filter((t=>{var n,i;return t.activity.type===eR.EVENT&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===eL.CLICK_OCCURRED&&(null===(i=t.activity.data)||void 0===i?void 0:i.scene_id)===e})).length,oa=e=>eo().getActivityEvents().filter((t=>{var n;return t.activity.type===eR.EVENT&&"error-logging"===t.activity.eventType&&t.activity.name===is.PLAYABLE&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===e})).length,oo=(e="video_0")=>{var t,n;return null===(n=eo().getActivityEvents().filter((t=>{var n,i;return t.activity.type===eR.EVENT&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===eL.BANDWIDTH_ESTIMATION&&(null===(i=t.activity.data)||void 0===i?void 0:i.scene_id)===e})).pop())||void 0===n||null===(t=n.activity.data)||void 0===t?void 0:t.bwe},os=(e,t,n)=>{n.emitLegacy({name:eL.VIDEO_SCENE_END,scene_id:e,scene_type:t,video_click_count:or(e),bwe:oo(e)},1,["name","scene_id"])},ol=(e,t,n)=>{n.emitLegacy({name:eL.ENDCARD_SCENE_END,scene_id:e,scene_type:t,iframe:oi(e),endcard_click_count:or(e),endcard_error_count:oa(e)},1,["name","scene_id"])};var od=(e,t,n=e$())=>{t===ew.video&&os(e,t,n),t===ew.endcard&&ol(e,t,n)},oc=(e,t,n=od,i=e$)=>{let r=i(),a=new Map([[ew.video,eL.VIDEO_CLOSE_BUTTON_CLICK],[ew.endcard,eL.ENDCARD_CLOSE_BUTTON_CLICK]]);a.has(t)&&r.emitLegacy({name:a.get(t),scene_id:e},1,["name","scene_id"]),n(e,t)},ou=()=>{let e=r.getInstance(),t=nr.getServiceIdentifier();return e.get(t)},oE=()=>{let e=r.getInstance(),t=aW.getServiceIdentifier();return e.get(t)},ov=()=>{let e=r.getInstance(),t=aA.getServiceIdentifier();return e.get(t)},o_=(e=ot,t=oE())=>({[ns.MUTE_SOUND]:()=>{ou().mute()},[ns.UN_MUTE_SOUND]:()=>{ou().unmute()},[ns.EMIT_MUTED]:()=>{let e=i$(),t=ou();e.emit({type:"video",event:t.isMuted()?iK.MUTE:iK.UNMUTE})},[ns.EMIT_VIDEO_ERROR]:(e,t)=>{i$().emit({type:"video",event:iK.ERROR,data:t})},[ns.CLOSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.CLOSE});let n=on();n&&oc(n.scene_id,n.scene_type)},[ns.CLOSE_VIDEO_CURRENT_SCENE]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.CLOSE});let n=on();n&&oc(n.scene_id,n.scene_type)},[ns.PAUSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.PAUSE})},[ns.PLAY_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.PLAY})},[ns.POSTROLL_VIEW]:()=>{n8().emit(n5.POSTROLL_VIEW,!0)},[ns.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{e$().emit(eL.VIDEO_SKIP_TO_ENDCARD)},[ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT]:()=>{var n;let i=$(),r=null===(n=e())||void 0===n?void 0:n.state.context.videoElement;t.setVideoContext(i,r,e())},[ns.SHOW_PICTURE_IN_PICTURE]:g({shouldRenderPictureInPicture:()=>!0}),[ns.CLOSE_PICTURE_IN_PICTURE]:g({shouldRenderPictureInPicture:()=>!1}),[ns.SEND_FATAL_VIDEO_ERROR]:()=>{let e=ov(),t={type:"error-logging",event:is.RESOURCE,data:{resourceType:_L.VIDEO,isFatal:!0,error:Error(H)}};e.send(t)}}),oh=(e=aL())=>({[_D.EMIT_CLOSE_BUTTON_SHOW]:()=>{e.emit(iR.CLOSE_BUTTON_SHOW)},[_D.EMIT_CLOSE_BUTTON_CLICK]:()=>{e.emit(iR.CLOSE_BUTTON_CLICK)},[_D.SET_CLOSE_BUTTON_VISIBLE]:g({isCloseButtonVisible:!0}),[_D.SET_CLOSE_BUTTON_HIDDEN]:g({isCloseButtonVisible:!1})}),oS=()=>"true"===R().get(L.OM_ENABLED);(_Q||(_Q={})).REMOVE_HANDLER="REMOVE_HANDLER";var oT=()=>{try{return window.OmidSessionClient.default}catch(e){return}},og=class{init(e,t){var n,i;if(this.sessionClient=oT(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:o,VerificationScriptResource:s,AdEvents:l,MediaEvents:c}=this.sessionClient;if(t){let e=new s(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let d=K().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,d||this.vungleData.partnerVersion),this.context=new o(this.partner,this.verificationScriptResources),void 0!==e&&(null===(n=this.context)||void 0===n||n.setVideoElement(e)),this.adSession=new r(this.context),(null===(i=this.adSession)||void 0===i?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new c(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}};(vL=_J||(_J={})).HTML_DISPLAY="htmlDisplay",vL.VIDEO="video";var op=_J;(_0||(_0={})).LOADED="loaded";var oC=_0;(vP=_1||(_1={})).SESSION_START="sessionStart",vP.SESSION_ERROR="sessionError",vP.SESSION_FINISH="sessionFinish";var oI=_1,oO=class extends og{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null===(e=this.adSession)||void 0===e||e.setCreativeType(op.HTML_DISPLAY),null===(t=this.adSession)||void 0===t||t.setImpressionType(oC.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){eo().emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,null===(t=this.adEvents)||void 0===t||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===oI.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();e.type===oI.SESSION_FINISH&&eo().emit({type:"cta",event:_Q.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},oA=()=>{if(oS()){let e=oO.getServiceIdentifier(),t=new oO;r.getInstance().bind(e,t)}},om=e=>{e.length>0&&((new Image).src=e)},of=()=>eo();const oN=(e,t)=>`${e}_${t}`,oD=e=>{let t=e.split("_");return t[t.length-1]},oy=(e,t)=>{var n,i;if(!(null===(n=t.data)||void 0===n?void 0:n.trackingEventMapConfig.enabled))return;let r=oD(t.event),a=null===(i=t.data)||void 0===i?void 0:i.trackingEventMapConfig.events;if(!(null==a?void 0:a[r]))return;let o=a[r];null==o||o.forEach((e=>{om(e)}))};var oR=(e=!0,t=of())=>{tm((()=>e?(t.addEventHandler("tracking-event",oy),()=>{t.removeEventHandler("tracking-event",oy)}):()=>{}),[t,e])},oL=(e,t,n,i=!1,r=of())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let o=oN(t,e);r.emit({type:"tracking-event",event:o,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},oP=(e,t=en())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},ob=(e=$,t=no,n=n8,i=oc,r=oL)=>({[ig.ON_CREATIVE_VIEW]:()=>{let t=e();t&&[ew.endcard,ew.image].includes(t.getSceneType())&&r(eM.CREATIVE_VIEW,t.getId(),t.getTrackingEventMapConfig(),!0)},[ig.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{let e=$();e&&a5().flushAllEventCallbacks(e.getId())},[ig.DESTROY_IFRAME]:g({shouldRenderIFrame:!1}),[ig.INIT_CHECKPOINTS]:()=>{!n().hasExistingEvent({type:"tpat",event:n5.CHECKPOINT_0})&&aJ().isViewable()&&i3(0)},[ig.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{oA()},[ig.ON_ENDCARD_CLOSE]:()=>{let t=e();t&&i(t.getId(),t.getSceneType())},[ig.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=a5(),t=$();t&&(e.triggerEvent(t.getId(),_q.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(t.getId(),_q.CLOSE_BUTTON_WILL_SHOW))},[ig.ON_SHOW]:()=>{let e=na().interpreterMap.get("ad");if(e){let n=t(oP(e.state).getId());null==n||n.send({type:_o.SHOW})}}});(vb=_2||(_2={})).SHOW="SHOW",vb.HIDE="HIDE",(vw=_3||(_3={})).SHOWING="SHOWING",vw.HIDDEN="HIDDEN",(vV=_5||(_5={})).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",vV.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide";const ow="last-chance-endcard",oV=e=>({id:null!=e?`${ow}-${e}`:ow,initial:_3.HIDDEN,context:{delay:0},states:{[_3.SHOWING]:{on:{[_2.HIDE]:{target:_3.HIDDEN,actions:[_5.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[_3.HIDDEN]:{on:{[_2.SHOW]:{target:_3.SHOWING,actions:[_5.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),oM={actions:{[_5.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{aL().emit(iR.LAST_CHANCE_ENDCARD_OPEN)},[_5.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{aL().emit(iR.LAST_CHANCE_ENDCARD_CLOSE)}}};var ok=(e,t)=>{let n=null!=t?t:na(),i=null!=e?`${ow}-${e}`:ow;return n.interpreterMap.get(i)};const oU=X({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");(vM=_4||(_4={})).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",vM.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard";var oB=()=>({showLastChanceEndcard:()=>{let e=z.getValue().scene;if(nq(e)){let t=ok(e.getId());oU.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:_2.SHOW})}},closeLastChanceEndcard:()=>{oU.setValue({isLastChanceEndcardOverlayShowing:!1});let e=z.getValue().scene;if(nq(e)){let t=ok(e.getId());null==t||t.send({type:_2.HIDE})}}}),oH=class extends a{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!==(t=e.autoShowDelay)&&void 0!==t?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!==(i=e.autoCloseDelay)&&void 0!==i?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:_T.OFF}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:_T.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=nu()){super(),this.storeKitOverlayService=e,this.timerService=t}},oW=()=>{let e=r.getInstance(),t=oH.getServiceIdentifier();if(e.has(t))return e.get(t)};(_6||(_6={})).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService";var ox=(e=oW)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),oF=()=>d({},iT(),a9(),o_(),nO(),ox(),nB(),nE(),nc(),oh(),ob(),oB()),oG=(e=R())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,isFreeForm:e.has(L.AD_EXPERIENCE),allowDebug:e.has(L.IS_RUNNING_INSIDE_EMBED)||e.has(L.IS_STAFF_DEVICE_BID)}),oY=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},oK=()=>{let e=new oY,t=en(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:oG()}};(_8||(_8={})).DECODING_ERROR="decoding_error";var oj=_8,oX=(e=y(),t=j())=>{var n,i,r,a,o,s;return null!==(s=null!==(o=null===(i=e.getMraidExt())||void 0===i||null===(n=i.getConsentRequired)||void 0===n?void 0:n.call(i))&&void 0!==o?o:null===(a=e.getMraid())||void 0===a||null===(r=a.getConsentRequired)||void 0===r?void 0:r.call(a))&&void 0!==s&&s&&!t.isBanner()},oz=class{parseAdExperienceData(e){try{let t=V(e);return JSON.parse(t)}catch(t){try{let t=this.htmlDecoderService.decompress(e);return JSON.parse(t)}catch(e){return void this.freeFormReportingService.emit({type:"free-form",event:oj.DECODING_ERROR})}}}getAdExperience(e=oX(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!==(t=this.tokenService.get(L.AD_EXPERIENCE))&&void 0!==t?t:"",i=this.parseAdExperienceData(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!==(n=this.adExperienceCache)&&void 0!==n?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=oX(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[_c.NEXT]:{target:t}}},e.statemachine.initial=et}return e}getAdMachineConfig(){let e=this.getAdExperience();return C(d({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>C(d({},t),{id:e}))):[]}constructor(e=R(),t=eo(),n=y(),i=j(),r=ae()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i,this.htmlDecoderService=r}},o$=(e=new oz,t=en())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r,a;let o=e.name,s=null===(i=e.scene)||void 0===i?void 0:i.getId(),l=null===(r=n.states[t].on)||void 0===r?void 0:r[o],c={actions:Array.from(new Set([...Array.from(null!==(a=null==l?void 0:l.actions)&&void 0!==a?a:[]),...e.actions.map((e=>e.name))])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};s&&(c.target=s),n.states[t].on[o]=d({},null!=l?l:{},c)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),C(d({},n),{context:d({},oG(),n.context)})},oZ=()=>eo();(_7||(_7={})).SCENE_BUILDER_COMPLETE="SCENE_BUILDER_COMPLETE";var oq=_7,oQ=(e,t,n={})=>{let i=[],r=new Set,a=new Set,o=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(s,l=!1){var c;let d,u;if(a.has(s))return;a.add(s);let E=o[s],_=E?E.getSceneType():ew.closed,v=!!E&&E.isAlternative();d=l?"start":_===ew.closed?"end":"intermediate";let h=[];v&&h.push("Alternate"),h.push((u=n[_]||_)?u.charAt(0).toUpperCase()+u.slice(1):u),i.some((e=>e.id===s))||i.push({id:s,label:h.join(" "),type:d,alternative:v,connections:[]});let S=(null===(c=e.states[s])||void 0===c?void 0:c.on)||{};Object.keys(S).forEach((e=>{var n,a,o;let l=null===(n=S[e])||void 0===n?void 0:n.target;if(l){let e=`${s}->${l}`;r.has(e)||(r.add(e),null===(o=i.find((e=>e.id===s)))||void 0===o||null===(a=o.connections)||void 0===a||a.push(l),t(l))}}))}(e.initial,!0),{nodes:i.map((e=>{var t;let n=null===(t=e.connections)||void 0===t?void 0:t.filter((t=>{var n;return t!==ew.closed||!(null===(n=e.connections)||void 0===n?void 0:n.some((e=>e!==ew.closed)))}));return C(d({},e),{connections:n})}))}},oJ=(e=R(),t=oZ())=>{let n;n=e.has(L.AD_EXPERIENCE)?o$():oK();let i={actions:d({},oF())};return e.has(L.IS_RUNNING_INSIDE_EMBED)&&t.emit({type:"scene-builder-event",event:oq.SCENE_BUILDER_COMPLETE,data:oQ(n,en(),{endcard:"Playable"})}),[n,i]};const o0=(e=na())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=oJ();return e.createMachine(n,i)};var o1=(e=na())=>e.interpret(o0(e)),o2=function(e,t,n=na()){let i=tN((()=>n.createMachine(e,t)),[e]),r=t6(i.initialState),[a,o]=tN((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return tm((()=>(a.status!==eO.Running&&a.start(),()=>{o.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]};(vk=_9||(_9={})).CALL="CALL",vk.DONE="DONE",(vU=he||(he={})).IDLE="IDLE",vU.BUSY="BUSY";const o3=e=>({id:`throttle-${e}`,initial:he.IDLE,context:{},states:{IDLE:{on:{[_9.CALL]:{target:he.BUSY}}},BUSY:{on:{[_9.DONE]:{target:he.IDLE}}}}});var o5=()=>document.querySelector("#dynamic");(ht||(ht={})).CLOSE="vungle.events.request.close";var o4=ht,o6=()=>eo(),o8=()=>{let e=r.getInstance(),t=aP.getServiceIdentifier();return e.get(t)},o7=(e,t=e$(),n=en)=>{if(e.getSceneType()===ew.closed)return;let i={name:eL.SCENE_START,scene_id:e.getId(),scene_type:e.getSceneType(),scene_index:n().indexOf(e)};t.emit(i)},o9=(e=o5())=>{let t=o1(),n=t.send,i=t6(t.state),r=o2(o3("ad")),[a,o]=r,s=tN((()=>e=>{[_c.NEXT,_c.LAST_CHANCE_ENDCARD,_c.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?a.value.matches(he.IDLE)&&(o({type:_9.CALL}),n(e),window.setTimeout((()=>{o({type:_9.DONE})}),500)):n(e)}),[r]);return tm((()=>{let e=t.subscribe((e=>{let t=i.value;if(i.value=e,e.changed&&t.value!==e.value){let n=oP(t),i=o8();i.end(n);let r=oP(e);z.setValue({scene:r}),i.start(r),o7(r)}}));return()=>{e.unsubscribe()}}),[t]),tm((()=>{let t=o6(),r=()=>{var e;t.emit({type:"custom-mraid",event:o4.CLOSE,data:d({isVideoState:(null===(e=oP(i.value))||void 0===e?void 0:e.getSceneType())===ew.video,sendAdEvent:n},i.value.context)})};return null==e||e.addEventListener(o4.CLOSE,r),()=>{null==e||e.removeEventListener(o4.CLOSE,r)}}),[e]),[i,s]};const se="close-or-skip-button",st="privacy-drawer",sn="shield-icon";hn="wnLcbW_closeIcon",hi="wnLcbW_fallback";var si=()=>(tm((()=>{nu().getNewTimer(500,(()=>{nD()})).start()}),[]),aG("div",{id:"app-store-transition-fallback",className:hi,children:aG("button",{title:"Close","aria-label":"Close",id:se,type:"button",onClick:()=>{nD()},style:hn,children:aG("div",{className:hn})})})),sr=class extends e8{componentDidCatch(e,t){eo().emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},sa=class{getConsentTitleText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentTitleText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentTitleText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentBodyText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentBodyText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentAcceptButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentAcceptButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentDenyButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentDenyButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I do not consent"}consentAction(e){var t;null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||t.consentAction(e)}constructor(e=y()){this.mraidService=e}};hr="C4yOdG_bodyText",ha="C4yOdG_buttons",ho="C4yOdG_content",hs="C4yOdG_gdpr",hl="C4yOdG_header",hd="C4yOdG_icon",hc="C4yOdG_primaryButton",hu="C4yOdG_secondaryButton",hE="C4yOdG_title";var so=({sendAdEvent:e=()=>{}})=>{let t=new sa,n=n=>{t.consentAction(n),e({type:_c.NEXT})};return aG("div",{className:hs,id:"gdpr",children:[aG("div",{className:ho,children:[aG("header",{className:hl,children:[aG("span",{className:hd}),aG("h3",{id:"gdpr-title",className:hE,children:t.getConsentTitleText()})]}),aG("p",{id:"gdpr-body-text",className:hr,children:t.getConsentBodyText()})]}),aG("div",{className:ha,children:[aG("button",{type:"button",id:"gdpr-accept",className:hc,onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),aG("button",{type:"button",id:"gdpr-deny",className:hu,onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})},ss=(e,t)=>{tm((()=>{let n=window.setInterval((()=>{var i;(null===(i=e.current)||void 0===i?void 0:i.complete)&&(t({type:_c.PRIVACY_LOGO_SHOW}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[])},sl=(...e)=>e.filter(Boolean).join(" "),sd=class{clickHandler(e){this.reportingService.emit({type:"fsc",event:aU.FSC,data:{ctaUrl:e}})}constructor(e=aH()){this.reportingService=e}};hv="_7pzQ5q_hidden",h_="_7pzQ5q_overlayCta";const sc=tG(!1),su=(e,t)=>{sc.value=t.event===nk.MINIMIZED},sE=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var sv=({config:e,ctaUrl:t,service:n=new sd,reportingService:i=a0(),children:r})=>(tm((()=>(i.addEventHandler("viewability",su),()=>{i.removeEventHandler("viewability",su)})),[]),aG(e6,{children:[e.enabled&&aG("button",{className:sl(h_,sc.value?hv:""),type:"button",id:sE(e.id),"aria-label":"fsc","aria-hidden":sc.value,onClick:()=>n.clickHandler(t)}),r]}));(vB=hh||(hh={})).SHOW="ASOD_SHOW",vB.CLOSE="ASOD_CLOSE",(vH=hS||(hS={})).INITIAL="ASOD_INITIAL",vH.SHOWN="ASOD_SHOWN",(vW=hT||(hT={})).SET_DELAY="ASOD_SET_DELAY",vW.OPEN_APP_STORE="ASOD_OPEN_APP_STORE";var s_=class extends a{fireStoreKitOverlayWithDelay(e){let t=nI();new N(e,(()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())})).start()}openStoreViewWithDelay(e){if(nL()&&nM())return void this.fireStoreKitOverlayWithDelay(e);let t=nu().getNewTimer(e,(()=>{let e=nR();null==e||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null===(e=this.timer)||void 0===e||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},sh=()=>{let e=r.getInstance(),t=s_.getServiceIdentifier();return e.get(t)};const sS=e=>({id:`app-store-on-delay-${e}`,initial:hS.INITIAL,context:{delay:0},states:{[hS.INITIAL]:{on:{[hh.SHOW]:{target:hS.SHOWN,actions:[hT.SET_DELAY]}}},[hS.SHOWN]:{entry:[hT.OPEN_APP_STORE]}}}),sT={actions:{[hT.SET_DELAY]:g({delay:(e,t)=>t.delay}),[hT.OPEN_APP_STORE]:e=>{sh().openStoreViewWithDelay(e.delay)}}};var sg=(e,t,n=!0,i=!0)=>{let[,r]=o2(sS(e),sT);tm((()=>t.enabled&&n&&i?(r({type:hh.SHOW,delay:t.autoShowDelay}),()=>{sh().reset()}):()=>{}),[n,i])},sp=(e,t=!0,n=oW(),i=nI())=>{let r=t6(null==i?void 0:i.canOpen()),a=t6(!1);tm((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),tm((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),tm((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},sC=(e,t,n=nd())=>{let i=t6(e),r=tf(void 0),a=()=>{var e;null==r||null===(e=r.current)||void 0===e||e.destroy(),r.current=void 0};return tm((()=>{var e;void 0===r.current&&(r.current=n.getNewInterval(1e3,(()=>{let e=i.value-1;i.value=e<=0?0:e})),null===(e=r.current)||void 0===e||e.start());return()=>a()}),[]),ni((()=>{0===i.value&&a(),t&&t(i.value)})),i};hg="NQnIja_countdown";var sI=({delay:e,isVisible:t=!0,children:n,handleTimerUpdate:i,showNextButtonDuringCountDownInBackground:r})=>{let a=sC(e,i);if(a.value>0&&r)return aG("div",{children:n});if(a.value>0&&!t)return aG("div",{id:"countdown"});if(a.value>0&&t){let e=Math.round(a.value);return 0===e?null:aG("div",{id:"countdown",className:hg,children:e})}return aG("div",{children:n})},sO=(e,t,n=eo())=>(tm((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)});const sA=[em.MREC,em.BANNER,em.IN_LINE];var sm=class{placementSupportsNextButton(){return!sA.includes(this.placementTypeService.getPlacementType())}constructor(e=j()){this.placementTypeService=e}},sf=(e=n8())=>e.getActivityEvents().some((e=>e.activity.name===n5.CLICK_URL||e.activity.name===n5.POSTROLL_CLICK)),sN=class{getButtonPadding(e=0,t=10){return sf()?t:Math.min(Math.max(parseInt(this.tokenService.get(L.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=R()){this.tokenService=e}};hp="mqB7Ka_closeIcon",hC="mqB7Ka_skipIcon";var sD=({sendEvent:e=()=>{},type:t=nH.CLOSE,service:n=new sN,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===nH.SKIP?hC:hp,o=t===nH.SKIP?"Skip button":"Close button",s=t6(n.getButtonPadding());tm((()=>{e&&e({type:_c.CLOSE_BUTTON_WILL_SHOW})}),[]),sO("tpat",(()=>{s.value=n.getButtonPadding()}));let l=-s.value;return aG("button",{title:o,"aria-label":o,id:se,type:"button",style:{padding:`${s.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:_c.CLOSE_BUTTON_CLICK}),r(),e(i?{type:_c.LAST_CHANCE_ENDCARD}:{type:_c.NEXT})},children:aG("div",{className:a})})};hI="LJWyoG_nextButton";const sy=tG(!0);var sR=({handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,sendAdEvent:n,showLastChanceEndcard:i=!1,config:r,beforeClick:a=()=>{}})=>{let{delay:o=0,countdown:s=!0}=r,l=new sm,c=o>0;return sO("viewability",((e,t)=>{sy.value=t.event===nk.MAXIMIZED})),l.placementSupportsNextButton()?aG("div",{id:i?"last-chance-endcard-next-button":"next-button",className:hI,role:"button",tabIndex:0,"data-countdown-running":sy.value,children:c?aG(sI,{delay:o,isVisible:s,handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,children:aG(sD,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):aG(sD,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):null},sL=()=>{let e=r.getInstance(),t=eZ.getServiceIdentifier();return e.get(t)},sP=class extends sm{getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=1===this.scene.index;return C(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay})}constructor(e,t=sL()){super(),this.scene=e,this.globalTimerService=t}},sb=e=>{let[t]=o2(oV(e),oM);return t};(vx=hO||(hO={})).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",vx.ENDCARD_CTA="ENDCARD_CTA",vx.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",vx.PERSISTENT_CTA="PERSISTENT_CTA";var sw=hO,sV=class{emitClickEvents(){this.ctaReportingService.emit({type:"cta",event:sw.LAST_CHANCE_ENDCARD_CTA})}constructor(e=eo()){this.ctaReportingService=e}};hA="poFP6W_animate",hm="poFP6W_backgroundNone",hf="poFP6W_button",hN="poFP6W_icon",hD="poFP6W_lastChanceEndCard",hy="poFP6W_name",hR="poFP6W_opaque",hL="poFP6W_overlay";const sM=tG(!1);var sk=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i})=>{var r,a,o,s,l,c,d,u;let E=new sV,_=tf(null),v=sb(e.id);ss(_,t);let h=()=>{sM.value=!0,E.emitClickEvents()};return tm((()=>{i(e.enabled&&!v.value.matches(_3.HIDDEN))}),[e.enabled,v.value]),!e.enabled||v.value.matches(_3.HIDDEN)?null:aG("div",{className:sl(hL,null!=(null===(r=e.appMeta)||void 0===r?void 0:r.icon)?hR:""),id:"last-chance-endcard-overlay",children:aG(sv,{config:{enabled:!!(null===(a=e.fsc)||void 0===a?void 0:a.enabled)},children:[aG(sR,{sendAdEvent:t,config:null!==(u=e.close)&&void 0!==u?u:{},showLastChanceEndcard:!1}),aG("div",{className:sl(hD,n?hm:""),id:"last-chance-endcard",children:[(null===(o=e.appMeta)||void 0===o?void 0:o.icon)&&aG("img",{className:hN,ref:_,src:null===(s=e.appMeta)||void 0===s?void 0:s.icon,alt:null===(l=e.appMeta)||void 0===l?void 0:l.name,id:"last-chance-endcard-app-icon",onClick:h,"aria-hidden":"true"}),aG("p",{className:hy,id:"last-chance-endcard-app-name",onClick:h,"aria-hidden":"true",children:null===(c=e.appMeta)||void 0===c?void 0:c.name}),aG("button",{type:"button",className:sl(hf,sM.value?"":hA),"data-animate":!sM.value,onClick:h,id:"last-chance-endcard-cta",children:null===(d=e.cta)||void 0===d?void 0:d.text})]})]})})},sU=(e,t=!0)=>{tm((()=>t?(e&&e({type:_c.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:_c.CLOSE_BUTTON_UNMOUNT})}):()=>{}),[t])},sB=(e=R())=>{var t;return null!==(t=e.get(L.CTA_BUTTON_URL))&&void 0!==t?t:""},sH=class extends a{openCTAWithMraid(){var e;this.url&&(null===(e=this.mraidService.getMraid())||void 0===e||e.open(this.url))}openOverlayView(){var e;null===(e=this.storeKitOverlayService)||void 0===e||e.open()}openProductView(){var e;null===(e=this.productViewService)||void 0===e||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null===(e=this.productViewService)||void 0===e?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&om(t)}handleProductViewCTA(){var e,t;null!==(e=this.productViewService)&&void 0!==e&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null===(t=this.productViewService)||void 0===t?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r}=e;if((void 0===e.fireMMPEvents||e.fireMMPEvents)&&this.injectedFireMMPEvents(),this.url=n||this.ctaButtonUrl,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===eD.iOS)switch(t){case eV.OFF:this.openCTAWithMraid();break;case eV.SKO:this.handleOverlayViewCTA();break;case eV.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=y(),t=K(),n=nR(),i=nI(),r=nM(),a=ie(),o=sB(),s=n7){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.ctaButtonUrl=o,this.injectedFireMMPEvents=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},sW=()=>{let e=r.getInstance(),t=sH.getServiceIdentifier();return e.get(t)},sx=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sW(),injectedEmitTrackingEvent:a=oL,sceneEventReportingService:o=aL()})=>sO("fsc",(()=>{(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(eM.CLICK_THROUGH,n,e),o.emit(iR.CLICK))})),sF=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sW(),injectedEmitTrackingEvent:a=oL,sceneEventReportingService:o=aL()})=>sO("cta",((s,l)=>{if(e){var c,d;let{target:s,url:u}=e,E=l.event===sw.ENDCARD_CTA;r.invoke({target:s,url:null!==(d=null===(c=l.data)||void 0===c?void 0:c.ctaUrl)&&void 0!==d?d:u,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:E}),a(eM.CLICK_THROUGH,n,t),o.emit(iR.CLICK)}}));(hP||(hP={})).APP_META_UPDATE="APP_META_UPDATE";var sG=hP,sY=()=>eo(),sK=(e,t=!0,n=sY())=>{tm((()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:sG.APP_META_UPDATE,data:null!==(i=e.getCallToActionConfig().appMeta)&&void 0!==i?i:{enabled:!1}})}),[t])},sj=()=>"ontouchstart"in document.documentElement==1?"touchstart":"click";const sX=e=>{let t=document.querySelector(`#${se}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:o,left:s}=t.getBoundingClientRect();return(n<s&&n>=s-30||n>a&&n<=a+30)&&i>=r-30&&i<=o+30||(i<r&&i>=r-30||i>o&&i<=o+30)&&n>=s-30&&n<=a+30},sz=e=>{let t=window.innerWidth-75,n=75;return e.clientX>=t&&e.clientY<=n},s$=(e,t=aL())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${se}`)?sX(n):sz(n))&&t.emit(iR.NEAR_CLOSE_BUTTON_CLICK)},sZ=[er,se,sn,st],sq=(e,t)=>{if(e instanceof Element){var n;let i=null!==(n=e.getAttribute("id"))&&void 0!==n?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||sq(e.parentElement,t))}return!0},sQ=(e,t,n)=>{sq(e.target,sZ)&&n.emitLegacy({name:eL.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE,value:null!==document.querySelector(`#${se}`),scene_id:t},1,["name","scene_id"])},sJ=(e,t)=>{sq(e.target,sZ)&&t.emit(iR.CLICK)},s0=(e,t,n,i)=>{sq(e.target,sZ)&&[ew.endcard,ew.image].includes(t)&&e.isTrusted&&i.emit({name:eL.ENDCARD_CLICK,scene_id:n})},s1=(e,t=!1,n=$,i=aL,r=e$)=>{var a,o;let s=t?eb.lastChanceEndcard:null===(a=n())||void 0===a?void 0:a.getSceneType(),l=t?eb.lastChanceEndcard:null===(o=n())||void 0===o?void 0:o.getId(),c=i(n),d=r();sQ(e,l,d),sJ(e,c),s0(e,s,l,d),s$(e,c)};var s2=(e,t=!0,n=$,i=s1,r=aL,a=e$)=>{tm((()=>{if(!t)return()=>{};let o=t=>{i(t,e,n,r,a)};return document.body.addEventListener(sj(),o,!0),()=>{document.body.removeEventListener(sj(),o,!0)}}),[e,t])};hb="J2DrKG_staticImageEndcard";const s3=tG(!1);var s5=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,useBackgroundImage:r=!1})=>{let a=new sP(e),o=tf(null);return sg(e.getId(),e.getAppStoreOnDelayConfig()),sp(e.getStoreKitOverlayAutoShowConfig()),ss(o,t),sU(t),oR(),sK(e),sx({fullScreenClickConfig:s3.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sF({callToActionConfig:s3.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),tm((()=>{t({type:_c.CREATIVE_VIEW})}),[]),s2(s3.value),aG(e6,{children:[aG(sk,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{s3.value=e}}),aG("div",{className:null!=i?i:hb,style:r?{backgroundImage:`url(${e.url})`}:{},children:aG(sv,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,children:[n&&!s3.value&&aG(sR,{config:a.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aG("img",{src:e.url,ref:o,alt:"image",id:e.getId()})]})})]})};(vF=hw||(hw={})).Native="native",vF.Custom="custom",vF.NotSupported="not-supported",(vG=hV||(hV={})).Manifest="manifest",vG.Video="video";var s4=(e=z)=>{let t=e.getValue().scene;return aC(t)?X({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class s6 extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){let i=new a_;this.hasCachedManifest(t,i)?this.loadFromString(i.getCachedManifest(),e,t):this.hasCachedLevel(t,i)?this.loadFromString(i.getCachedFirstTrack(),e,t):super.openAndSendXhr(e,t,n)}load(e,t,n,i=z,r=s4,a=i$()){let{onSuccess:o}=n;super.load(e,t,C(d({},n),{onSuccess:(e,t,n,s)=>{var l,c;o(e,t,n,s);let d=null===(l=n.levelDetails)||void 0===l?void 0:l.startSN;"level"===n.type&&d&&(a.emit({type:"video",event:iK.HLS_LEVEL_PLAYLIST_LOADED,data:{startingSequenceNumber:d}}),null===(c=r(i))||void 0===c||c.setValue({startSn:d}))}}))}hasCachedLevel(e,t=new a_){return"level"===e.type&&0===e.id&&t.hasCachedFirstTrack()}hasCachedManifest(e,t=new a_){return"manifest"===e.type&&t.hasCachedManifest()}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null===(e=this.callbacks)||void 0===e||e.onSuccess(i,this.stats,n,t)}))}}var s8=()=>r.getInstance().get(ak.getServiceIdentifier());class s7 extends window.Hls.DefaultConfig.loader{getLocalFileURL(e,t=s4,n=z){var i,r;let a=new a_,o=Number(e.sn),s=null!==(r=null===(i=t(n))||void 0===i?void 0:i.getValue().startSn)&&void 0!==r?r:1;return a.getCachedVideoSegmentUrls()[o-s]}shouldLoadFromFileURL(e){if("main"!==e.type||"initSegment"===e.sn)return!1;let t=this.getLocalFileURL(e);return(null==t?void 0:t.length)>0&&aE(t)}async load(e,t,n){if(this.shouldLoadFromFileURL(e.frag))e.url=this.getLocalFileURL(e.frag),super.load(e,t,n);else{let i=s8(),r=await i.get(e.url);r?(this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):super.load(e,t,n)}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(e&&t&&!n.aborted){if(4!==t.readyState)return void super.readystatechange();if(this.shouldLoadFromFileURL(this.context.frag)){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else{var i;if((null===(i=t.response)||void 0===i?void 0:i.byteLength)>=0&&!this.loadedFromCache){let n=s8();null==n||n.addRecord({url:e.url,data:new Uint8Array(t.response)})}super.readystatechange()}}}}var s9=e=>"data:application/x-mpegurl;base64,"+btoa(e),le=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=i+4,a=n[e].charAt(r);for(let t=i+5;t<n[e].length&&r===i+4;t+=1)n[e].charAt(t)===a&&(r=t);let o=n[e].substring(i+5,r);if(!o.toLowerCase().startsWith("http")){let a=t.split("/");a.pop(),a.push(o),n[e]=n[e].substring(0,i+5)+a.join("/")+n[e].substring(r)}}return n.join("\n")},lt=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXT-X-STREAM-INF"))if(i){if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t;return r.join("\n")},ln=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},li=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")){if(n[e+1].toLowerCase().startsWith("http"))return n[e+1];let i=t.split("/");return i.pop(),i.push(n[e+1]),i.join("/")}},lr=class{getStreamPlayer(e){if(null===e)return hw.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==eD.iOS||t.isGreaterThanOrEqualTo(new w("7")))return hw.Custom}return""!==e.canPlayType(this.hlsMediaType)?hw.Native:hw.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:s6,fLoader:s7,debug:!1});this.onFragLoaded(n),n.loadSource(e),n.attachMedia(t)}async getHlsManifest(e){if(!this.streamPunkService.hasCachedStreamChunks()&&!this.streamPunkService.hasCachedFirstTrack())return this.streamPunkService.hasCachedManifest()?s9(ln(this.streamPunkService.getCachedManifest(),e)):e;try{let t;if(this.streamPunkService.hasCachedManifest())t=this.streamPunkService.getCachedManifest();else{let n=await this.getManifest(e);if(void 0===n)return e;t=await n.text()}let n=li(t,e);if(!n){let n=this.updateStream(t,e);return s9(n)}try{let i;if(this.streamPunkService.hasCachedFirstTrack())i=this.streamPunkService.getCachedFirstTrack();else{let t=await this.getVideo(n);if(void 0===t)return e;i=await t.text()}let r=this.updateStream(i,n),a=s9(r),o=lt(t,a,n),s=le(o,e);return s9(s)}catch(t){return this.handleStreamError(t,n,hV.Video),e}}catch(t){return this.handleStreamError(t,e,hV.Manifest),e}}insertCachedVideoSegments(e,t){let n=this.streamPunkService.getCachedVideoSegmentUrls().reverse(),i=t.split("/");i.pop();let r=e.split("\n");for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXTINF"))if(n.length>0)r[e+1]=n.pop();else if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=i.concat(t).join("/")}return r.join("\n")}updateStream(e,t){return le(this.insertCachedVideoSegments(e,t),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null===(i=e.message)||void 0===i?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);if(n.ok||0===n.status)return n;this.errorLoggingService.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}})}getManifest(e){return this.getStream(e,hV.Manifest)}getVideo(e){return this.getStream(e,hV.Video)}getBandwidthEstimate(e,t,n){if(!(!1===Number.isFinite(e)||e<=0||e>419430400||t<50||Number.isNaN(n)))return Math.round(n/8/1024)}onFragLoaded(e){e.on(window.Hls.Events.FRAG_LOADED,((t,n)=>{if("main"===n.frag.type){var i;let t=n.frag.stats.bwEstimate,r=n.frag.stats.loading.end-n.frag.stats.loading.start,a=e.bandwidthEstimate,o=null===(i=z.getValue().scene)||void 0===i?void 0:i.getId(),s=this.getBandwidthEstimate(t,r,a);o&&s&&this.videoReportingService.emit({type:"video",event:iK.BANDWIDTH_ESTIMATION,data:{scene_id:o,bwe:s}})}}))}constructor(e=K(),t=il(),n=i$(),i=new a_){this.environmentService=e,this.errorLoggingService=t,this.videoReportingService=n,this.streamPunkService=i,this.hlsMediaType="application/vnd.apple.mpegurl"}},la=class{monitorVideoHealth(e,t,n){var i;n&&(null!=(null===(i=this.videoMonitorTimer)||void 0===i?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{!e.value.matches(_j.AUTO_PLAY_FAIL)&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(F))})),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new lr(this.environmentService,this.errorLoggingService,this.videoReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case hw.Custom:i.loadHls(t,e);break;case hw.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit(eL.HLS_NOT_SUPPORTED),n({type:_c.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e=nu(),t=K(),n=il(),i=e$(),r=ou(),a=i$()){this.timerService=e,this.environmentService=t,this.errorLoggingService=n,this.observabilityReportingService=i,this.muteService=r,this.videoReportingService=a}},lo=class extends og{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null===(e=this.adSession)||void 0===e||e.setCreativeType(op.VIDEO),null===(t=this.adSession)||void 0===t||t.setImpressionType(oC.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){eo().emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!ei(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null===(t=this.adEvents)||void 0===t||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===oI.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if(e.type===oI.SESSION_FINISH){let e=eo();e.emit({type:"video",event:_Q.REMOVE_HANDLER}),e.emit({type:"cta",event:_Q.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null===(i=this.mediaEvents)||void 0===i||i.bufferFinish());let r=iz(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=n?0:1,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume="mute"===e?0:1,null===(t=this.mediaEvents)||void 0===t||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null===(n=this.mediaEvents)||void 0===n||n.pause());null===(t=this.mediaEvents)||void 0===t||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null===(t=this.mediaEvents)||void 0===t||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null===(e=this.mediaEvents)||void 0===e||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const ls=()=>R().has(L.OM_SDK_DATA)&&oS();var ll=e=>{if(ls()){var t;let n=null!==(t=R().get(L.OM_SDK_DATA))&&void 0!==t?t:"";r.getInstance().bind(lo.getServiceIdentifier(),new lo(e,n))}};(vY=hM||(hM={})).SHOWING="SHOWING",vY.HIDDEN="HIDDEN",(vK=hk||(hk={})).SHOW="SHOW",vK.HIDE="HIDE",vK.CLOSE="CLOSE",(vj=hU||(hU={})).PAUSE_VIDEO="pauseVideo",vj.PLAY_VIDEO="playVideo",vj.FORFEIT_REWARD="forfeitReward";const ld="incentivized-dialog",lc=()=>({id:ld,initial:hM.HIDDEN,context:{},states:{[hM.HIDDEN]:{on:{[hk.SHOW]:{target:hM.SHOWING,actions:[hU.PAUSE_VIDEO,_u.PAUSE_INTERVALS,_E.STANDBY_TIMERS]}}},[hM.SHOWING]:{on:{[hk.HIDE]:{target:hM.HIDDEN,actions:[hU.PLAY_VIDEO,_u.START_INTERVALS,_E.WAKE_TIMERS]},[hk.CLOSE]:{target:hM.HIDDEN,actions:[hU.FORFEIT_REWARD,_u.START_INTERVALS,_E.WAKE_TIMERS]}}}}}),lu={actions:d({},nE(),{pauseVideo:()=>{let e=ot();null==e||e.send({type:_K.PAUSE})},playVideo:()=>{let e=ot();null==e||e.send({type:_K.PLAY})},forfeitReward:()=>{eo().emit({type:"incentivized-event",event:iS.FORFEIT_REWARD,fireOnlyOnce:!0}),e$().emit(eL.FORFEIT_REWARD)}},nc())};var lE=e=>(null!=e?e:na()).interpreterMap.get(ld),lv=(e,t,n=$(),i=ot(),r=o1(),a=lE())=>{if(!aC(n))return;let o=!1;r.state.context.isPrivacyDrawerOpen&&(o=!0),(null==a?void 0:a.state.value)===hM.SHOWING&&(o=!0),t.event!==nk.MAXIMIZED||o?t.event===nk.MINIMIZED&&(null==i||i.send({type:_K.MINIMIZE})):null==i||i.send({type:_K.MAXIMIZE,hasHlsVideo:n.videoType===_x.HLS})},l_=(e=j())=>!e.isBanner();hB="S2LOeW_icon",hH="S2LOeW_muted",hW="S2LOeW_unmuted";const lh={marginLeft:"0px",marginTop:"0px"},lS=tG(lh);var lT=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i})=>{let r=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=d({},lh),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:o}=null==e?void 0:e.parentElement,s=i/r;a/o>s?t.marginLeft=(a-o*s)/2+"px":t.marginTop=(o-a/s)/2+"px",lS.value=t};return tm((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}))),tm((()=>{r()}),[n,i]),n?aG("button",{type:"button",className:t?hH:hW,id:er,title:t?"Unmute":"Mute","aria-label":"Mute button",style:lS.value,onClick:()=>{e({type:t?_c.UNMUTE:_c.MUTE})},children:aG("span",{className:hB})}):null};hx="OaF7uW_paused",hF="OaF7uW_videoProgress";var lg=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r})=>n?aG("div",{role:"progressbar",title:"Video progress",className:hF,"aria-label":"Video progress",children:aG("span",{className:!r&&e>0?"":hx,style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null,lp=e=>!!e.next&&e.next.getSceneType()!==ew.closed;hG="ok_seq_videoPlayer",hY="ok_seq_videoPlayerWrap";var lC=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r})=>{var a;let o=new la,s=new lr,l=tN((()=>a0()),[]),{url:c}=i,d=tf(null),u=tf(null),E=tf(null),_=t6(0),v=t6(c),h=o.getMutedSignal(),S=t6(""),T=t=>{e({type:t,eventTarget:d.current,url:v.value})},g=()=>{T(_K.CAN_PLAY),t({type:_c.PRIVACY_LOGO_SHOW})},p=e=>{t({type:_c.VIDEO_ERROR,error:Error(e),videoUrl:v.value}),t({type:_c.VIDEO_FAILURE})},C=()=>{setTimeout((()=>{d.current&&(d.current.muted=h.value)}),100)},I=()=>{let e=nu();u.current=e.getNewTimer(1e4,(()=>{n.value.value!==_j.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&p(x)})),u.current.start()};return tm((()=>{var r,a,o;switch(n.value.value){case _j.PLAYING:null===(a=u.current)||void 0===a||null===(r=a.destroy)||void 0===r||r.call(a),(()=>{var t;let i=null===(t=d.current)||void 0===t?void 0:t.play();i?i.then(C).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:_K.AUTO_PLAY_FAIL}):"aborterror"===n||p(G)})):window.setTimeout((()=>{var t;n.value.value===_j.PLAYING&&0===(null===(t=document.getElementsByTagName("video")[0])||void 0===t?void 0:t.currentTime)&&e({type:_K.AUTO_PLAY_FAIL})}),2500)})();break;case _j.LOAD_FAIL_RETRY:(()=>{e({type:_K.RETRY});let t=i.originalVideoUrl;t&&t!==v.value?v.value=t:p(W)})();break;case _j.PAUSED:null===(o=d.current)||void 0===o||o.pause();break;case _j.ENDED:if(i.loopVideo)e({type:_K.PLAY});else{let n=i.getLastChanceEndcardConfig().enabled;e({type:_K.CLOSE}),t(n?{type:_c.LAST_CHANCE_ENDCARD}:{type:_c.COMPLETE})}}}),[n.value.value]),ni((()=>{d.current&&v.value&&(ll(d.current),d.current.setAttribute("muted","true"),i.videoType===_x.PROGRESSIVE&&(e=>{d.current&&e&&(d.current.setAttribute("src",e),d.current.load(),lp(i)?I():o.monitorVideoHealth(n,p,d.current))})(v.value))})),ni((()=>{let e=s.getStreamPlayer(d.current);if(v.value&&i.videoType===_x.HLS&&e!==hw.NotSupported){let t=async()=>{e===hw.Native?S.value=await s.getHlsManifest(v.value):S.value=v.value};lp(i)?I():o.monitorVideoHealth(n,p,d.current),t()}})),ni((()=>{""!==S.value&&(null==d?void 0:d.current)&&o.startStreamingVideo(d.current,S.value,t)})),ni((()=>{var e,t;d.current&&(null===(e=(t=n.value).matches)||void 0===e?void 0:e.call(t,_j.PLAYING))&&!d.current.paused&&!d.current.ended&&(d.current.muted=h.value)})),tm((()=>(l.addEventHandler("viewability",lv),()=>{l.removeEventHandler("viewability",lv)})),[e,l]),tm((()=>{let e=t=>{d.current&&(d.current.readyState>2?g():nu().getNewTimer(t,(()=>{e(t)})).start())};e(200)}),[]),aG("div",{className:sl(hY,"videoPlayer"),ref:E,id:i.getId(),children:[aG(lT,{sendAdEvent:t,isMuted:h.value,isVisible:n.value.context.canPlay&&l_(),videoPlayerHeight:null===(a=E.current)||void 0===a?void 0:a.clientHeight}),aG("video",{title:"Video player",id:"video-player",ref:d,muted:!0,playsInline:!0,className:hG,poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{v.value===c?T(_K.LOAD_FAIL):p(B)},onDurationChange:()=>{T(_K.DURATION_CHANGE)},onWaiting:()=>{T(_K.WAITING)},onSuspend:()=>{T(_K.SUSPEND)},onCanPlay:g,onCanPlayThrough:()=>{i$().emit({type:"video",event:iK.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==_j.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(_.value=i.currentTime,e({eventTarget:i,type:_K.TIME_UPDATE}))},onEnded:()=>{_.value=0,e({type:_K.END})},onPlaying:()=>{T(_K.PLAYING)},onSeeking:e=>{let t=e.target,n=t.currentTime-_.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=_.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),aG(lg,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===_j.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},lI=(e,t=K())=>{var n;let i=t.getOperatingSystem();if(i===eD.Android)return!!(null!==(n=null==e?void 0:e.filter)&&void 0!==n?n:null==e?void 0:e.webkitFilter);if(i===eD.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1};hK="RypQCq_videoBlurWrap";var lO=({isInLine:e=!1})=>{var t,n,i,r;let a=tf(null),o=tf(null),s=tf(),l=tf(),c=t6(!1),d=t6(window.document.body.clientWidth),u=t6(window.document.body.clientHeight),E=t6(0),_=t6(0),v=t6(0),h=t6(0),S=null===(t=ot())||void 0===t?void 0:t.state.context.videoElement,T=null===(n=ot())||void 0===n?void 0:n.state.context.canPlay,g=null===(i=ot())||void 0===i?void 0:i.state.context.videoWidth,p=null===(r=ot())||void 0===r?void 0:r.state.context.videoHeight,C=()=>{var e,t;a.current&&(d.value=null===(e=a.current)||void 0===e?void 0:e.clientWidth,u.value=null===(t=a.current)||void 0===t?void 0:t.clientHeight)},I=()=>{if(!S)return;let t=S.videoHeight>S.videoWidth;c.value=(e||t)&&!!S&&(!!e||S.videoWidth/S.videoHeight<d.value/u.value)&&lI(s.current)},A=()=>{C(),(()=>{var e;null===(e=s.current)||void 0===e||e.clearRect(0,0,v.value,h.value)})(),I()};return tm((()=>{S&&(E.value=S.clientHeight,_.value=S.clientWidth),I()}),[null==S?void 0:S.clientHeight,null==S?void 0:S.clientWidth,s.current]),tm((()=>{if(T){window.addEventListener("resize",A),C(),(()=>{if(o.current&&d&&u&&g&&p&&u){var e;let t=g/d.value,n=p/u.value,i=g/p<d.value/u.value?t:n,r=Math.floor(Number(g/i)),a=Math.floor(Number(p/i));s.current=null===(e=o.current)||void 0===e?void 0:e.getContext("2d"),v.value=r,h.value=a}})();let e=nd();l.current=e.getNewInterval(60,(()=>{c.value&&s.current&&s.current.drawImage(S,0,0,v.value,h.value)})),l.current.start()}return()=>{var e;window.removeEventListener("resize",A),null===(e=l.current)||void 0===e||e.destroy()}}),[T]),aG("div",{id:"video-blur",ref:a,className:hK,children:aG("canvas",{id:"video-blur-canvas",ref:o,width:v,height:h})})};hj="dDtiqq_tapToPlayContainer",hX="dDtiqq_tapToPlayIcon",hz="dDtiqq_tapToPlayMask",h$="dDtiqq_tapToPlayText";var lA=({isVisible:e,sendVideoEvent:t})=>e?aG("div",{role:"none",className:hz,onClick:()=>{var e;null===(e=document.getElementsByTagName("video")[0])||void 0===e||e.play(),t({type:_K.PLAY})},id:"tap-to-play",title:"tap-to-play",children:aG("div",{className:hj,children:[aG("div",{className:hX}),aG("div",{className:h$,children:"Tap to play"})]})}):null,lm=()=>q(R().get(L.VIDEO_SHOW_CTA));hZ="Zz6y0G_download",hq="Zz6y0G_downloadIcon";const lf=()=>{eo().emit({type:"cta",event:sw.DOWNLOAD_BUTTON_CTA})};var lN=()=>lm()?aG("button",{className:hZ,"aria-label":"cta",id:"download-button",type:"button",onClick:lf,children:aG("span",{className:hq})}):null,lD=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return aG("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[aG("defs",{children:aG("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[aG("stop",{offset:"0%","stop-color":"#ffd055"}),aG("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),aG("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),aG("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},ly=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const lR=12,lL=5,lP=0;var lb=({id:e,size:t=12,count:n=5,value:i=0})=>{let r=[],a=new ly;for(let o=0;o<n;o+=1){let n=a.getOffsetPercent(o,i);r.push(aG(lD,{id:e,index:o,size:t,offset:n},o))}return aG("span",{id:e,children:r})},lw=class{getVideoComputedHeight(){let e=ot(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t,n){let i=e.target;if(n.some((e=>null!==i.closest(`#${e}`))))return this.ctaReportingService.emit({type:"cta",event:sw.PERSISTENT_CTA}),void this.sceneEventReportingService.emit(iR.CTA_BUTTON_CLICK);t.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:aU.FSC})}constructor(e=R(),t=aB(),n=aH(),i=aL()){this.tokenService=e,this.ctaReportingService=t,this.fullCtaReportingService=n,this.sceneEventReportingService=i}};hQ="UUyEIq_appDetail",hJ="UUyEIq_appIcon",h0="UUyEIq_persistentSimpleCta",h1="UUyEIq_persistentSimpleCtaBtn",h2="UUyEIq_slideIn";const lV=tG(!1);var lM=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a;return tm((()=>{nu().getNewTimer(t.delay,(()=>{lV.value=!0,aL().emit(iR.CTA_BUTTON_SHOW)})).start()}),[]),aG("div",{id:"persistent-simple-cta",className:sl(h0,lV.value?h2:""),"aria-hidden":"true",onClick:t=>{(new lw).handleClick(t,e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"])},children:[(null===(n=t.appMeta)||void 0===n?void 0:n.icon)&&aG("img",{className:hJ,id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null===(i=t.appMeta)||void 0===i?void 0:i.name)||(null===(r=t.appMeta)||void 0===r?void 0:r.company))&&aG("div",{className:hQ,id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&aG("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&aG("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&aG(lb,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),aG("button",{className:h1,style:(null===(a=t.background)||void 0===a?void 0:a.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})};h3="DwKKSa_appIcon",h5="DwKKSa_appInfo",h4="DwKKSa_persistentRichCta",h6="DwKKSa_persistentRichCtaBtn";var lk=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a,o,s,l,c;tm((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),tm((()=>{aL().emit(iR.CTA_BUTTON_SHOW)}),[]);let d=null===(n=t.appMeta)||void 0===n?void 0:n.isRatingGreaterThanMinimum;return aG("div",{id:"persistent-rich-cta",className:h4,onClick:t=>{(new lw).handleClick(t,e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"])},"aria-hidden":"true",children:[(null===(i=t.appMeta)||void 0===i?void 0:i.icon)&&aG("img",{className:h3,alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null===(r=t.appMeta)||void 0===r?void 0:r.icon}),aG("div",{className:h5,children:[(null===(a=t.appMeta)||void 0===a?void 0:a.name)&&aG("h1",{id:"persistent-rich-cta-app-name",children:null===(o=t.appMeta)||void 0===o?void 0:o.name}),d&&aG(lb,{value:null===(s=t.appMeta)||void 0===s?void 0:s.rating,id:"persistent-rich-cta-app-rating"}),!d&&aG("p",{id:"persistent-rich-cta-company-name",children:null===(l=t.appMeta)||void 0===l?void 0:l.company}),aG("button",{className:h6,type:"button",style:(null===(c=t.background)||void 0===c?void 0:c.color)?{backgroundColor:t.background.color}:{},id:"persistent-rich-cta-button",children:t.text})]})]})};h8="dalDea_persistentRichCtaScreenshots",h7="dalDea_slide";const lU=e=>{e.enabled?aH().emit({type:"fsc",event:aU.FSC}):aB().emit({type:"cta",event:sw.PERSISTENT_CTA})};var lB=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n;let i=new lw,r=tf(null);tm((()=>{i.updateScreenshotsHeight(r)}),[window.innerHeight,window.innerWidth]);let a=null===(n=t.appMeta)||void 0===n?void 0:n.screenshots;return a&&0!==a.length?aG("div",{id:"persistent-rich-cta-screenshots",ref:r,className:h8,onClick:()=>lU(e),"aria-hidden":"true",children:a.map((e=>e&&aG("div",{className:h7,children:aG("img",{alt:e,src:e})},e)))}):null},lH=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;return e===_Y.UNKNOWN?null:!i&&e===_Y.LANDSCAPE&&t===ey.PORTRAIT&&(null!==(a=null===(r=n.getCallToActionConfig().appMeta)||void 0===r?void 0:r.screenshots)&&void 0!==a?a:[]).length>0?aG(e6,{children:[aG(lk,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()}),aG(lB,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})]}):aG(lM,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})};(vX=h9||(h9={})).PERCENTAGE="percentage",vX.ABSOLUTE="absolute";const lW=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},lx=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),lF=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",lG=e=>{let t=r.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t=e.split(".")[1],n=lF(t);return{type:n,tpat_event:e,value:"percentage"===n?lx(t):lW(t)}})),t.bind(e,n),n):[]};var lY=(e,t)=>{let n=R();t.event===iK.PROGRESS&&n.has(L.TPAT_PROGRESS_EVENTS)&&lG(n.get(L.TPAT_PROGRESS_EVENTS)).forEach((n=>{var i,r;if((null===(i=t.data)||void 0===i?void 0:i.currentTime)&&(null===(r=t.data)||void 0===r?void 0:r.duration)){let{currentTime:i,duration:r}=t.data,a=Math.floor(i/r*100),o=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&o>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const lK=tG(0);var lj=(e=sL())=>{let t=e.isEnabled();return ni((()=>{t&&e.setTotalDelaySecondsConsumed(lK.value)})),n=>{t&&(lK.value=e.getTotalCloseButtonDelaySeconds()-n)}};const lX=[n5.CHECKPOINT_0,n5.CHECKPOINT_25,n5.CHECKPOINT_50,n5.CHECKPOINT_75,n5.CHECKPOINT_100],lz=(e,t)=>lX[iz(e,t)],l$=(e,t=eo())=>{let n=[];return lX.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n};var lZ=(e,t,n,i=n8())=>{let r=lz(e,t);l$(iz(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,currentTime:e,duration:t})})),i.emit(r,!0,{progress:n,currentTime:e,duration:t})},lq=(e,t,n,i=of())=>{if((null==n?void 0:n.getSceneType())!==ew.video)return;let r=[eM.START,eM.FIRST_QUARTILE,eM.MIDPOINT,eM.THIRD_QUARTILE,eM.COMPLETE][iz(e,t)];r&&oL(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const lQ=e=>({id:e.getId(),initial:_j.LOADING,context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:_Y.UNKNOWN},states:{[_j.LOADING]:{entry:_X.EMIT_LOAD,on:{[_K.LOAD_FAIL]:{target:_j.LOAD_FAIL_RETRY},[_K.CAN_PLAY]:{target:_j.PLAYING,actions:[_X.SET_CAN_PLAY,_X.REPORT_VIDEO_START]},[_K.PAUSE]:_j.PAUSED,[_K.DURATION_CHANGE]:{actions:_X.EMIT_DURATION_CHANGE},[_K.WAITING]:{actions:_X.EMIT_WAITING},[_K.SUSPEND]:{actions:_X.EMIT_SUSPEND},[_K.PLAYING]:{actions:_X.EMIT_PLAYING}}},[_j.LOAD_FAIL_RETRY]:{on:{[_K.RETRY]:_j.LOADING}},[_j.PLAYING]:{entry:_X.EMIT_PLAY,on:{[_K.MINIMIZE]:{target:_j.PAUSED,actions:[_X.UPDATE_CURRENT_TIME]},[_K.PAUSE]:_j.PAUSED,[_K.END]:_j.ENDED,[_K.AUTO_PLAY_FAIL]:_j.AUTO_PLAY_FAIL,[_K.TIME_UPDATE]:{actions:[_X.UPDATE_PROGRESS,_X.EMIT_PROGRESS,_X.EMIT_CHECKPOINT_TPAT_EVENT,_X.EMIT_SCENE_EVENT,_X.EMIT_TIME_UPDATE]},[_K.SUSPEND]:{actions:_X.EMIT_SUSPEND},[_K.WAITING]:{actions:_X.EMIT_WAITING},[_K.CLOSE]:{target:_j.FINAL,actions:_X.EMIT_CLOSE},[_K.PLAYING]:{actions:_X.EMIT_PLAYING}}},[_j.PAUSED]:{entry:_X.EMIT_PAUSE,on:{[_K.MINIMIZE]:{actions:[_X.UPDATE_CURRENT_TIME]},[_K.CAN_PLAY]:{actions:_X.SET_CAN_PLAY},[_K.MAXIMIZE]:{target:_j.PLAYING,actions:[_X.RESET_CURRENT_TIME]},[_K.PLAY]:_j.PLAYING,[_K.TIME_UPDATE]:{actions:[_X.UPDATE_PROGRESS,_X.EMIT_PROGRESS,_X.EMIT_CHECKPOINT_TPAT_EVENT,_X.EMIT_SCENE_EVENT]},[_K.AUTO_PLAY_FAIL]:_j.AUTO_PLAY_FAIL,[_K.CLOSE]:{target:_j.FINAL,actions:_X.EMIT_CLOSE}}},[_j.AUTO_PLAY_FAIL]:{entry:[_E.STANDBY_TIMERS,_u.PAUSE_INTERVALS],on:{[_K.PLAY]:{target:_j.PLAYING,actions:[_E.WAKE_TIMERS,_u.START_INTERVALS]}}},[_j.ENDED]:{on:{[_K.PLAY]:{target:_j.PLAYING,actions:[_X.INCREMENT_LOOP_COUNT]},[_K.PAUSE]:_j.PAUSED,[_K.CLOSE]:{target:_j.FINAL,actions:_X.EMIT_CLOSE_FULLY_PLAYED}}},[_j.FINAL]:{}}}),lJ={actions:d({[_X.UPDATE_PROGRESS]:g({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[_X.EMIT_PROGRESS]:e=>{void 0!==e.duration&&i$().emit({type:"video",event:iK.PROGRESS,data:{progress:e.progress,currentTime:e.currentTime,duration:e.duration}})},[_X.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&lZ(e.currentTime,e.duration,e.progress)},[_X.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&lq(e.currentTime,e.duration,$())},[_X.EMIT_PAUSE]:()=>{i$().emit({type:"video",event:iK.PAUSE})},[_X.EMIT_PLAY]:e=>{i$().emit({type:"video",event:iK.PLAY,data:{duration:e.duration}})},[_X.REPORT_VIDEO_START]:()=>{let e=ou();e$().emit({name:eL.VIDEO_START,is_muted:e.isMuted()}),aL().emit(iR.LOAD_COMPLETE)},[_X.INCREMENT_LOOP_COUNT]:g({loopCount:e=>e.loopCount+1}),[_X.EMIT_CLOSE]:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;i$().emit({type:"video",event:iK.CLOSE,data:{isVideoFullyPlayed:t,maximumViewingTime:n}})},[_X.EMIT_CLOSE_FULLY_PLAYED]:e=>{i$().emit({type:"video",event:iK.CLOSE,data:{isVideoFullyPlayed:!0,maximumViewingTime:null==e?void 0:e.duration}})},[_X.SET_CAN_PLAY]:g({canPlay:()=>!0,duration:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.duration},videoWidth:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!==(n=t.eventTarget)&&void 0!==n?n:{};return i/r>1?_Y.LANDSCAPE:_Y.PORTRAIT}}),[_X.EMIT_DURATION_CHANGE]:(e,t)=>{var n;eo().emit({type:"video",event:iK.DURATION_CHANGE,data:{duration:null===(n=t.eventTarget)||void 0===n?void 0:n.duration}})},[_X.EMIT_WAITING]:()=>{eo().emit({type:"video",event:iK.WAITING})},[_X.EMIT_SUSPEND]:(e,t)=>{var n;eo().emit({type:"video",event:iK.SUSPEND,data:{readyState:null===(n=t.eventTarget)||void 0===n?void 0:n.readyState}})},[_X.EMIT_PLAYING]:()=>{e$().emit(eL.VIDEO_START_SUCCESS)},[_X.EMIT_TIME_UPDATE]:()=>{eo().emit({type:"video",event:iK.TIME_UPDATE})},[_X.UPDATE_CURRENT_TIME]:g({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[_X.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[_X.EMIT_LOAD]:()=>{aL().emit(iR.LOAD_START)}},nc(),nE())};var l0=e=>o2(lQ(e),lJ),l1=class{getCloseButtonDelaySeconds(e,t){return this.globalTimerService.isEnabled()?this.globalTimerService.getTotalCloseButtonDelaySeconds():void 0===e?6:ei(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?nH.CLOSE:this.globalTimerService.isEnabled()&&this.globalTimerService.getTotalCloseButtonDelaySeconds()>0?nH.SKIP:t}getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig(),i=e.isLastPage();return{delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)}}isShowNextButtonDuringCountDownInBackground(){return!!this.globalTimerService.isEnabled()&&this.globalTimerService.hasReachedVideoPageCloseButtonDelaySeconds()}shouldReplaceShowStoreKitOverlay(){var e;return this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null===(e=this.productViewService)||void 0===e?void 0:e.isDone())}constructor(e=sL(),t=nM(),n=nR(),i=j()){this.globalTimerService=e,this.isStoreKitOverlaySupported=t,this.productViewService=n,this.placementTypeService=i}},l2=(e,t=lE(),n=eo())=>i=>{if([_c.NEXT,_c.LAST_CHANCE_ENDCARD].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:iS.GRANT_REWARD}))return void(null==t||t.send({type:hk.SHOW}));null==t||t.send({type:hk.HIDE})}e(i)},l3=()=>{let e=r.getInstance(),t=lo.getServiceIdentifier();if(e.has(t))return e.get(t)};const l5=(e,t)=>{var n,i;let r=l3();if(r)switch(t.event){case iK.DURATION_CHANGE:{let e=(null===(n=t.data)||void 0===n?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case iK.WAITING:case iK.SUSPEND:r.onVideoBuffering();break;case iK.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case iK.MUTE:case iK.UNMUTE:r.onSoundChange(t.event);break;case iK.PLAY:case iK.PAUSE:r.onVideoStateChanged(t.event);break;case iK.CLOSE:(null===(i=t.data)||void 0===i?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case sw.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case _Q.REMOVE_HANDLER:nm().removeEventHandler(t.type,l5)}};Se="W6zMza_dialog",St="W6zMza_dialogActions",Sn="W6zMza_dialogBody",Si="W6zMza_dialogBox",Sr="W6zMza_dialogContent",Sa="W6zMza_dialogText",So="W6zMza_dialogTitle";var l4=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>aG("div",{id:null!=i?i:"dialog",role:"dialog",className:Si,style:{visibility:n?"visible":"hidden"},children:aG("div",{className:Se,children:aG("div",{className:Sr,children:[aG("div",{className:So,children:e}),aG("div",{className:Sn,children:[aG("div",{className:Sa,children:t}),aG("div",{className:St,children:r})]})]})})}),l6=class{getTitleText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_TITLE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close this video?":"Close this ad?"}getBodyText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_BODY_TEXT))&&void 0!==e?e:`Are you sure you want to skip this ${this.hasFollowUpAdExperience?"video":"ad"}? Finish watching to claim your reward.`}getCloseText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CLOSE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close Video":"Close Ad"}getContinueText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CONTINUE_TEXT))&&void 0!==e?e:"Continue"}constructor(e,t=R(),n=$()){var i;this.tokenService=t,this.hasFollowUpAdExperience=(null==n||null===(i=n.next)||void 0===i?void 0:i.getSceneType())!==ew.closed||e}},l8=()=>{let[e,t]=o2(lc(),lu);return[e,t]};Ss="eDiOmG_continueIcon",Sl="eDiOmG_primaryButton",Sd="eDiOmG_secondaryButton";var l7=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=l8(),r=new l6(t);return aG(l4,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(hM.SHOWING),children:aG(e6,{children:[aG("div",{className:Sl,children:aG("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:hk.HIDE})},children:[r.getContinueText(),aG("span",{className:Ss,id:"incentivized-dialog-continue-icon"})]})}),aG("div",{className:Sd,children:aG("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:hk.CLOSE}),e({type:t?_c.LAST_CHANCE_ENDCARD:_c.NEXT})},children:r.getCloseText()})})]})})};const l9=tG(!1),de=tG(!1);var dt=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,isFreeForm:i,isComposite:r=!1,showVideoBlur:a=!1})=>{let o=new l1,[s,l]=l0(e),c=Q()&&!i?l2(t):t,d=e.getStoreKitOverlayAutoShowConfig().enabled;sg(e.getId(),e.getAppStoreOnDelayConfig(),s.value.context.canPlay),sp(e.getStoreKitOverlayAutoShowConfig(),de.value),sO("video",lY),s2(l9.value),sU(t),oR(),sK(e);let u=lj();return sF({callToActionConfig:l9.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),sx({fullScreenClickConfig:l9.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),sO("cta",((e,t)=>{l9.value||l5(e,t)})),sO("fsc",((e,t)=>{l9.value||l5(e,t)})),aG(e6,{children:[aG(l7,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aG(sk,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{l9.value=e}}),aG(sv,{config:e.getFullScreenClickConfig(),children:[s.value.context.canPlay&&n&&!l9.value&&aG(sR,{config:o.getCloseButtonConfig(e,s.value.context.duration),handleTimerUpdate:u,showNextButtonDuringCountDownInBackground:o.isShowNextButtonDuringCountDownInBackground(),sendAdEvent:c,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aG(lA,{isVisible:s.value.matches(_j.AUTO_PLAY_FAIL),sendVideoEvent:l}),aG(lO,{isInLine:j().isInLine()||a}),aG(lC,{scene:e,videoState:s,sendVideoEvent:l,sendAdEvent:t,onMetadataLoaded:()=>{de.value=!0}}),(!e.getCallToActionConfig().isPersistent||d)&&aG(sI,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:aG(lN,{})}),e.getCallToActionConfig().isPersistent&&!d&&s.value.context.canPlay&&aG(lH,{scene:e,videoOrientation:s.value.context.orientation,viewportOrientation:K().getOrientation(),disableRichCta:r})]})]})};const dn=e=>4===e.length?e:dn(`0${e}`),di=e=>e.split("").map((e=>dn(parseInt(e,16).toString(2)))).join("").split("");var dr=class{constructor(e=R()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(L.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return di(e)}}};Sc="_0zGmtq_bit",Su="_0zGmtq_leading",SE="_0zGmtq_one",Sv="_0zGmtq_watermark",S_="_0zGmtq_zero";const da=(e,t)=>`bit-${e}-${t}`;var ds=()=>{let e=new dr;return j().isFullscreen()?aG("div",{className:Sv,id:"watermark",children:[aG("div",{className:`${SE}  ${Su} ${Sc}`}),e.getBits().map(((e,t)=>aG("div",{className:`${Sc} ${"0"===e?S_:SE}`,id:da(e,t)},da(e,t))))]}):null};Sh="m2_mMq_privacyButton";const dl={[P.ACCELERATE]:"#96633d",[P.EDSP]:"#853d96",[P.UNKNOWN]:"#333"};var dd=({handleClick:e,adSource:t})=>aG("button",{type:"button",id:sn,title:"Liftoff Privacy",className:Sh,onClick:e,"aria-label":"Liftoff Privacy",children:aG("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[aG("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:dl[null!=t?t:P.UNKNOWN],opacity:".6",strokeWidth:"0"}),aG("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),aG("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),aG("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),aG("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})});(vz=SS||(SS={}))[vz.LEFT=0]="LEFT",vz[vz.RIGHT=1]="RIGHT",vz[vz.UP=2]="UP",vz[vz.DOWN=3]="DOWN",(v$=ST||(ST={}))[v$.HORIZONTAL=0]="HORIZONTAL",v$[v$.VERTICAL=1]="VERTICAL";const dc=tG(0),du=tG(0),dE=tG(!1),dv=tG(0);var d_=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=tf(null),o=(e,t)=>Math.abs(e)>Math.abs(t),s=(e,t)=>o(e,t)?e>0?1:0:t>0?3:2,l=(e,t)=>o(e,t)?Math.abs(e):Math.abs(t),c=(e,t)=>{let n=e-dc.value,i=t-du.value;return{Direction:s(n,i),Orientation:o(n,i)?0:1,Distance:l(n,i),DeltaX:n,DeltaY:i}};return aG("div",{ref:a,title:"swipe",onTouchStart:e=>{dE.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),dc.value=t,du.value=n,dv.value=Date.now()},onTouchEnd:e=>{var o;let s=null==a||null===(o=a.current)||void 0===o?void 0:o.childNodes;if(!dE||!s)return;let{endX:l,endY:d}=(e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!==(i=null===(t=e.detail)||void 0===t?void 0:t.clientX)&&void 0!==i?i:0,endY:null!==(r=null===(n=e.detail)||void 0===n?void 0:n.clientY)&&void 0!==r?r:0}})(e),u=c(l,d),E=s[0];if(((e,t)=>e.Distance>=.05*t)(u,0===u.Orientation?E.clientWidth:E.clientHeight)){switch(u.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}dE.value=!1}},children:e})};Sg="FbTWOG_closeIcon",Sp="FbTWOG_debug",SC="FbTWOG_displayNone",SI="FbTWOG_hasEventMetadata",SO="FbTWOG_hide",SA="FbTWOG_id",Sm="FbTWOG_idContent",Sf="FbTWOG_idName",SN="FbTWOG_ids",SD="FbTWOG_mask",Sy="FbTWOG_popupBody",SR="FbTWOG_popupContainer",SL="FbTWOG_popupContainerDisplay",SP="FbTWOG_popupHeader",Sb="FbTWOG_popupTitle",Sw="FbTWOG_privacyPopup",SV="FbTWOG_readMore",SM="FbTWOG_show";var dh=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,allowDebug:a=!1})=>{let o=t6([]);return sO("debug",((e,t)=>{var n;a&&(null===(n=t.data)||void 0===n?void 0:n.message)&&(o.value=[...o.value,t.data.message])})),aG("div",{className:sl(SR,e?SL:""),id:st,children:[aG("div",{className:e?SD:SC,id:"privacy-popup-mask",onClick:n,role:"none"}),aG(d_,{onSwipeDown:n,children:aG("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:sl(Sw,e?SM:SO),children:[aG("div",{className:SP,children:[aG("div",{className:Sb,title:"privacy-popup-title",children:"Privacy Policy"}),aG("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:aG("span",{className:Sg})})]}),aG("div",{className:Sy,children:"Liftoff, Inc. understands the importance of privacy. Liftoff operates a mobile ad network (the 'Ad Network' or the 'Services') through which Liftoff displays targeted, contextual ads."}),aG("button",{type:"button",className:SV,"aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy & Ad Information"}),aG("div",{className:sl(SN,i||r?SI:""),children:[i&&aG("div",{className:SA,id:"privacy-drawer-creative-id",children:[aG("div",{className:Sf,children:"Creative ID"}),aG("div",{className:Sm,children:i})]}),r&&aG("div",{className:SA,id:"privacy-drawer-event-id",children:[aG("div",{className:Sf,children:"Event ID"}),aG("div",{className:Sm,children:r})]})]}),o.value.length>0&&aG("div",{className:Sp,children:[aG("h3",{children:"Debug Messages"}),aG("div",{className:"debug-container",children:o.value.map((e=>aG("div",{className:"debug-message",children:e},e)))})]})]})})]})},dS=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!==(e=this.tokenService.get(L.CREATIVE_ID))&&void 0!==e?e:""}getEventId(){var e;return null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:""}handleDrawerClose(e){e({type:_c.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:_c.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:_c.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout((()=>{e({type:_c.OPEN_PRIVACY_PAGE})}),50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=R(),t=j()){this.tokenService=e,this.placementTypeService=t}};const dT=tG(!1);var dg=({sendAdEvent:e,privacyService:t=new dS,customMraidEventReportingService:n=o6(),allowDebug:i=!1})=>{let r=()=>{dT.value=!1,t.handleDrawerClose(e)};return sO("custom-mraid",((e,t)=>{t.event===o4.CLOSE&&dT&&r()}),n),aG(e6,{children:[aG(dd,{handleClick:()=>{t.handleIconClick(e),dT.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&aG(dh,{isOpen:dT.value,closeHandler:r,handleReadMoreClick:()=>{dT.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),allowDebug:i})]})},dp=function(e){let t=tf(0),n=tf(0);return tm((()=>{let i=i=>{let r=Date.now();r-n.current>800&&(t.current=0),t.current+=1,n.current=r;let{clientX:a,clientY:o}=i;t.current>=3&&(e(a,o),t.current=0)};return window.addEventListener("pointerdown",i),()=>window.removeEventListener("pointerdown",i)}),[e]),null};const dC=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null===(n=e.nodeValue)||void 0===n?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?aG(t,{sceneId:a["scene-id"]||""}):e5(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)};var dI=({htmlString:e,VmComponent:t})=>{let[n,i]=(tv=1,tA(tb,null));return tm((()=>{i(dC(e,t))}),[e]),n},dO=e=>{if(/Android/i.test(e.navigator.userAgent)){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},dA=(e=j(),t=R())=>t.has(L.ADM_HTML)&&(e.isBanner()||e.isMrec()||e.isInLine()),dm=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:null==t||null===(n=t.error)||void 0===n?void 0:n.message,stack:null==t||null===(i=t.error)||void 0===i?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))};(vZ=Sk||(Sk={})).ADD_EVENT_LISTENER="addEventListener",vZ.CACHE_FILE="cacheFile",vZ.CLOSE="close",vZ.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",vZ.EXIT_ALTERNATIVE="exitAlternative",vZ.FETCH_FILE="fetchFile",vZ.GET_CURRENT_POSITION="getCurrentPosition",vZ.GET_DEFAULT_POSITION="getDefaultPosition",vZ.GET_EXPAND_PROPERTIES="getExpandProperties",vZ.GET_MAX_SIZE="getMaxSize",vZ.GET_PLACEMENT_TYPE="getPlacementType",vZ.GET_SCREEN_SIZE="getScreenSize",vZ.GET_STATE="getState",vZ.GET_VIEWABLE="getViewable",vZ.GRANT_REWARD="grantReward",vZ.IS_VIEWABLE="isViewable",vZ.NEXT="next",vZ.OPEN="open",vZ.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",vZ.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",vZ.REMOVE_EVENT_LISTENER="removeEventListener",vZ.SET_ORIENTATION_PROPERTIES="setOrientationProperties",vZ.SHOW_ALTERNATIVE="showAlternative",(vq=SU||(SU={})).CREATE_CALENDAR_EVENT="createCalendarEvent",vq.EXPAND="expand",vq.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",vq.GET_CONSENT_BODY_TEXT="getConsentBodyText",vq.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",vq.GET_CONSENT_REQUIRED="getConsentRequired",vq.GET_CONSENT_TITLE_TEXT="getConsentTitleText",vq.GET_ORIENTATION_PROPERTIES="getOrientationProperties",vq.GET_RESIZE_PROPERTIES="getResizeProperties",vq.GET_VERSION="getVersion",vq.PLAY_VIDEO="playVideo",vq.RESIZE="resize",vq.SET_EXPAND_PROPERTIES="setExpandProperties",vq.SET_RESIZE_PROPERTIES="setResizeProperties",vq.STORE_PICTURE="storePicture",vq.USE_CUSTOM_CLOSE="useCustomClose";var df=()=>({[SU.CREATE_CALENDAR_EVENT]:()=>{},[SU.EXPAND]:()=>{},[SU.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>{},[SU.GET_CONSENT_BODY_TEXT]:()=>{},[SU.GET_CONSENT_DENY_BUTTON_TEXT]:()=>{},[SU.GET_CONSENT_REQUIRED]:()=>{},[SU.GET_CONSENT_TITLE_TEXT]:()=>{},[SU.GET_ORIENTATION_PROPERTIES]:()=>{},[SU.GET_RESIZE_PROPERTIES]:()=>{},[SU.GET_VERSION]:()=>()=>"1.0",[SU.PLAY_VIDEO]:()=>{},[SU.RESIZE]:()=>{},[SU.SET_EXPAND_PROPERTIES]:()=>{},[SU.SET_RESIZE_PROPERTIES]:()=>{},[SU.STORE_PICTURE]:()=>{},[SU.USE_CUSTOM_CLOSE]:()=>()=>!1}),dN=()=>({width:window.innerWidth,height:window.innerHeight}),dD=()=>C(d({},dN()),{useCustomClose:!1,isModal:!1}),dy=()=>d({x:0,y:0},dN());const dR=new w("5.0.0");var dL=(e=K())=>e.getMraidVersion().isGreaterThanOrEqualTo(dR);const dP=(e=e$())=>e.getEventCount(eL.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND)>=2;var db=async(e,t=nR(),n=dP(),i=dL(),r=e$())=>{if(n)return!1;if(r.emit(eL.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND),null==t||t.open(),i)try{await aD((()=>null==t?void 0:t.isOpen()),e)}catch(e){return!1}return!0},dw=e=>!!e&&!![ew.video,ew.image,ew.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,dV=()=>({[Sk.CACHE_FILE]:(e,t,n=s8)=>(e,t)=>{var i;return!!(e&&t&&"string"==typeof e&&e.toLowerCase().startsWith("http")&&ArrayBuffer.isView(t))&&(null===(i=n())||void 0===i||i.addRecord({url:e,data:t}),!0)},[Sk.EXIT_ALTERNATIVE]:(e,t,n=o1,i=oc,r=dw)=>()=>{if(oU.getValue().isLastChanceEndcardOverlayShowing)return;let e=$(),t={type:_c.NEXT};e&&(i(e.getId(),e.getSceneType()),r(e)&&(t={type:_c.LAST_CHANCE_ENDCARD})),n().send(t)},[Sk.FETCH_FILE]:(e,t,n=s8)=>async e=>{var t;if(!e||"string"!=typeof e||!e.toLowerCase().startsWith("http"))return;let i=await(null===(t=n())||void 0===t?void 0:t.get(e));return null==i?void 0:i.data},[Sk.GRANT_REWARD]:(e,t,n=y,i=e$(),r=n8())=>{let a=n().getMraidBridgeExt();return i.emit(eL.GRANT_REWARD),null==a||a.notifySuccessfulViewAd(),r.emit(n5.REWARD_GRANTED,!0),()=>null},[Sk.NEXT]:(e,t,n=o1)=>e=>{oU.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[Sk.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t,n=nM,i=nI)=>async()=>{if(!n())return!1;let e=i();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:_T.OFF});try{return await aD((()=>e.isOpen()),3e3),!0}catch(e){return!1}},[Sk.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t,n=ng,i=nR,r=db)=>async()=>{if(!n())return!1;let e=i();return null!=e&&!!e.isOpen()||(null==e||e.open(),await r(3e3))},[Sk.SHOW_ALTERNATIVE]:(e,t,n=o1)=>e=>{oU.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[Sk.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t,n=nM,i=nI)=>async()=>{if(!n())return!1;let e=i();if(!e.isOpen())return!0;e.close();try{return await aD((()=>!e.isOpen()),3e3),!0}catch(e){return!1}}}),dM=()=>{if(dA())return!1;let e=K();if(e.getOperatingSystem()===eD.Android||e.getOperatingSystem()===eD.Unknown)return!1;let t=new w("6.12.0");return!e.getSdkVersion().isLessThanOrEqualTo(t)},dk=(vQ=e=>{aB().emit({type:"cta",event:sw.ENDCARD_CTA,data:{ctaUrl:e}})},t=!1,function(...n){!t&&(e||(vQ.apply(this,n),t=!0,e=window.setTimeout((()=>{t=!1,e=void 0}),300)))}),dU=()=>d({[Sk.CLOSE]:(e,t,n=o1)=>()=>n().send(_c.CLOSE),[Sk.ADD_EVENT_LISTENER]:(e,t)=>(e,n,i=a5)=>{i().addEventListener(t,e,n)},[Sk.IS_VIEWABLE]:(e,t,n=aJ,i=a2)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[Sk.GET_VIEWABLE]:(e,t,n=aJ,i=a2)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[Sk.GET_CURRENT_POSITION]:()=>dy,[Sk.GET_DEFAULT_POSITION]:()=>dy,[Sk.GET_EXPAND_PROPERTIES]:()=>dD,[Sk.GET_MAX_SIZE]:()=>dN,[Sk.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[Sk.GET_SCREEN_SIZE]:()=>dN,[Sk.GET_STATE]:e=>e.getState.bind(e),[Sk.OPEN]:(e,t,n=dA,i=e$,r=dk)=>n()?e=>0===i().getEventCount(eL.ENDCARD_CLICK)?null:r(e):e=>{r(e,"CTA")},[Sk.REMOVE_EVENT_LISTENER]:(e,t)=>(e,n,i=a5)=>{i().removeEventListener(t,e,n)},[Sk.SET_ORIENTATION_PROPERTIES]:(e,t,n=dM)=>n()?e.setOrientationProperties.bind(e):()=>null},dV()),dB=()=>C(d({},dU(),df()),{supports:()=>e=>Object.values(Sk).includes(e)}),dH=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e,t=y().getMraid(),n=dB(),i=e$()){this.sceneId=e,this.originalMraid=t,this.commandHandlers=n,this.observabilityEventReportingService=i,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t,sceneId:n}=this;return{get:(i,r)=>e[r]?e[r](i,n):i[r]?i[r]:(t.emit({name:eL.UNKNOWN_MRAID_COMMAND,value:r}),()=>!1)}}}},dW=(e,t=aL())=>{e.addEventListener("load",(()=>{t.emit(iR.LOAD_COMPLETE)}))},dx=(e,t,n,i=s1,r=oL)=>{e&&e.document.addEventListener(sj(),(e=>{(null==e?void 0:e.isTrusted)&&r(eM.CLICK_THROUGH,n,t),i(e,!1)}),!0)};(vJ=SB||(SB={}))[vJ.MUTE=0]="MUTE",vJ[vJ.UNMUTE=1]="UNMUTE";var dF=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(e.shouldMute?0:1,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}};(v0=SH||(SH={})).AUDIO="audio",v0.VIDEO="video",v0.IFRAME="iframe",v0.DEFAULT="default";var dG=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},dY=class{isNodeAllowed(e){return[SH.AUDIO,SH.VIDEO].includes(dG(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class dK{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;dK.isWindowAccessible(e.contentWindow)&&dK.interceptAllMediaElements(e.contentWindow,this.mute);let n=!dK.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:rt.NESTED_IFRAME_TYPE,data:{nested_iframe_type:n?_B.NESTED_IFRAME_WITHOUT_CORS:_B.NESTED_IFRAME_WITH_CORS,scene_id:null===(t=this.injectedGetCurrentScene())||void 0===t?void 0:t.getId()}})}handleNewNode(e){dG(e)===SH.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null===(n=t.mute)||void 0===n?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null===(n=t.unmute)||void 0===n?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=re(),r=$){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}dK.instances=new Map,dK.hasIframeCrossOriginUrl=e=>{var t;return null===(t=e.src)||void 0===t?void 0:t.toLowerCase().startsWith("http")},dK.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},dK.interceptAllMediaElements=(e,t,n=re(),i=$)=>{let r=new dK(e,[new dY(e),new dF(e,t)],t,n,i);dK.instances.set(e,r)},dK.muteAllMedias=()=>{dK.instances.forEach((e=>{dK.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},dK.unmuteAllMedias=()=>{dK.instances.forEach((e=>{dK.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var dj=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},dX=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},dz=(e,t)=>{e.document.addEventListener("click",(e=>{let n=e.target.closest("a");if(n){if(!e.isTrusted)return void e.preventDefault();n.href&&(e.preventDefault(),t(n.href))}}),{capture:!0})},d$=e=>null!==e.contentDocument;class dZ{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){d$(e)&&new dZ(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}handleNewIframe(e){dG(e)===SH.IFRAME&&dZ.init(e,this.interceptors)}observeNestedIframes(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;t.forEach((e=>{this.handleNewIframe(e)}))}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t}}var dq=class extends sm{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=1===this.scene.index;return C(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay})}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,dj(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),dj(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=e=>dk(e);let o=e.target.closest("a");(null==o||null===(i=o.href)||void 0===i?void 0:i.startsWith("http"))?e.preventDefault():null===(r=(a=e.target).click)||void 0===r||r.call(a)}},i=()=>{var e;"loading"!==(null===(e=t.document)||void 0===e?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.injectedIsHtmlNonFullscreen?this.initMraidInIframeForNonFullscreen(e):this.initMraidInIframeForFullscreen(e.contentWindow)}getLastChanceEndcardConfig(e,t){let n=this.scene.getLastChanceEndcardConfig();return n.enabled&&e?C(d({},n),{enabled:t}):n}getInsertIframeTags(e){return`<base target="_parent" ${e?`href=${e}`:""}><style>body {margin: 0;padding: 0;overflow: hidden;}</style>`}loadNestedIframe(e,t){let n=e.querySelector("iframe");if(n&&(null==t?void 0:t.content)){let{content:e,baseUrl:i}=t;n.width="100%",n.height="100%";let r=this.getInsertIframeTags(i);this.loadIframe(n,e,r)}}async loadIframe(e,t,n){try{let i=e.contentWindow,r=null==i?void 0:i.document;dO(i),dX(i),this.injectMethodToIframe(e),r.open(),this.injectedAddErrorListenerToIframe(i),this.injectedAddLoadListenerToIframe(i),r.write(n+t),r.close(),dZ.init(e,[this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),dz(i,dk),this.injectedInterceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t,r=this.getInsertIframeTags();await this.loadIframe(e.current,n,r);let a=e.current.contentWindow;this.loadNestedIframe(a.document,i)}}constructor(e,t=il(),n=j(),i=new dH(e.getId()),r=sL(),a=ou(),o=dA(),s=dm,l=dW,c=dK.interceptAllMediaElements){super(n),this.scene=e,this.errorLoggingService=t,this.placementTypeService=n,this.proxyMraidService=i,this.globalTimerService=r,this.muteService=a,this.injectedIsHtmlNonFullscreen=o,this.injectedAddErrorListenerToIframe=s,this.injectedAddLoadListenerToIframe=l,this.injectedInterceptAllMediaElements=c,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{if(this.scene.isAlternative())return;let t=this.scene;dx(e,t.getTrackingEventMapConfig(),t.getId())}}},dQ=(e=ou())=>{tm((()=>{e.isMuted()?dK.muteAllMedias():dK.unmuteAllMedias()}),[e.getMutedSignal().value])};SW="oAV7cW_endcard",Sx="oAV7cW_endcardIframe";var dJ=({sendAdEvent:e,htmlService:t,scene:n})=>{let i=tf(null),[r,a]=(tv=1,tA(tb,!1));return tm((()=>{r&&requestAnimationFrame((async()=>{t.getIframeContentData(n).then((e=>{t.updateIframeContent(i,e)}))}))}),[r]),dQ(),aG("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:_c.PRIVACY_LOGO_SHOW}),a(!0)},ref:i,className:Sx,allow:"autoplay",scrolling:"no",frameBorder:"0"})},d0=()=>{let e=r.getInstance(),t=oO.getServiceIdentifier();if(e.has(t))return e.get(t)};const d1=(e,t)=>{let n=d0();if(n)switch(t.event){case sw.ENDCARD_CTA:n.onCtaClick();break;case _Q.REMOVE_HANDLER:nm().removeEventHandler(t.type,d1)}};(SF||(SF={})).PRELOAD="preload";var d2=SF;const d3=e=>Object.values(d2).includes(e);class d5 extends es{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&d3(e)?{type:"debug",event:e}:"object"==typeof e?e:void 0}}var d4=e=>new d5(null!=e?e:eo());const d6=(e,t)=>({id:t,context:{id:t,preloadSuccess:!1},initial:e?_s.INITIAL:_s.SHOWING,states:{[_s.INITIAL]:{on:{[_o.SHOW]:{target:_s.SHOWING},[_o.PRELOAD]:{target:_s.PRELOADING,actions:[_l.INITIALIZE_PRELOAD]}}},[_s.PRELOADING]:{on:{[_o.SHOW]:{target:_s.SHOWING,actions:[_l.MARK_PRELOAD_SUCCESS,_l.EMIT_SHOW,_l.TRIGGER_VIEWABLE_CHANGE]},[_o.CANCEL_PRELOAD]:{target:_s.INITIAL,actions:[_l.CANCEL_PRELOAD,_l.FLUSH_MRAID_EVENTS]}}},[_s.SHOWING]:{}}}),d8=(e=a5(),t=aJ(),n=aL())=>({actions:{[_l.INITIALIZE_PRELOAD]:()=>{n.emit(iR.PRELOAD_START)},[_l.FLUSH_MRAID_EVENTS]:()=>{let t=oP(o1().state);e.flushAllEventCallbacks(t.getId())},[_l.EMIT_SHOW]:e=>{n.emit(iR.PRELOAD_COMPLETE),d4().emit(d2.PRELOAD,!1,{message:`preloading finished succesfully for ${e.id}`})},[_l.CANCEL_PRELOAD]:e=>{n.emit(iR.PRELOAD_CANCELLED),d4().emit(d2.PRELOAD,!1,{message:`preloading got cancelled for ${e.id}`})},[_l.TRIGGER_VIEWABLE_CHANGE]:()=>{let n=oP(o1().state);e.triggerEvent(n.getId(),_Z.VIEWABLE_CHANGE,t.isViewable())},[_l.MARK_PRELOAD_SUCCESS]:g({preloadSuccess:!0})}});var d7=(e,t)=>o2(d6(e,t),d8());(v1=SG||(SG={}))[v1.Eligible=1]="Eligible",v1[v1.Not_Eligible=2]="Not_Eligible",v1[v1.Started=3]="Started",v1[v1.Canceled=4]="Canceled";var d9=(e,t=a2())=>{let n=t6(e?1:2);return[e=>{1===n.value&&(n.value=3,t.startPreloading(e))},e=>{3===n.value&&(n.value=4,t.cancelPreloading(e))}]},ce=(e=e$())=>{let t=t6(e.getEventCount(eL.ENDCARD_CLICK)>0);return sO("observability",((e,n)=>{n.data.name===eL.ENDCARD_CLICK&&(t.value=!0)}),e),[t.value]},ct=()=>{tm((()=>{let e=e=>{e.preventDefault=()=>{},e.stopImmediatePropagation=()=>{},e.stopPropagation=()=>{}};return window.addEventListener("touchstart",e),window.addEventListener("touchend",e),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchend",e)}}),[])};const cn=tG(!1),ci=(e,t)=>{if(t)return cn.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var cr=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1,startPreloading:a=!1,customClassName:o})=>{let s=new dq(e),[l]=d7(r,e.getId()),c=l.value.matches(_s.SHOWING);sg(e.getId(),e.getAppStoreOnDelayConfig(),!0,c),sp(e.getStoreKitOverlayAutoShowConfig(),c),sF({callToActionConfig:ci(e,c),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sx({fullScreenClickConfig:c&&cn.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sO("cta",((e,t)=>{c&&!cn.value&&d1(e,t)}));let[d,u]=d9(r);sO("video",((t,n)=>{if(r)switch(n.event){case iK.SUSPEND:var i,a;(null===(i=n.data)||void 0===i?void 0:i.readyState)&&(null===(a=n.data)||void 0===a?void 0:a.readyState)<HTMLMediaElement.HAVE_FUTURE_DATA&&u(e.getId());break;case iK.WAITING:u(e.getId());break;case iK.CAN_PLAY_THROUGH:d(e.getId())}})),sU(t,c),oR(c),sK(e,c),s2(cn.value,c),tm((()=>{c&&t({type:_c.CREATIVE_VIEW})}),[c]),tm((()=>{a&&d(e.getId())}),[e,a]);let[E]=ce(),_=s.getLastChanceEndcardConfig(aa.isEndcardOnly(),E);return ct(),l.value.matches(_s.INITIAL)?null:aG(e6,{children:[c&&aG(sk,{config:_,sendAdEvent:t,onVisibilityChange:e=>{cn.value=e}}),aG("div",{className:null!=o?o:SW,id:e.getId(),style:{visibility:l.value.matches(_s.PRELOADING)?"hidden":""},children:[i&&!cn.value&&aG(sR,{sendAdEvent:t,config:s.getCloseButtonConfig(),showLastChanceEndcard:_.enabled}),n&&aG(dJ,{sendAdEvent:t,htmlService:s,scene:e})]})]})},ca=class extends nQ{getTransitions(){let e=super.getTransitions();return e.push(nJ,n0,n1,nj,nX,nz,n$),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return V(this.html)}getSceneType(){return this.sceneType}addScenes(e){this.scenes.push(...e)}getScenes(){return this.scenes}getSceneById(e){return this.scenes.find((t=>t.getId()===e))}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nH.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfig:i,lastChanceEndcardConfig:r,placementTypeService:a=j()}){super({isFullscreen:null==a?void 0:a.isFullscreen()}),this.scenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfig=i,this.lastChanceEndcardConfig=r,this.placementTypeService=a,this.sceneType=ew.composite}},co=(e,t=$)=>tN((()=>{let n=t();return n instanceof ca&&n.getSceneType()===ew.composite&&n.getScenes().find((t=>t.getId()===e))||null}),[e]),cs=(e=o1)=>tN((()=>e().send),[]);SY="_37VDnG_component",SK="_37VDnG_composite",Sj="_37VDnG_compositeHtml",SX="_37VDnG_compositeImage";var cl=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=co(e,t),r=cs(n);return aG("div",{className:SY,children:[aI(i)&&aG(cr,{scene:i,sendAdEvent:r,shouldRenderIFrame:!0,isCloseButtonVisible:!1,eligibleToPreload:!1,customClassName:Sj,startPreloading:!1},i.getId()),i instanceof aa&&i.getSceneType()===ew.image&&aG(s5,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,customClassName:SX,useBackgroundImage:!0},i.getId()),aC(i)&&aG(dt,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,isFreeForm:!0,isComposite:!0,showVideoBlur:!0},i.getId())]})};const cd=tG(!1);var cc=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{sU(t),oR(),sK(e);let i=tN((()=>e.getDecodedHtml()),[e]);return aG("div",{className:SK,children:[aG(sk,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{cd.value=e}}),n&&!cd.value&&aG(sR,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),e&&e.getSceneType()===ew.composite&&aG("div",{className:SK,children:aG(dI,{htmlString:i,VmComponent:cl})})]})},cu=(e=oE())=>{let t=e.getVideoInterpreter(),n=t6(null==t?void 0:t.state);return tm((()=>{if(!t)return()=>{};let{state:e,status:i}=t;i!==eO.Running&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]},cE=()=>eo();Sz="i0Mp0G_animatingVideo",S$="i0Mp0G_animationEnded",SZ="i0Mp0G_pictureInPictureContainer",Sq="i0Mp0G_slideLeft",SQ="i0Mp0G_slideUp";var cv=({isPrivacyDrawerOpen:e,service:t=oE(),pictureInPictureReportingService:n=cE()})=>{var i;let r=tf(null),[a]=cu(t),o=tN((()=>a0()),[]),s=t6(!1),l=t6(!1),c=t6(!1),d=e=>{e===SS.LEFT&&(c.value=!0),e===SS.UP&&(l.value=!0)},u=()=>{n.emit({type:"picture-in-picture",event:nN.CLOSE,fireOnlyOnce:!0})};tm((()=>{let e=t.getVideoElement(),n=r.current;e&&n&&(n.appendChild(e),s.value=!0,e.onended=()=>{u()})}),[]);let E=(n,i)=>{t.videoAdViewableChange(n,i,e)};return tm((()=>(o.addEventHandler("viewability",E),()=>{o.removeEventHandler("viewability",E)})),[o]),tm((()=>{var e;let n=t.getVideoElement();if(n)switch(null===(e=a.value)||void 0===e?void 0:e.value){case _j.PLAYING:n.play();break;case _j.PAUSED:n.pause()}}),[null===(i=a.value)||void 0===i?void 0:i.value]),tm((()=>{r.current&&(t.isPortrait()?r.current.style.height="auto":r.current.style.width="auto")}),[t.isPortrait()]),sx(t.getFullScreenCallToActionEventHandlerProps()),aG(d_,{onSwipeUp:()=>d(SS.UP),onSwipeLeft:()=>d(SS.LEFT),children:aG("button",{type:"button","aria-label":"Picture in Picture",ref:r,onClick:()=>t.clickHandler(),onAnimationEnd:()=>{s.value=!1},onTransitionEnd:u,className:sl(SZ,`${s.value?Sz:S$}`,`${c.value?Sq:""}`,`${l.value?SQ:""}`)})})},c_=({isCloseButtonVisible:e,scene:t,sendEvent:n,shouldRenderIFrame:i,preloadService:r=a2()})=>{let a=r.getHTMLScenesToPreload(t);return(null==a?void 0:a.length)?aG("div",{children:a.map((e=>aG(cr,{scene:e.scene,sendAdEvent:n,shouldRenderIFrame:e.shouldRenderIFrame,isCloseButtonVisible:e.isCloseButtonVisible,eligibleToPreload:!0,startPreloading:e.startPreloading},e.scene.getId())))}):aI(t)&&aG(cr,{scene:t,sendAdEvent:n,shouldRenderIFrame:i,isCloseButtonVisible:e,eligibleToPreload:!1,startPreloading:!1},t.getId())};SJ="gRz7DW_ad";var ch=()=>{let[e,t]=o9();dp(((e,t)=>{let{scene:n}=z.getValue();e$().emit({name:eL.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})}));let{isCloseButtonVisible:n,isPrivacyButtonVisible:i,isPrivacyDrawerOpen:r,shouldRenderIFrame:a,shouldRenderPictureInPicture:o,isFreeForm:s,allowDebug:l}=e.value.context,c=oP(e.value),d=i&&c.getSceneType()!==ew.closed;return aG("div",{id:SJ,children:aG(sr,{children:[aG(ds,{}),o&&aG(cv,{isPrivacyDrawerOpen:r}),d&&aG(dg,{sendAdEvent:t,allowDebug:l}),c.getSceneType()===ew.gdpr&&aG(so,{sendAdEvent:t}),c.getSceneType()===ew.image&&aG(s5,{scene:c,sendAdEvent:t,isCloseButtonVisible:n},c.getId()),c.getSceneType()===ew.video&&aG(dt,{scene:c,sendAdEvent:t,isCloseButtonVisible:n,isFreeForm:s},c.getId()),aG(c_,{isCloseButtonVisible:n,scene:c,sendEvent:t,shouldRenderIFrame:a}),c.getSceneType()===ew.composite&&aG(cc,{scene:c,sendAdEvent:t,isCloseButtonVisible:n},c.getId()),c.getSceneType()===ew.closed&&aG(si,{})]})})},cS=(e=o1(),t=o8(),n=o7,i=oP)=>{let r=i(e.state);z.setValue({scene:r}),t.start(r),n(r),e.start()},cT=class extends a{findObservabilityActivityEvent(e){return t=>{var n;if("eventType"in t.activity&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===e)return t.activity}}findSceneEventActivityEvent(e,t){return n=>{var i;if("eventType"in n.activity&&"scene-event"===n.activity.eventType&&n.activity.name===e&&(null===(i=n.activity.data)||void 0===i?void 0:i.scene_type)===t)return n.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(eL.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find((e=>"video"===e.activity.eventType&&e.activity.name===iK.CLOSE));if(null==t||null===(e=t.activity.data)||void 0===e?void 0:e.maximumViewingTime)return Math.floor(1e3*t.activity.data.maximumViewingTime)}getEndcardInteractions(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eL.ENDCARD_SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.endcard_click_count}getEndcardDuration(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eL.ENDCARD_SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(eL.VIDEO_START)),n=e.find(this.findSceneEventActivityEvent(iR.CLOSE_BUTTON_SHOW,ew.video));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findSceneEventActivityEvent(iR.SCENE_START,ew.endcard)),n=e.find(this.findSceneEventActivityEvent(iR.CLOSE_BUTTON_SHOW,ew.endcard));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionsAfterCloseButton(){return this.reportingService.getActivityEvents().filter((e=>{var t;return(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eL.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE})).length}addRecord(){var e,t,n;let i={eventId:null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:"",creativeId:null!==(t=this.tokenService.get(L.CREATIVE_ID))&&void 0!==t?t:"",adSource:this.tokenService.get(L.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!==(n=this.tokenService.get(L.ORIGINAL_VIDEO_URL))&&void 0!==n?n:this.tokenService.get(L.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionsAfterCloseButton:this.getEndcardInteractionsAfterCloseButton(),rewarded:this.rewarded,createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()};return this.indexedDatabaseService.addRecord(i)}getAllRecords(){return this.indexedDatabaseService.getAllRecords()}deleteExpiredRecords(){return this.indexedDatabaseService.deleteExpiredRecords()}static getStoreConfig(){return{dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}}}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e,t=R(),n=nm(),i=aS,r=j(),a=Q(t)){super(),this.indexedDatabaseService=e,this.tokenService=t,this.reportingService=n,this.placementTypeService=r,this.rewarded=a,this.injectedGetVideoStreamAverageBandwidth=i}},cg=()=>{let e=r.getInstance();if(e.has(cT.getServiceIdentifier()))return e.get(cT.getServiceIdentifier())},cp=async(e,t,n)=>{var i;let r=0,a=0,o=0,s=n.getPlacementType(),l=t.get(L.AD_SOURCE),c=t.get(L.CREATIVE_ID),d=null!==(i=t.get(L.ORIGINAL_VIDEO_URL))&&void 0!==i?i:t.get(L.MAIN_STREAM);try{(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===s&&(r+=1),t===c&&n===l&&(a+=1),i===d&&(o+=1)}))}catch(e){return Promise.reject(Error("Failed to get user activities"))}return{ad_count:r,same_creative:a,same_video:o}},cC=(e=R())=>q(e.get(L.VX_ENDCARD)),cI=(e=R(),t=[])=>{if(e.has(L.AD_EXPERIENCE))return"free-form";let n=t.filter((e=>e.getSceneType()!==ew.closed)).map((e=>e.getSceneType().toString()));switch(cC(e)&&n.push("lcec"),n.length){case 0:return"unknown";case 1:return`${n[0]}-only`;default:return n.join("-plus-")}};const cO=async(e=cg(),t=R(),n=j(),i=e$(),a=cp,o=en)=>{let s={name:eL.AD_START,elapsed:Date.now()-r.getInstance().startTimestamp,ad_type:cI(t,o())};if(a4(t)&&(s=d({},s,a6(t))),e)try{await e.addRecord(),s=d({},s,await a(e,t,n))}catch(e){}i.emit(s)};var cA=()=>{let e=r.getInstance(),t=new s_;e.bind(s_.getServiceIdentifier(),t)},cm=()=>{let e=r.getInstance(),t=new sH;e.bind(sH.getServiceIdentifier(),t)},cf=(e=K(),t=y())=>{let n=r.getInstance(),i=a3.getServiceIdentifier(),a=Object.values(_Z);e.getMraidVersion().isLessThan(aY.V5_2_1)&&(a=a.filter((e=>e!==_Z.SILENT_CHANGE)));let o=new a3(a,t);n.bind(i,o),o.init()};const cN=(e,t,n,i)=>{let r=t.getOperatingSystem()===eD.iOS,a=a$(i),o=t.getSdkVersion(),s=n.isInLine();return!(!r||a||!(o.isEqualTo(new w("7.4.0"))&&s||o.isGreaterThanOrEqualTo(new w("7.4.1"))))||e};var cD=(e=aX(),t=aj(),n=ou(),i=K(),r=j(),a=nm())=>{let o=!!i.getMraidVersion().isGreaterThanOrEqualTo(aY.V5_2_1)&&cN(t,i,r,a);e||o?n.mute():n.unmute()},cy=()=>{let e=r.getInstance(),t=Z.getServiceIdentifier();return e.get(t)},cR=(e,t,n,i)=>{var a,o,s,l,c,u,E,_,v,h,S,T,g,p,C;let I=d({ad_source:null!==(o=e.get(L.AD_SOURCE))&&void 0!==o?o:"",advertiser_domain:null!==(s=e.get(L.ADVERTISER_DOMAIN))&&void 0!==s?s:"",app_name:"View Master Loki",app_environment:"production",browser_name:t.getBrowserName(),browser_version:t.getBrowserVersion(),creative_format:null!==(l=e.get(L.CREATIVE_FORMAT))&&void 0!==l?l:"",creative_format_version:null!==(c=e.get(L.CREATIVE_FORMAT_VERSION))&&void 0!==c?c:"",creative_id:null!==(u=e.get(L.CREATIVE_ID))&&void 0!==u?u:"",device_country_code:t.getDeviceCountryCode(),device_model:t.getDeviceModel(),device_type:t.getDeviceType(),dsp:n.getAdSource()===P.ACCELERATE?"accelerate":"edsp",elapsed:Date.now()-r.getInstance().startTimestamp,event_id:null!==(E=e.get(L.SESSION_ID))&&void 0!==E?E:"",is_header_bidding:q(e.get(L.HEADER_BIDDING)),is_incentivized:Q(e),mediation_name:null!==(_=e.get(L.MEDIATION_NAME))&&void 0!==_?_:"",nautilus_version:null!==(v=e.get(L.NAUTILUS_VERSION))&&void 0!==v?v:"0.0.0",observed_experiments:null!==(h=e.get(L.OBSERVED_EXPERIMENTS))&&void 0!==h?h:"",os_version:t.getOsVersion().toString(),placement_type:n.getPlacementType(),platform:t.getOperatingSystem(),session_id:null!==(S=e.get(L.SESSION_ID))&&void 0!==S?S:"",sdk_version:t.getSdkVersion().toString(),template_version:null!==(T=window.appVersion)&&void 0!==T?T:"0.0.0",placement_id:null!==(g=e.get(L.PLACEMENT_ID))&&void 0!==g?g:"",pub_id:null!==(p=e.get(L.PUB_ID))&&void 0!==p?p:""},null===(a=i())||void 0===a?void 0:a.getObservabilityData()),A=null!==(C=e.get(L.ACC_TESTS))&&void 0!==C?C:"";return n.getAdSource()===P.ACCELERATE&&A&&(I.acc_tests=V(A)),I};class cL{getUrl(){return`${this.endpoint}/api/v1/push`}static getTimestampString(e){return""+1e6*(null!=e?e:new Date).getTime()}static formatAttributes(e,t){return`${Object.keys(e).map((t=>[t,e[t]])).map((([e,t])=>`${e}="${t}"`)).join(" ")} timestamp="${t.toJSON()}"`}getBody(e,t,n){var i,r,a,o;let s=cL.getTimestampString(n),l=cL.formatAttributes(t,n);return JSON.stringify({streams:[{stream:{app:t.app_name,kind:e,adSource:null!==(i=this.tokenService.get(L.AD_SOURCE))&&void 0!==i?i:"",isIncentivized:Q(this.tokenService),placementType:this.placementTypeService.getPlacementType(),platform:this.environmentService.getOperatingSystem(),sdkVersion:this.environmentService.getSdkVersion().toString(),templateVersion:null!==(r=window.appVersion)&&void 0!==r?r:"0.0.0",nautilusVersion:null!==(a=this.tokenService.get(L.NAUTILUS_VERSION))&&void 0!==a?a:"0.0.0",mediationName:null!==(o=this.tokenService.get(L.MEDIATION_NAME))&&void 0!==o?o:"",isHeaderBidding:q(this.tokenService.get(L.HEADER_BIDDING))},values:[[s,l]]}]})}pushEvent(e,t,n){var i;this.isObserved()&&(console.log("pushEvent",e,t),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(eR.EVENT,d({name:e},cR(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene),t),null!=n?n:new Date)))}pushError(e,t,n){var i,r,a;if(!this.isObserved())return;let o="",s="";"string"==typeof e?o=e:(s=null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:"",o=null!==(a=null==e?void 0:e.message)&&void 0!==a?a:""),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(eR.ERROR,d({message:o,stack:s},cR(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene),t),null!=n?n:new Date))}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}startWorker(){let e=new Blob([`\n      let queue = [];\n\n      self.addEventListener('message', function(event) {\n        const message = event.data;\n        queue.push(message);\n      });\n\n      function sendMessages() {\n        if (queue.length > 0) {\n          const message = queue.shift();\n          fetch('${this.getUrl()}', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'X-Scope-OrgID': 'viewmaster',\n            },\n            body: message // message is already stringified\n          })\n          .then(function (response) {\n            if (!response.ok) {\n              throw new Error('Failed to send message');\n            }\n          })\n          .catch(function (error) {\n            console.error('Error sending message:', error);\n          })\n          .finally(function () {\n            sendMessages(); // Continue sending messages\n          });\n        } else {\n          setTimeout(sendMessages, 100); // Check for new messages every 100 milliseconds\n        }\n      }\n      sendMessages();\n    `],{type:"application/javascript"}),t=URL.createObjectURL(e);this.worker=new Worker(t)}constructor(e,t,n,i,r){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.getCurrentScene=r,this.startWorker()}}var cP=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(d(C(d({},cR(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene)),{kind:eR.EVENT,timestamp:null!=n?n:new Date,name:e}),t))}pushError(e,t,n){let i="",r="";var a,o;"string"==typeof e?i=e:(r=null!==(a=null==e?void 0:e.stack)&&void 0!==a?a:"",i=null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"");this.sendLog(d(C(d({},cR(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene)),{kind:eR.ERROR,timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}sendLog(e){this.isObserved()&&navigator.sendBeacon(this.getUrl(),JSON.stringify(e))}constructor(e,t,n,i,r){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.getCurrentScene=r}},cb=class{pushEvent(e,t,n){this.lokiProxyDto.pushEvent(e,t,n),this.vmLogsDto.pushEvent(e,t,n)}pushError(e,t,n){this.lokiProxyDto.pushError(e,t,n),this.vmLogsDto.pushError(e,t,n)}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}constructor(e,t,n,i,r,a){this.tokenService=n,this.lokiProxyDto=new cL(e,n,i,r,a),this.vmLogsDto=new cP(t,n,i,r,a)}},cw=(e,t,n,i)=>new cb("https://logging-gateway.vungle.io:32443/log/loki","https://logs.ads.vungle.com",e,t,n,i),cV=(e=cy())=>{e.init(cw)},cM="product-view";(v2=S0||(S0={})).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",v2.CLOSE_STORE_VIEW="closeStoreView",v2.OPEN_STORE_VIEW="openStoreView",v2.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",v2.SHOW_FALLBACK="showFallback",v2.UPDATE_OPEN_COUNT="updateOpenCount";var ck=S0,cU=(e,t)=>e.interpreterMap.get(t),cB=(e=na(),t=cM)=>cU(e,t);const cH=e=>"store-kit-orchestration"===e.type&&null!=e.event;var cW=class extends es{emit(e){cH(e)?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},cx=e=>new cW(null!=e?e:eo());(v3=S1||(S1={})).SKPV_FALLBACK_TO_SKO="SKPV_FALLBACK_TO_SKO",v3.SKO_FALLBACK_TO_SKPV="SKO_FALLBACK_TO_SKPV",v3.STORE_KIT_FALLBACK_TO_MRAID="STORE_KIT_FALLBACK_TO_MRAID";var cF=S1,cG=()=>eo();(v5=S2||(S2={})).APP_STORE_OPEN="APP_STORE_OPEN",v5.APP_STORE_CLOSE="APP_STORE_CLOSE";var cY=S2;const cK=()=>({id:cM,initial:_A.HIDDEN,context:{delay:0,openCount:0},states:{[_A.SHOWING]:{on:{[_O.CLOSE]:{target:_A.HIDDEN,actions:[ck.CLOSE_STORE_VIEW,ck.REMOVE_VIEWABILITY_HANDLER]},[_O.SET_FALLBACK]:{target:_A.FALLBACK,actions:[ck.REMOVE_VIEWABILITY_HANDLER]}}},[_A.HIDDEN]:{on:{[_O.OPEN]:{target:_A.SHOWING,actions:[ck.ADD_VIEWABILITY_HANDLER,ck.UPDATE_OPEN_COUNT,ck.OPEN_STORE_VIEW]}}},[_A.FALLBACK]:{on:{[_O.OPEN]:{actions:[ck.SHOW_FALLBACK]}}},[_A.INITIAL]:{},[_A.PREPARING]:{},[_A.DONE]:{}}}),cj=(e,t)=>{var n;t.event===nk.MAXIMIZED&&(null===(n=cB())||void 0===n||n.send({type:_O.CLOSE}))},cX=(e=y(),t=a0(),n=cG(),i=cx())=>({actions:{[ck.OPEN_STORE_VIEW]:()=>{var t,i;n.emit({type:"store-kit-product-view",event:cY.APP_STORE_OPEN}),null===(i=e.getMraidExt())||void 0===i||null===(t=i.openAppStore)||void 0===t||t.call(i,0)},[ck.CLOSE_STORE_VIEW]:()=>{n.emit({type:"store-kit-product-view",event:cY.APP_STORE_CLOSE})},[ck.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",cj)},[ck.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",cj)},[ck.UPDATE_OPEN_COUNT]:g({openCount:e=>e.openCount?e.openCount+1:1}),[ck.SHOW_FALLBACK]:()=>{i.emit(cF.SKPV_FALLBACK_TO_SKO)}}});(v4=S3||(S3={})).PREPARE_STORE_VIEW="prepareStoreView",v4.SET_APP_STORE_ID="setAppStoreId";const cz=d({},ck,S3),c$=()=>({id:cM,initial:_A.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[_A.INITIAL]:{on:{[_O.READY]:{target:_A.PREPARING,actions:[cz.SET_APP_STORE_ID,cz.PREPARE_STORE_VIEW]}}},[_A.PREPARING]:{on:{[_O.PREPARE_SUCCESS]:{target:_A.HIDDEN}}},[_A.SHOWING]:{on:{[_O.CLOSE]:{target:_A.INITIAL,actions:[ck.CLOSE_STORE_VIEW,ck.REMOVE_VIEWABILITY_HANDLER]}}},[_A.HIDDEN]:{on:{[_O.OPEN]:{target:_A.SHOWING,actions:[ck.ADD_VIEWABILITY_HANDLER,ck.UPDATE_OPEN_COUNT,ck.OPEN_STORE_VIEW]}}},[_A.FALLBACK]:{},[_A.DONE]:{}}}),cZ=(e=y(),t=a0(),n=cG(),i=cx())=>({actions:C(d({},cX(e,t,n,i).actions),{[cz.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[cz.PREPARE_STORE_VIEW]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreView)||void 0===n||n.call(i,t.appStoreId)},[cz.OPEN_STORE_VIEW]:t=>{var i,r;t.appStoreId&&(n.emit({type:"store-kit-product-view",event:cY.APP_STORE_OPEN}),null===(r=e.getMraidExt())||void 0===r||null===(i=r.presentStoreView)||void 0===i||i.call(r,t.appStoreId))}})});var cq=class extends ny{init(e){var t;null===(t=this.interpreter)||void 0===t||t.send(d({type:_O.READY},e))}close(){var e,t;null===(e=this.interpreter)||void 0===e||e.send({type:_O.CLOSE}),null===(t=this.interpreter)||void 0===t||t.send({type:_O.READY})}constructor(e=c$,t=cZ,n=na()){super(e(),t(),n)}};const cQ=()=>{let e=cK(),t=e.states[_A.SHOWING];return t.on=C(d({},t.on),{[_O.CLOSE]:{target:_A.DONE,actions:[ck.CLOSE_STORE_VIEW,ck.REMOVE_VIEWABILITY_HANDLER]}}),e},cJ=()=>cQ();var c0=class extends ny{fallback(){var e;!1!==this.hasFallback&&(null===(e=this.interpreter)||void 0===e||e.send({type:_O.SET_FALLBACK}),this.open())}constructor(e=cK,t=cX,n=na()){super(e(),t(),n)}},c1=class extends c0{constructor(e=cJ,t=cX,n=na()){super(e,t,n)}};const c2=()=>{let e=c$(),t=e.states[_A.SHOWING];return t.on=C(d({},t.on),{[_O.CLOSE]:{target:_A.DONE,actions:[ck.CLOSE_STORE_VIEW,ck.REMOVE_VIEWABILITY_HANDLER]}}),e},c3=()=>c2();var c5=class extends cq{constructor(e=c3,t=cZ,n=na()){super(e,t,n)}},c4=class extends c0{constructor(e=cQ,t=cX,n=na()){super(e,t,n)}},c6=class extends cq{constructor(e=c2,t=cZ,n=na()){super(e,t,n)}},c8=class{withAppStoreId(e){let t=ie(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new w("17.2"),t=new w("7.0"),n=new w("7.1"),i=new w("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(dL()&&e.isLessThan(i))return new c1;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new c5)}return M.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?dL()?new c4:this.withAppStoreId(new c6):dL()?new c0:this.withAppStoreId(new cq)}constructor(e=K(),t=R()){this.environmentService=e,this.tokenService=t}},c7=class{resolve(){if(this.environmentService.getOperatingSystem()===eD.iOS)return new c8(this.environmentService).resolve()}constructor(e=K(),t=na(),n=aJ(),i=nd()){this.environmentService=e,this.stateMachineService=t,this.viewableService=n,this.intervalService=i}};(v6=S5||(S5={})).RESET_VIEWABLE="resetViewable",v6.SET_VIEWABLE_TO_FALSE="setViewableToFalse";var c9=e=>({resetViewable:()=>{(e||aJ()).resetViewable()},setViewableToFalse:()=>{(e||aJ()).setViewable(!1)}});const ue=()=>({id:cM,initial:_A.HIDDEN,context:{delay:0},states:{[_A.SHOWING]:{on:{[_O.CLOSE]:{target:_A.HIDDEN,actions:[S5.RESET_VIEWABLE,_u.START_INTERVALS]}}},[_A.HIDDEN]:{on:{[_O.OPEN]:{target:_A.SHOWING,actions:[S5.SET_VIEWABLE_TO_FALSE,_u.PAUSE_INTERVALS]}}},[_A.INITIAL]:{},[_A.PREPARING]:{},[_A.FALLBACK]:{},[_A.DONE]:{}}}),ut=(e=aJ(),t=nd())=>({actions:d({},c9(e),nc(t))});var un=class extends ny{constructor(e=ue,t=ut,n=na(),i=aJ(),r=nd()){super(e(),t(i,r),n)}},ui=(e=K(),t=na(),n=aJ(),i=nd())=>{let a=r.getInstance(),o=new c7(e,t,n,i).resolve();return o&&a.bind(un.getServiceIdentifier(),o),o};const ur=(e,t=e$())=>t.getEventCount({type:"observability",event:eR.SIGNAL_EVENT},[])>0;var ua=(e,t=!0,n=e$())=>{t&&ur(0,n)||n.emit({type:"observability",event:eR.SIGNAL_EVENT,data:e})};class uo extends nl{static getInstances(e=oX()){return e?[new uo(et)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=ew.gdpr}}var us=class extends n3{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!==(e=this.ecCtaUrlTokenValue)&&void 0!==e?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,placementType:s}){super({skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,id:e,placementType:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},ul=(e,t=!1,n=nm(),i=nu())=>{let r=im(n,is.RESOURCE,_L.IMAGE).pipe(iN()).pipe(iD(iy(n,iR.SCENE_END))),a=C(d({},iG(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=i7(ew.image,e,n,i)),a};class ud extends aa{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nH.CLOSE:this.closeButtonConfig.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:ul(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=R(),t=j(),n=K(),i=il(),r=ae(),a=an()){let o=[],s=[L.EC_IMAGE,L.EC_IMAGE_2],l=e.has(L.EC_HTML);return s.filter((t=>e.has(t))).forEach(((r,s)=>{var c;let d=`image_${s}`,u=l?s+1:s,E=new iE(iu(d,e,t),i);o.push(new ud({id:d,url:null!==(c=e.get(r))&&void 0!==c?c:"",index:u,fullScreenClickConfig:new us({id:d,ecImageTokenValue:e.get(L.EC_IMAGE),ecCtaUrlTokenValue:e.get(L.EC_CTA_URL),skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new ir(u,this.isEndcardOnly(e),ie(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new ia(u,ie(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),trackingEventMapConfig:new i_(!1).getTrackingEventMapConfig(),closeButtonConfig:new iv({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===u}).getCloseButtonConfig(),callToActionConfig:new ih({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:ra(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new ro({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),o}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,closeButtonConfig:s,trackingEventMapConfig:l,callToActionConfig:c,placementTypeService:d=j(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E,incentivizedConfig:_,iframeService:v=an()}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:_W.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:c,closeButtonConfig:s,placementTypeService:d,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E,incentivizedConfig:_,iframeService:v}),this.sceneType=ew.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=l,this.callToActionConfig=c,this.closeButtonConfig=s,this.placementTypeService=d,this.eventStreams=E}}var uc=class{static getInstances(e=R(),t=j(),n=il()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach(((o,s)=>{var l;let c=o.startsWith(i),d=o.split(c?i:r),u=d[d.length-1],E=new iE(iu(u,e,t),n);a.push(new ap({id:u,url:null!==(l=e.get(o))&&void 0!==l?l:"",index:s,isAlternative:!0,videoType:c?_x.HLS:_x.PROGRESSIVE,fullScreenClickConfig:new n3({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new ad(al(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),progressBarConfig:new as({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfig:new ao({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),trackingEventMapConfig:new i_(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen(),incentivizedConfig:new ro({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},uu=class{static getInstances(e=R(),t=j(),n=il(),i=ae(),r=an()){let a="ALT_EC_",o=[],s=e.getSeriesTokens(a),l=e=>{let t=e.split(a);return t[t.length-1]};return s.forEach(((a,s)=>{var c;let d=l(a),u=new iE(iu(d,e,t),n);o.push(new aa({id:d,endcardContent:i.decode(null!==(c=e.get(a))&&void 0!==c?c:"",!1),index:s,isAlternative:!0,compressionType:_W.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:u.getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfig:new iv({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}).getCloseButtonConfig(),trackingEventMapConfig:{enabled:!1},callToActionConfig:new ih({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:ra(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1,incentivizedConfig:new ro({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:r}))})),o}},uE=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...uo.getInstances(),...ap.getInstances(),...aa.getInstances(),...ud.getInstances(),...ip.getInstances()]}buildAlternativeScenes(){let e,t=[...uc.getInstances(),...uu.getInstances()],n=this.mainScenes.findIndex((e=>e.getSceneType()===ew.endcard)),i=this.mainScenes[n+1];return i&&(e=i),t.forEach((t=>{let n=t.getTransitions().find((e=>e.name===_c.NEXT));n?n.scene=e:t.addTransition({name:_c.NEXT,scene:e,actions:[]}),t.next=e})),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=R()}},uv=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>e.name===_c.NEXT));a?a.scene=null!==(i=e[n+1])&&void 0!==i?i:void 0:t.addTransition({name:_c.NEXT,scene:null!==(r=e[n+1])&&void 0!==r?r:void 0,actions:[]})})),e}},u_=()=>!!ng()&&q(R().get(L.APP_STORE_ON_FIRST_TRANSITION)),uh=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null===(n=e.getTransitions())||void 0===n?void 0:n.find((e=>e.name===_c.NEXT&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>e.name===_f.SHOW_PRODUCT_VIEW))||i.actions.push({name:_f.SHOW_PRODUCT_VIEW}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[ew.gdpr]}},uS=()=>!!ng()&&q(R().get(L.APP_STORE_ON_SECOND_TRANSITION)),uT=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null===(n=e[t].getTransitions())||void 0===n?void 0:n.find((e=>e.name===_c.NEXT&&e.scene));if(r&&r.actions.find((e=>e.name===_f.SHOW_PRODUCT_VIEW))&&(null==r||null===(i=r.scene)||void 0===i?void 0:i.getSceneType())===ew.closed){r.actions.push({name:_f.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex((e=>e.name===_b.CLOSE_AD));-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},ug=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},up=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:ns.POSTROLL_VIEW})})),e}constructor(){this.sceneTypesToAddPostrollView=[ew.video,ew.image,ew.endcard]}},uC=class{transform(e){let t=e.filter((e=>e.getSceneType()===ew.endcard&&!e.isAlternative())),n=e.filter((e=>e.isAlternative()));return t.forEach((e=>{n.forEach((t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),n.forEach((e=>{n.forEach((t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),e}},uI=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:ig.INIT_CHECKPOINTS})})),e}constructor(){this.sceneTypesToInitCheckPoint=[ew.image,ew.endcard]}},uO=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:_b.CLOSE_STOREKIT_OVERLAY})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[ew.video,ew.endcard]}},uA=class{transform(e){return e.forEach((e=>{var t;if(!aC(e))return;let n=e.getTransitions().find((e=>e.name===_c.NEXT)),i=null==n?void 0:n.actions.filter((e=>e.name!==_f.SHOW_PRODUCT_VIEW)),r={name:_c.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]};(null===(t=e.next)||void 0===t?void 0:t.getSceneType())!==ew.closed?r.actions.push({name:ns.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:ns.SEND_FATAL_VIDEO_ERROR}),e.addTransition(r)})),e}},um=class{transform(e){return e.filter((e=>{var t;return(null===(t=e.next)||void 0===t?void 0:t.getSceneType())===ew.closed})).forEach((e=>{if(nq(e)){var t;e.setLastChanceEndcardConfig(C(d({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:_g.CLOSE_OVERLAY_VIEW},{name:_6.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_4.SHOW_LAST_CHANCE_ENDCARD},{name:_D.SET_CLOSE_BUTTON_HIDDEN},{name:ns.CLOSE_VIDEO_CURRENT_SCENE}];e.addTransition({name:_c.LAST_CHANCE_ENDCARD,actions:n}),e.addExitAction({name:_4.CLOSE_LAST_CHANCE_ENDCARD});let i=e.getTransitions().find((e=>e.name===_c.NEXT));if(!i)return;e.addOrUpdateTransition({name:_c.NEXT,actions:[{name:_D.SET_CLOSE_BUTTON_VISIBLE},...null!==(t=null==i?void 0:i.actions)&&void 0!==t?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find((e=>e.name===_f.SHOW_PRODUCT_VIEW));if(r&&(e.addOrUpdateTransition({name:_c.LAST_CHANCE_ENDCARD,actions:[r]}),i.actions=i.actions.filter((e=>e.name!==_f.SHOW_PRODUCT_VIEW))),i.actions.some((e=>e.name===ns.SHOW_PICTURE_IN_PICTURE))){let t=e.getTransitions().find((e=>e.name===_c.LAST_CHANCE_ENDCARD));t&&(e.addOrUpdateTransition({name:_c.LAST_CHANCE_ENDCARD,actions:[{name:ns.SHOW_PICTURE_IN_PICTURE},{name:ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}]}),t.actions=null==t?void 0:t.actions.filter((e=>e.name!==ns.CLOSE_VIDEO_CURRENT_SCENE)),i.actions=i.actions.filter((e=>e.name!==ns.SHOW_PICTURE_IN_PICTURE&&e.name!==ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))}}})),e}},uf=class{transform(e){return e.forEach((e=>{var t;if(!aC(e)||e.getTransitions().some((e=>e.name===_c.COMPLETE&&void 0!==e.scene)))return;let n=e.getTransitions().find((e=>e.name===_c.NEXT));n&&e.addOrUpdateTransition({name:_c.COMPLETE,scene:null==n?void 0:n.scene,actions:[...null!==(t=n.actions.filter((e=>e.name!==ns.SHOW_PICTURE_IN_PICTURE&&e.name!==ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))&&void 0!==t?t:[]]})})),e}},uN=class{transform(e){let t=e[0];if(!t||t.getSceneType()!==ew.video)return e;let n=t.getTransitions().find((e=>e.name===_c.NEXT));return n&&(n.actions=n.actions.filter((e=>e.name!==ns.CLOSE_VIDEO)),n.actions.push({name:ns.SHOW_PICTURE_IN_PICTURE},{name:ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}},uD=(e=R())=>q(e.get(L.PICTURE_IN_PICTURE)),uy=()=>{let e=new uE;e.addTransformer(new uv),e.addTransformer(new ug),u_()&&e.addTransformer(new uh(1)),uS()&&e.addTransformer(new uh(2)),uD()&&e.addTransformer(new uN),e.addTransformer(new up),e.addTransformer(new uT),e.addTransformer(new uI),e.addTransformer(new uO),e.addTransformer(new uA),e.addTransformer(new uf);let t=[...e.build(),...e.alternativeScenes];return t=(new uC).transform(t),cC()&&(t=(new um).transform(t)),r.getInstance().bind(ee,t),t},uR=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return d(C(d({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},uL=e=>{var t,n,i;return{delay:null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0,countdown:null===(n=null==e?void 0:e.countdown)||void 0===n||n,style:null!==(i=null==e?void 0:e.style)&&void 0!==i?i:nH.CLOSE}},uP=(e,t=R())=>void 0===e?"":"string"==typeof e?e:t.get(e.token);const ub=e=>(Object.keys(e).forEach((t=>{let n=e[t];(void 0===n||""===n||Array.isArray(n)&&0===n.length)&&delete e[t]})),e);var uw=(e,t=R())=>{var n;let i=uP(null==e?void 0:e.icon,t),r=null==e||null===(n=e.screenshots)||void 0===n?void 0:n.map((e=>uP(e,t))).filter((e=>void 0!==e));return ub({enabled:!(!(null==e?void 0:e.name)||!i),downloads:null==e?void 0:e.downloads,icon:i,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:r})},uV=(e,t,n,i=R())=>{var r,a,o,s,l,c,u,E,_,v,h,S,T;let g=!1,p={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return p;let I=null!==(E=null==t?void 0:t.fsc)&&void 0!==E&&E,A=null!==(_=null==t||null===(r=t.cta)||void 0===r?void 0:r.text)&&void 0!==_?_:"Open";Object.keys(null!==(v=null==n?void 0:n.on)&&void 0!==v?v:{}).includes(_c.LAST_CHANCE_ENDCARD)&&(g=!0);let O=uw(t.appMeta,i),m=C(d({},O),{enabled:!(!O.name||!O.icon)}),f=4e3;return(null==t||null===(a=t.cta)||void 0===a?void 0:a.delay)&&(f=1e3*t.cta.delay),C(d({},p),{enabled:g,fsc:{enabled:I,ctaUrl:null!==(h=null==t||null===(o=t.cta)||void 0===o?void 0:o.url)&&void 0!==h?h:"",target:null==t||null===(s=t.storeKit)||void 0===s?void 0:s.fscTarget},appMeta:m,close:uL(null==t?void 0:t.close),cta:{text:A,url:null!==(S=null==t||null===(l=t.cta)||void 0===l?void 0:l.url)&&void 0!==S?S:"",isPersistent:null!==(T=null==t||null===(c=t.cta)||void 0===c?void 0:c.isPersistent)&&void 0!==T&&T,delay:f,appMeta:m,target:null==t||null===(u=t.storeKit)||void 0===u?void 0:u.ctaTarget}})},uM=(e,t,n=R())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?uw(e.appMeta,n):void 0,target:null!==(i=null==t?void 0:t.ctaTarget)&&void 0!==i?i:eV.SKPV}},uk=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},uU=e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0},uB=(e=R())=>({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))});const uH={composite:(e,t,n,i=j(),r=R())=>new ca({id:e.id,html:e.html,children:e.children,closeButtonConfig:uL(e.close),lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),placementTypeService:i}),endcard:(e,t,n,i=j(),r=R(),a=ae(),o=an())=>{var s;let l=e.compressed?_W.GZIP:_W.BASE64_ENCODED;return new aa({id:e.id,endcardContent:a.decode(e.html,e.compressed),index:t,isAlternative:!1,compressionType:l,storeKitOverlayAutoShowConfig:uR(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),omsdkEnabled:!1,trackingEventMapConfig:uk(e),callToActionConfig:uM(e.cta,e.storeKit,r),placementTypeService:i,closeButtonConfig:uL(e.close),eligibleToPreload:null!==(s=e.preload)&&void 0!==s&&s,incentivizedConfig:uB(r),iframeService:o})},image:(e,t,n,i=j(),r=R(),a=an())=>{var o,s;return new ud({id:e.id,url:uP(e.url,r),index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url,target:null===(s=e.storeKit)||void 0===s?void 0:s.fscTarget},storeKitOverlayAutoShowConfig:uR(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),trackingEventMapConfig:uk(e),placementTypeService:i,closeButtonConfig:uL(e.close),callToActionConfig:uM(e.cta,e.storeKit,r),incentivizedConfig:uB(r),iframeService:a})},video:(e,t,n,i=j(),r=R())=>{var a,o,s,l,c,d;let u=uP(e.url,r).endsWith(".m3u8")?_x.HLS:_x.PROGRESSIVE,E={enabled:e.fsc,target:null===(a=e.storeKit)||void 0===a?void 0:a.fscTarget,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url},_={manifest:null===(s=e.streamManifest)||void 0===s?void 0:s.manifest,track_0:null===(l=e.streamManifest)||void 0===l?void 0:l.track_0,chunks:null===(d=e.streamManifest)||void 0===d||null===(c=d.chunks)||void 0===c?void 0:c.map((e=>uP(e,r))).filter((e=>""!==e))};return new ap({id:e.id,url:uP(e.url,r),isAlternative:!1,index:t,videoType:u,streamManifest:_,progressBarConfig:(()=>{var t,n,i;let r=null!==(i=null==e||null===(t=e.progressBar)||void 0===t?void 0:t.show)&&void 0!==i&&i;return{show:r,color:r&&(null===(n=e.progressBar)||void 0===n?void 0:n.color)?e.progressBar.color:ea}})(),fullScreenClickConfig:E,storeKitOverlayAutoShowConfig:uR(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:uM(e.cta,e.storeKit,r),lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),closeButtonConfig:uL(e.close),originalVideoUrl:uU(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:uk(e),isFullscreen:i.isFullscreen(),incentivizedConfig:uB(r)})}};var uW=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=uo.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new oz,t=uH,n=j()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach((e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)})),a.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let i=n(e,t,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)}))}));let o=new ip;this.scenesMap.set(o.getId(),o),this.scenes.push(o),this.scenes.forEach((e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},ux=class{transform(e){return e.filter((e=>!!nq(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t;e.addOrUpdateTransition({name:_c.NEXT,actions:[{name:_4.CLOSE_LAST_CHANCE_ENDCARD},{name:_D.SET_CLOSE_BUTTON_VISIBLE}]});let n=[{name:_g.CLOSE_OVERLAY_VIEW},{name:_6.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_D.SET_CLOSE_BUTTON_HIDDEN},{name:ig.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}],i=null===(t=e.getTransitions().find((e=>e.name===_c.LAST_CHANCE_ENDCARD)))||void 0===t?void 0:t.actions.some((e=>e.name===ns.SHOW_PICTURE_IN_PICTURE));e.getSceneType()===ew.video&&(i?n.push({name:ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}):n.push({name:ns.CLOSE_VIDEO_CURRENT_SCENE})),e.addOrUpdateTransition({name:_c.LAST_CHANCE_ENDCARD,actions:n})})),e}},uF=class{transform(e,t=new oz){let n=t.getAdMachineConfig(),i=t=>e.find((e=>e.getId()===t));return e.forEach((e=>{var t,r,a;let o=e.getId(),s=i(null===(t=null===(a=n.states[o])||void 0===a||null===(r=a.on)||void 0===r?void 0:r.NEXT)||void 0===t?void 0:t.target);s&&(e.next=s,s.prev=e)})),e}},uG=class{transform(e,t=new oz){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(t.getSceneType()===ew.composite){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,o=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&o.push(n)})),t.addScenes(o),i.push(t)}})),e.forEach((e=>{e.getSceneType()===ew.composite||i.some((t=>t.getSceneType()===ew.composite&&t.getScenes().includes(e)))||i.push(e)})),i}},uY=class{transform(e){var t;let n=(null===(t=e[0])||void 0===t?void 0:t.getSceneType())===ew.video?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>e.name===_c.NEXT));return(null==i?void 0:i.actions.some((e=>e.name===ns.SHOW_PICTURE_IN_PICTURE)))&&(i.actions=i.actions.filter((e=>e.name!==ns.CLOSE_VIDEO)).concat({name:ns.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}};const uK=[new uF,new up,new uI,new uO,new ux,new uY,new uA,new uf,new uG];var uj=(e=new oz,t=uK)=>{let n=new uW(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return r.getInstance().bind(ee,i),i},uX=(e=R(),t=uj,n=uy)=>{e.has(L.AD_EXPERIENCE)?t():n()};(v8=S4||(S4={}))[v8.TIME_FOR_CTA_CALLBACK=502]="TIME_FOR_CTA_CALLBACK";var uz=class{checkIfSignalsChanged(){return Object.keys(S4).some((e=>{let t=S4[e];return this.signals[t]!==this.previousSignals[t]}))}sendSignals(){if(this.checkIfSignalsChanged()){var e,t;let n=JSON.stringify(this.signals);null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||null===(e=t.updateSignals)||void 0===e||e.call(t,n),this.previousSignals=d({},this.signals)}}startUpdateSignalsTimer(){this.intervalService.getNewInterval(6e3,(()=>{this.sendSignals()})).start()}sendAppStoreDuration(e){e&&"number"==typeof e.duration&&(this.signals[S4.TIME_FOR_CTA_CALLBACK]=null==e?void 0:e.duration,this.sendSignals())}pushEvent(e,t){switch(e){case eL.SIGNAL_TIMER_START:this.startUpdateSignalsTimer();break;case eL.APP_STORE_DURATION:this.sendAppStoreDuration(t)}}pushError(){}isObserved(){return!0}static getServiceIdentifier(){return"SignalServiceInterface"}constructor(e=y(),t=nd(),n={},i={},r=0,a=0,o=o5()){this.mraidService=e,this.intervalService=t,this.signals=n,this.previousSignals=i,this.availableDiskSpaceBeforeCta=r,this.diskSpaceAfterCta=a,this.rootElement=o}},u$=()=>{let e=aY.V5_1_2;if(K().getMraidVersion().isLessThan(e))return;let t=r.getInstance(),n=uz.getServiceIdentifier();t.bind(n,new Z),t.get(n).init((()=>new uz),!0)},uZ=()=>{if(!nM())return;let e=r.getInstance(),t=nI();if(!t)return;let n=new oH(t);return e.bind(oH.getServiceIdentifier(),n),n};(v7=S6||(S6={})).BOTTOM="bottom",v7.BOTTOM_RAISED="bottom-raised";const uq=(e=R())=>{let t=e.get(L.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},uQ=(e=R())=>{var t,n;switch(null===(n=e.get(L.SKOVERLAY_DISMISSIBLE))||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},uJ=()=>({position:"bottom",dismissible:!0});var u0=(e=R())=>{let t=uJ(),n=uq(e);void 0!==n&&(t.position=n);let i=uQ(e);return void 0!==i&&(t.dismissible=i),t};(v9=S8||(S8={})).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",v9.PREPARE_OVERLAY="PREPARE_OVERLAY",v9.SET_APP_STORE_ID="SET_APP_STORE_ID";const u1=d({},ck,S8);(_e=S7||(S7={})).CLOSE="CLOSE",_e.FINISH="FINISH",_e.INTERRUPT="INTERRUPT",_e.PREPARE_SUCCESS="PREPARE_SUCCESS",_e.READY="READY",_e.RESUME="RESUME",_e.START_DELAY_SHOW="START_DELAY_SHOW",_e.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(_t=S9||(S9={})).CLOSED="CLOSED",_t.DELAY_SHOW="DELAY_SHOW",_t.DELAYED_SKO_INTERRUPTED="DELAYED_SKO_INTERRUPTED",_t.IDLE="IDLE",_t.INITIAL="INITIAL",_t.IMMEDIATE_SHOW="IMMEDIATE_SHOW",_t.IMMEDIATE_SHOW_INTERRUPTED="IMMEDIATE_SHOW_INTERRUPTED",_t.PREPARING="PREPARING";var u2="store-kit-overlay";const u3=(e=uJ(),t=_T.APP_STORE)=>({id:u2,initial:_h.IDLE,context:{displayOptions:e,fallback:t},states:{[_h.IDLE]:{on:{[__.START_DELAY_SHOW]:{target:_h.DELAY_SHOW,actions:[_S.ASSIGN_FALLBACK]},[__.START_IMMEDIATE_SHOW]:{target:_h.IMMEDIATE_SHOW,actions:[_S.ASSIGN_FALLBACK,_S.SHOW_SKO]},[__.SET_DISPLAY_OPTIONS]:{actions:_S.ASSIGN_DISPLAY_OPTIONS}}},[_h.DELAY_SHOW]:{on:{[__.CLOSE]:{target:_h.IDLE},[__.INTERRUPT]:{target:_h.DELAY_SHOW_INTERRUPTED},[__.SHOW]:{target:_h.DELAY_SHOW_IMMEDIATE,actions:_S.SHOW_SKO},[__.START_IMMEDIATE_SHOW]:{target:_h.IMMEDIATE_SHOW,actions:[_S.ASSIGN_FALLBACK,_S.CANCEL_DELAY_SHOW,_S.SHOW_SKO]}}},[_h.DELAY_SHOW_IMMEDIATE]:{on:{[__.SET_VISIBLE]:{target:_h.DELAY_SHOW_VISIBLE,actions:_S.EMIT_OBSERVABILITY_EVENT},[__.CLOSE]:{target:_h.IDLE}}},[_h.DELAY_SHOW_VISIBLE]:{on:{[__.CLOSE]:{target:_h.CLOSING,actions:_S.CLOSE_SKO},[__.FINISH]:{target:_h.IDLE},[__.INTERRUPT]:{target:_h.DELAY_SHOW_INTERRUPTED,actions:_S.CLOSE_SKO}}},[_h.DELAY_SHOW_INTERRUPTED]:{on:{[__.RESUME]:{target:_h.DELAY_SHOW_IMMEDIATE,actions:_S.SHOW_SKO},[__.CLOSE]:{target:_h.IDLE}}},[_h.IMMEDIATE_SHOW]:{on:{[__.SET_VISIBLE]:{target:_h.IMMEDIATE_SHOW_VISIBLE,actions:_S.EMIT_OBSERVABILITY_EVENT},[__.INTERRUPT]:{target:_h.CLOSING,actions:_S.CLOSE_SKO},[__.SET_FALLBACK]:{target:_h.FALLBACK}}},[_h.IMMEDIATE_SHOW_VISIBLE]:{on:{[__.CLOSE]:{target:_h.CLOSING,actions:_S.CLOSE_SKO},[__.FINISH]:{target:_h.IDLE},[__.INTERRUPT]:{target:_h.CLOSING,actions:_S.CLOSE_SKO}}},[_h.FALLBACK]:{on:{[__.START_IMMEDIATE_SHOW]:{actions:_S.SHOW_FALLBACK}}},[_h.CLOSING]:{on:{[__.FINISH]:{target:_h.IDLE}}},[_h.ERROR]:{},[_h.INITIAL]:{},[_h.PREPARING]:{}}}),u5=(e,t,n,i)=>({actions:{[_S.EMIT_OBSERVABILITY_EVENT]:()=>{t.emit(eL.STORE_KIT_OVERLAY)},[_S.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,1,t.displayOptions)},[_S.CLOSE_SKO]:()=>{var t,n;null===(n=e.getMraidExt())||void 0===n||null===(t=n.dismissStoreOverlayView)||void 0===t||t.call(n)},[_S.ASSIGN_FALLBACK]:g(((e,t)=>{var n;return C(d({},e),{fallback:null!==(n=t.fallback)&&void 0!==n?n:e.fallback})})),[_S.ASSIGN_DISPLAY_OPTIONS]:g(((e,t)=>{var n;return C(d({},e),{displayOptions:null!==(n=t.displayOptions)&&void 0!==n?n:e.displayOptions})})),[_S.SHOW_FALLBACK]:e=>{switch(e.fallback){case _T.SKPV:n.emit(cF.SKO_FALLBACK_TO_SKPV);break;case _T.APP_STORE:n.emit(cF.STORE_KIT_FALLBACK_TO_MRAID)}},[_S.CANCEL_DELAY_SHOW]:()=>{null==i||i.reset()}}}),u4=(e=uJ(),t=_T.APP_STORE)=>{let n=u3(e,t);return C(d({},n),{initial:_h.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:C(d({},n.states),{[_h.INITIAL]:{on:{[__.READY]:{target:_h.PREPARING,actions:[u1.SET_APP_STORE_ID,u1.PREPARE_OVERLAY]}}},[_h.PREPARING]:{on:{[__.SET_PREPARED]:{target:_h.IDLE},[__.SET_ERROR]:{target:_h.ERROR,actions:u1.EMIT_PREPARE_ERROR}}},[_h.DELAY_SHOW_VISIBLE]:{on:{[__.CLOSE]:{target:_h.CLOSING,actions:_S.CLOSE_SKO},[__.FINISH]:{target:_h.INITIAL},[__.INTERRUPT]:{target:_h.DELAY_SHOW_INTERRUPTED,actions:_S.CLOSE_SKO}}},[_h.IMMEDIATE_SHOW_VISIBLE]:{on:{[__.CLOSE]:{target:_h.CLOSING,actions:_S.CLOSE_SKO},[__.FINISH]:{target:_h.INITIAL},[__.INTERRUPT]:{target:_h.CLOSING,actions:_S.CLOSE_SKO}}},[_h.CLOSING]:{on:{[__.FINISH]:{target:_h.INITIAL}}}})})},u6=(e=y(),t=e$(),n=oW(),i=cx())=>({actions:C(d({},u5(e,t,i,n).actions),{[u1.PREPARE_OVERLAY]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[u1.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[u1.EMIT_PREPARE_ERROR]:()=>{t.emit(eL.STORE_KIT_OVERLAY_PREPARE_ERROR)},[_S.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.presentStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[_S.CLOSE_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.dismissStoreOverlayView)||void 0===n||n.call(i,t.appStoreId)}})});var u8=class extends nC{init(e){this.interpreter.send(d({type:__.READY},e))}close(){super.close(),this.interpreter.send({type:__.READY})}finish(){super.finish(),this.interpreter.send({type:__.READY})}constructor(e=u4,t=u6,n=na(),i=R(),r=K(),a=y()){super(e(u0(i),np(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},u7=class extends nC{constructor(e=u3,t=u5,n=na(),i=R(),r=K(),a=y(),o=e$(),s=cx(),l=oW()){super(e(u0(i),np(r)),t(a,o,s,l),n)}},u9=class{withAppStoreId(e){let t=ie(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===eD.iOS)return dL(this.environmentService)?new u7:this.withAppStoreId(new u8)}constructor(e=K(),t=y(),n=R()){this.environmentService=e,this.mraidService=t,this.tokenService=n}},Ee=(e=K(),t=y(),n=R())=>{let i=r.getInstance(),a=new u9(e,t,n).resolve();return a&&i.bind(nC.getServiceIdentifier(),a),a},Et=(e=ov())=>{e.init()};const En={options:void 0,lastActivity:void 0,volume:void 0,sessionContent:void 0,state:void 0,nativeView:void 0},Ei=()=>{if(window.omidBridge){var e,t,n,i,r,a,o,s,l,c,d,u;let{options:E,lastActivity:_,volume:v,sessionContent:h,state:S,nativeView:T}=En;E&&(null===(e=(t=window.omidBridge).init)||void 0===e||e.call(t,...E)),_&&(null===(n=(i=window.omidBridge).setLastActivity)||void 0===n||n.call(i,..._)),v&&(null===(r=(a=window.omidBridge).setDeviceVolume)||void 0===r||r.call(a,...v)),h&&(null===(o=(s=window.omidBridge).startSession)||void 0===o||o.call(s,...h)),S&&(null===(l=(c=window.omidBridge).setState)||void 0===l||l.call(c,...S)),T&&(null===(d=(u=window.omidBridge).setNativeViewHierarchy)||void 0===d||d.call(u,...T))}};var Er=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const Ea=new w("6.9.1"),Eo=async(e=R(),t=K(),n=Er,i=eo(),r=Ei)=>{if(q(e.get(L.OM_ENABLED))&&!t.getSdkVersion().isLessThan(Ea))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:is.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},Es=e=>{var t,n;null!=(null==e||null===(t=e.data)||void 0===t?void 0:t.currentTime)&&null!=(null==e||null===(n=e.data)||void 0===n?void 0:n.duration)&&iJ(e.data.currentTime,e.data.duration,Math.round(e.data.currentTime))},El=e=>{let t=$();aC(t)&&oL(e,t.getId(),t.getTrackingEventMapConfig())},Ed=e=>{var t,n;let i=cy();(null==e||null===(t=e.data)||void 0===t?void 0:t.error)&&i.pushError(e.data.error,{url:null===(n=e.data)||void 0===n?void 0:n.videoUrl,error_source:eP.RESOURCE})};var Ec=(e,t)=>{let n=n8(e);switch(t.event){case iK.PROGRESS:Es(t);break;case iK.MUTE:case iK.UNMUTE:n.emit(t.event===iK.MUTE?n5.VIDEO_MUTE:n5.VIDEO_UNMUTE),El(t.event===iK.MUTE?eM.MUTE:eM.UNMUTE);break;case iK.CLOSE:n.emit(n5.VIDEO_CLOSE),El(eM.SKIP);break;case iK.PAUSE:case iK.PLAY:El(t.event===iK.PAUSE?eM.PAUSE:eM.RESUME);break;case iK.ERROR:Ed(t)}};const Eu=(e,t)=>{if(t===eD.iOS)return"0.0.0";switch(e){case n5.REWARD_GRANTED:return"6.12.0";case n5.VIDEO_LENGTH:return"6.9.0";default:return"0.0.0"}};var EE=(e,t,n=y().getMraidBridgeExt(),i=K())=>{let r=i.getSdkVersion(),a=Eu(t.event,i.getOperatingSystem());r.isGreaterThanOrEqualTo(new w(a))&&(null==n||n.notifyTPAT(t.event))},Ev=(e,t,n=nu(),i=nd(),r=ot)=>{if(t.event===nk.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===nk.MAXIMIZED){let e=r();if(null==e?void 0:e.state.matches(_j.AUTO_PLAY_FAIL))return;n.wake(),i.startAll()}};let E_=null;var Eh=(e,t,n=y())=>{if(t.event===nA.START){if(E_)return;let t=n.getMraidBridgeExt();t&&(E_=window.setInterval((()=>{t.creativeHeartbeat(),e.getLogger("heartbeat").info("Heartbeat")}),4e3))}else t.event===nA.STOP&&E_&&(window.clearInterval(E_),E_=null)};(_n=Te||(Te={})).OVERLAY_PREPARED="vungle.events.storeoverlay.success",_n.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",_n.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",_n.OVERLAY_FAILED="vungle.events.storeoverlay.failed",(_i=Tt||(Tt={})).STORE_VIEW_PREPARED="vungle.events.preparestore.success",_i.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",(_r=Tn||(Tn={})).VISIBLE="vungle.events.storekit.visible",_r.FAILED="vungle.events.storekit.failed",_r.FINISHED="vungle.events.storekit.finished";var ES=(e=na(),t=u2)=>cU(e,t);(_a=Ti||(Ti={}))[_a.PRODUCT_VIEW_MODE=0]="PRODUCT_VIEW_MODE",_a[_a.OVERLAY_MODE=1]="OVERLAY_MODE";const ET=e=>{var t;if(0===e){let e=nI();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null===(t=ES())||void 0===t||t.send({type:__.SET_VISIBLE}))},Eg=e=>{var t,n;0===e?null===(t=nR())||void 0===t||t.close():1===e&&(null===(n=nI())||void 0===n||n.finish())},Ep=e=>{var t,n;0===e?null===(t=nR())||void 0===t||t.fallback():1===e&&(null===(n=nI())||void 0===n||n.fallback())};var EC=(e,t)=>{var n;if(!Object.values(Tn).includes(t.event))return;let i=null===(n=t.data)||void 0===n?void 0:n.mode;switch(t.event){case Tn.VISIBLE:ET(i);break;case Tn.FINISHED:Eg(i);break;case Tn.FAILED:Ep(i)}},EI=(e,t,n=K(),i=ov())=>{t.data.isFatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(M.sdkSeven)?i.notifyFatalError(t):nD())},EO=(e,t)=>{ng()&&Object.values(Tt).includes(t.event)&&{[Tt.STORE_VIEW_PREPARED]:()=>{var e;null===(e=cB())||void 0===e||e.send({type:_O.PREPARE_SUCCESS})},[Tt.STORE_VIEW_CLOSED]:()=>{var e;null===(e=cB())||void 0===e||e.send({type:_O.CLOSE})}}[t.event]()},EA=(e,t)=>{var n;if(!nM())return;let i=nI();null===(n={[Te.OVERLAY_PREPARED]:()=>{var e;null===(e=ES())||void 0===e||e.send({type:__.SET_PREPARED})},[Te.OVERLAY_FINISHED]:()=>{var e;null===(e=ES())||void 0===e||e.send({type:__.FINISH})},[Te.OVERLAY_FAILED]:()=>{let e=ES();(null==e?void 0:e.state.matches(_h.PREPARING))?e.send({type:__.SET_ERROR}):null==i||i.fallback()},[Te.OVERLAY_VISIBLE]:()=>{var e;null===(e=ES())||void 0===e||e.send({type:__.SET_VISIBLE})}}[t.event])||void 0===n||n.call(void 0)},Em=(e,t)=>{if(t.event===o4.CLOSE){let{sendAdEvent:n,isVideoState:i,isCloseButtonVisible:r}=t.data;if(!r)return;e.getLogger("custom-mraid").info(o4.CLOSE);let a=lE();if((null==a?void 0:a.state.value)===hM.SHOWING)return void a.send({type:hk.HIDE});if(!o1().state.context.isPrivacyButtonVisible){if(Q()&&i)return void l2(n)({type:_c.NEXT});n({type:_c.NEXT})}}};const Ef=(e,t)=>e.getActivityEvents().filter((e=>"error-logging"===e.activity.eventType&&e.activity.data.error.message===t.message&&e.activity.data.error.error_source===t.error_source)).length>1;var EN=(e,t)=>{var n;let i=cy();if("error-logging"===t.type&&(null===(n=t.data)||void 0===n?void 0:n.error)&&!Ef(e,t.data.error))i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=z.getValue().scene,n={type:t.type,value:t.event,scene_type:null==e?void 0:e.getSceneType()},r=d({name:eL.CTA},n);i.pushEvent(r)}},ED=(e,t)=>{let n=cy();t.event===eR.EVENT&&t.data.name?n.pushEvent(d({name:t.data.name},t.data)):t.event===eR.ERROR&&t.data.error&&n.pushError(t.data.error)},Ey=()=>{let e=r.getInstance(),t=uz.getServiceIdentifier();if(e.has(t))return e.get(t)},ER=(e,t,n=Ey())=>{n&&t.event===eR.SIGNAL_EVENT&&t.data.name&&n.pushEvent(d({name:t.data.name},t.data))},EL=(e,t,n=ou())=>{t.event===aK.SILENT?n.mute():t.event===aK.UN_SILENT&&n.unmute()},EP=(e,t,n=y())=>{var i;t.event===oj.DECODING_ERROR&&(null===(i=n.getMraid())||void 0===i||i.close())},Eb=(e,t=nm())=>{let n=t.getActivityEventPairs("viewability",nk.MINIMIZED,nk.MAXIMIZED),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.getActivityEventPairs("store-kit-product-view",cY.APP_STORE_OPEN,cY.APP_STORE_CLOSE),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},Ew=(e,t,n=r.getInstance().startTimestamp,i=y(),a=e$(),o=cg(),s=o8(),l=Eb)=>aD((()=>s.haveAllCompleted()),aP.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{a.emit({name:eL.AD_CLOSE,ad_duration:l(n,e)}),null==o||o.addRecord(),i.getMraid().close()}));const EV=(e,t=en())=>t.find((t=>t.getId()===e))||t.filter((e=>e.getSceneType()===ew.composite)).map((t=>EV(e,t.getScenes()))).find(Boolean);var EM=EV,Ek=(e,t,n=EM,i=en,r=o8(),a=e$())=>{let o=n(t.data.scene_id);if(o&&t.event===iR.SCENE_END){let e=i().indexOf(o);r.subscribeAll(o).then((n=>{Object.keys(n).length>0&&a.emit({type:"observability",event:eR.EVENT,data:d({name:eL.SCENE_END,scene_id:t.data.scene_id,scene_type:t.data.scene_type,scene_index:e},n)})}))}},EU=(e,t,n=y(),i=n8(),r=e$())=>{t.event===iS.GRANT_REWARD&&(n.getMraidBridgeExt().notifySuccessfulViewAd(),i.emit(n5.REWARD_GRANTED),r.emit(eL.GRANT_REWARD))},EB=(e,t,n=sW(),i=nI(),r=nR(),a=K(),o=j())=>{if(t.event===cF.SKPV_FALLBACK_TO_SKO){var s;let t=null!==(s=null==i?void 0:i.getState().matches(_h.FALLBACK))&&void 0!==s&&s;if(nM(a,o)&&!t)return void(null==i||i.open({fallback:_T.APP_STORE}));e.emit({type:"store-kit-orchestration",event:cF.STORE_KIT_FALLBACK_TO_MRAID})}t.event===cF.SKO_FALLBACK_TO_SKPV&&(null==r||r.open()),t.event===cF.STORE_KIT_FALLBACK_TO_MRAID&&n.invoke({url:void 0,target:eV.OFF,fireMMPEvents:!1})},EH=(e,t,n=e$(),i=Ey())=>{if(t.event===cY.APP_STORE_CLOSE){let t=e.getActivityEventPairs("store-kit-product-view",cY.APP_STORE_OPEN,cY.APP_STORE_CLOSE);if(n.getEventCount(eL.APP_STORE_DURATION)<t.length){let e={name:eL.APP_STORE_DURATION,duration:Date.now()-t[t.length-1][0].timestamp};n.emit(e),null==i||i.pushEvent(e)}}},EW=(e,t,n=oE(),i=o1)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:_c.CLOSE_PICTURE_IN_PICTURE}))},Ex=(e,t,n=e$())=>{t.event===n5.CHECKPOINT_0&&n.emit(eL.IMPRESSION)};(Tr||(Tr={})).INACTIVITY="INACTIVITY";var EF=Tr,EG=(e=on,t=ok)=>{let n=t(e().scene_id);return null==n?void 0:n.state.matches(_3.SHOWING)},EY=(e,t,n=e$(),i=EG,r=$,a=en)=>{if(t.event===EF.INACTIVITY){let e=r(),t=a().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:eL.INACTIVITY_OBSERVED,scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:i()})}},EK=()=>{let e=nm();e.addEventHandler("*",EN),e.addEventHandler("close",Ew),e.addEventHandler("observability",ED),e.addEventHandler("heartbeat",Eh),e.addEventHandler("storekit-mraid",EC),e.addEventHandler("storekit-mraid",EO),e.addEventHandler("storekit-mraid",EA),e.addEventHandler("tpat",EE),e.addEventHandler("tpat",Ex),e.addEventHandler("video",Ec),e.addEventHandler("video",l5),e.addEventHandler("viewability",Ev),e.addEventHandler("error-logging",EI),e.addEventHandler("custom-mraid",Em),e.addEventHandler("videoViewed",i0),e.addEventHandler("observability",ER),e.addEventHandler("silent",EL),e.addEventHandler("free-form",EP),e.addEventHandler("scene-event",Ek),e.addEventHandler("incentivized-event",EU),e.addEventHandler("store-kit-product-view",EH),e.addEventHandler("store-kit-orchestration",EB),e.addEventHandler("picture-in-picture",EW),e.addEventHandler("inactivity",EY)},Ej=(e=y(),t=R())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},EX=()=>eo(),Ez=(e=K(),t=j(),n=EX(),i=o5())=>{nM(e,t)&&!dL(e)&&Object.values(Te).forEach((e=>{null==i||i.addEventListener(e,(()=>{n.emit({type:"storekit-mraid",event:e})}))}))},E$=(e=K(),t=EX(),n=o5())=>{ng(e)&&!dL(e)&&Object.values(Tt).forEach((e=>{null==n||n.addEventListener(e,(()=>{t.emit({type:"storekit-mraid",event:e})}))}))},EZ=(e=K(),t=EX(),n=o5())=>{e.getOperatingSystem()===eD.iOS&&Object.values(Tn).forEach((e=>{null==n||n.addEventListener(e,(n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})}))}))},Eq=()=>eo();const EQ=new w("7");var EJ,E0,E1,E2,E3,E5,E4,E6,E8,E7,E9,ve,vt,vn,vi,vr,va,vo,vs,vl,vd,vc,vu,vE,vv,v_,vh,vS,vT,vg,vp,vC,vI,vO,vA,vm,vf,vN,vD,vy,vR,vL,vP,vb,vw,vV,vM,vk,vU,vB,vH,vW,vx,vF,vG,vY,vK,vj,vX,vz,v$,vZ,vq,vQ,vJ,v0,v1,v2,v3,v5,v4,v6,v8,v7,v9,_e,_t,_n,_i,_r,_a,_o,_s,_l,_d,_c,_u,_E,_v,__,_h,_S,_T,_g,_p,_C,_I,_O,_A,_m,_f,_N,_D,_y,_R,_L,_P,_b,_w,_V,_M,_k,_U,_B,_H,_W,_x,_F,_G,_Y,_K,_j,_X,_z,_$,_Z,_q,_Q,_J,_0,_1,_2,_3,_5,_4,_6,_8,_7,_9,he,ht,hn,hi,hr,ha,ho,hs,hl,hd,hc,hu,hE,hv,h_,hh,hS,hT,hg,hp,hC,hI,hO,hA,hm,hf,hN,hD,hy,hR,hL,hP,hb,hw,hV,hM,hk,hU,hB,hH,hW,hx,hF,hG,hY,hK,hj,hX,hz,h$,hZ,hq,hQ,hJ,h0,h1,h2,h3,h5,h4,h6,h8,h7,h9,Se,St,Sn,Si,Sr,Sa,So,Ss,Sl,Sd,Sc,Su,SE,Sv,S_,Sh,SS,ST,Sg,Sp,SC,SI,SO,SA,Sm,Sf,SN,SD,Sy,SR,SL,SP,Sb,Sw,SV,SM,Sk,SU,SB,SH,SW,Sx,SF,SG,SY,SK,Sj,SX,Sz,S$,SZ,Sq,SQ,SJ,S0,S1,S2,S3,S5,S4,S6,S8,S7,S9,Te,Tt,Tn,Ti,Tr,Ta,To,Ts,Tl,Td,Tc=(e=y(),t=Eq(),n=K())=>{var i;let r=void 0!==(null===(i=e.getMraidBridgeExt())||void 0===i?void 0:i.creativeHeartbeat);n.getSdkVersion().isGreaterThanOrEqualTo(EQ)&&r&&t.emit({type:"heartbeat",event:nA.START})},Tu=-1,TE=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Tu=t.timeStamp,e(t))}),!0)},Tv=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},T_=function(){var e=Tv();return e&&e.activationStart||0},Th=function(e,t){var n=Tv(),i="navigate";return Tu>=0?i="back-forward-cache":n&&(document.prerendering||T_()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},TS=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},TT=function(e,t,n,i){var r,a;return function(o){var s;t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,t.rating=(s=t.value)>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},Tg=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Tp=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},TC=function(e){var t=!1;return function(){t||(e(),t=!0)}},TI=-1,TO=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},TA=function(e){"hidden"===document.visibilityState&&TI>-1&&(TI="visibilitychange"===e.type?e.timeStamp:0,Tf())},Tm=function(){addEventListener("visibilitychange",TA,!0),addEventListener("prerenderingchange",TA,!0)},Tf=function(){removeEventListener("visibilitychange",TA,!0),removeEventListener("prerenderingchange",TA,!0)},TN=function(){return TI<0&&(TI=TO(),Tm(),TE((function(){setTimeout((function(){TI=TO(),Tm()}),0)}))),{get firstHiddenTime(){return TI}}},TD=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Ty=[1800,3e3],TR=function(e,t){t=t||{},TD((function(){var n,i=TN(),r=Th("FCP"),a=TS("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-T_(),0),r.entries.push(e),n(!0)))}))}));a&&(n=TT(e,r,Ty,t.reportAllChanges),TE((function(i){n=TT(e,r=Th("FCP"),Ty,t.reportAllChanges),Tg((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},TL=0,TP=1/0,Tb=0,Tw=function(e){e.forEach((function(e){e.interactionId&&(TP=Math.min(TP,e.interactionId),TL=(Tb=Math.max(Tb,e.interactionId))?(Tb-TP)/7+1:0)}))},TV=function(){return Ta?TL:performance.interactionCount||0},TM=function(){"interactionCount"in performance||Ta||(Ta=TS("event",Tw,{type:"event",buffered:!0,durationThreshold:0}))},Tk=[],TU=new Map,TB=0,TH=function(){var e=Math.min(Tk.length-1,Math.floor((TV()-TB)/50));return Tk[e]},TW=[],Tx=function(e){if(TW.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Tk[Tk.length-1],n=TU.get(e.interactionId);if(n||Tk.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};TU.set(i.id,i),Tk.push(i)}Tk.sort((function(e,t){return t.latency-e.latency})),Tk.length>10&&Tk.splice(10).forEach((function(e){return TU.delete(e.id)}))}}},TF=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=TC(e),"hidden"===document.visibilityState?e():(n=t(e),Tp(e)),n},TG=[200,500],TY=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},TD((function(){TM();var n,i,r=Th("INP"),a=function(e){TF((function(){e.forEach(Tx);var t=TH();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},o=TS("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=TT(e,r,TG,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Tp((function(){a(o.takeRecords()),i(!0)})),TE((function(){TB=TV(),Tk.length=0,TU.clear(),i=TT(e,r=Th("INP"),TG,t.reportAllChanges)})))})))},TK=[2500,4e3],Tj={},TX=function(e,t){t=t||{},TD((function(){var n,i=TN(),r=Th("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-T_(),0),r.entries=[e],n())}))},o=TS("largest-contentful-paint",a);if(o){n=TT(e,r,TK,t.reportAllChanges);var s=TC((function(){Tj[r.id]||(a(o.takeRecords()),o.disconnect(),Tj[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return TF(s)}),{once:!0,capture:!0})})),Tp(s),TE((function(i){n=TT(e,r=Th("LCP"),TK,t.reportAllChanges),Tg((function(){r.value=performance.now()-i.timeStamp,Tj[r.id]=!0,n(!0)}))}))}}))},Tz=[800,1800],T$=function e(t){document.prerendering?TD((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},TZ=function(e,t){t=t||{};var n=Th("TTFB"),i=TT(e,n,Tz,t.reportAllChanges);T$((function(){var r=Tv();r&&(n.value=Math.max(r.responseStart-T_(),0),n.entries=[r],i(!0),TE((function(){(i=TT(e,n=Th("TTFB",0),Tz,t.reportAllChanges))(!0)})))}))},Tq={passive:!0,capture:!0},TQ=new Date,TJ=function(e,t){To||(To=t,Ts=e,Tl=new Date,T2(removeEventListener),T0())},T0=function(){if(Ts>=0&&Ts<Tl-TQ){var e={entryType:"first-input",name:To.type,target:To.target,cancelable:To.cancelable,startTime:To.timeStamp,processingStart:To.timeStamp+Ts};Td.forEach((function(t){t(e)})),Td=[]}},T1=function(e){if(e.cancelable){var t,n,i,r=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){TJ(r,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",t,Tq),removeEventListener("pointercancel",n,Tq)},addEventListener("pointerup",t,Tq),addEventListener("pointercancel",n,Tq)):TJ(r,e)}},T2=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,T1,Tq)}))};const T3=e=>t=>{let n={FCP:eL.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:eL.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:eL.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:eL.WEB_VITALS_TIME_TO_FIRST_BYTE};e.emit({name:n[t.name],value:Math.round(t.value),rating:t.rating})};var T5=(e=e$(),t=TR,n=TY,i=TX,r=TZ)=>{let a=T3(e);t(a),n(a),i(a),r(a)},T4=(e=en())=>{let t=e.filter((e=>e.getSceneType()===ew.endcard));t.length&&t.forEach((e=>{e.initIframeContentData()}))};const T6=async()=>ab.open(cT.getStoreConfig()).then((e=>{if(!e)return;let t=new cT(new ab(e,cT.getStoreConfig()));t.deleteExpiredRecords(),r.getInstance().bind(cT.getServiceIdentifier(),t)}));var T8=(e,t)=>iA(e,"observability").pipe(iO((e=>e.data.name===t))),T7=(e=nu(),t=nm(),n=e$(),i=1e4,r=T8)=>{r(n,eL.AD_START).pipe(iV((()=>iA(t,"*").pipe(function(e,t=nu()){return n=>new iI((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},o=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>(e=>{i.next(e),r=void 0})(n)))).start()},error:e=>{var t;a(),null===(t=i.error)||void 0===t||t.call(i,e)},complete:()=>{var e;a(),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{a(),o.unsubscribe()}}}))}(i,e),iD(iW(iA(t,"inactivity"),r(n,eL.AD_CLOSE))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:EF.INACTIVITY,fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:is.EXCEPTION,data:{error:e}})},complete:()=>{}})};const T9=async()=>{Ej(),EK(),cV();let e=e$();e.emit(eL.AD_LOAD),Et(),cf(),ui(),Ee(),uZ(),cA(),E$(),Ez(),EZ(),uX(),T4(),cD(),await Eo(),Tc(),u$(),ua({name:eL.SIGNAL_TIMER_START}),T6(),T5(),cm(),e.emit(eL.AD_LOAD_COMPLETE),T7()};(()=>{let e=r.getInstance(),t=new o,n=new A,i=new b(t,n);e.bind(o.getServiceIdentifier(),t),e.bind(l.getServiceIdentifier(),new l),e.bind(p.getServiceIdentifier(),new p),e.bind(A.getServiceIdentifier(),n),e.bind(D.getServiceIdentifier(),new D),e.bind(f.getServiceIdentifier(),new f),e.bind(b.getServiceIdentifier(),i),e.bind(M.getServiceIdentifier(),new M(t,n)),e.bind(Z.getServiceIdentifier(),new Z),e.bind(eZ.getServiceIdentifier(),new eZ),e.bind(eq.getServiceIdentifier(),new eq),e.bind(nr.getServiceIdentifier(),new nr),e.bind(aO.getServiceIdentifier(),new aO),e.bind(aA.getServiceIdentifier(),new aA(n)),e.bind(aP.getServiceIdentifier(),new aP),e.bind(ak.getServiceIdentifier(),new ak),e.bind(r9.getServiceIdentifier(),new r9),e.bind(at.getServiceIdentifier(),new at),e.bind(aW.getServiceIdentifier(),new aW)})(),y().init(),window.omidBridge={init:(...e)=>{En.options=e},setLastActivity:(...e)=>{En.lastActivity=e},setDeviceVolume:(...e)=>{En.volume=e},startSession:(...e)=>{En.sessionContent=e},setState:(...e)=>{En.state=e},setNativeViewHierarchy:(...e)=>{En.nativeView=e}},((e=y())=>new Promise((t=>{let n=e.getMraid();(null==n?void 0:n.getState())===eA.LOADING?null==n||n.addEventListener("ready",(()=>{ax(),t(!0)})):(ax(),t(!0))})))().then(T9).then((()=>new Promise((e=>{var t;let n=y();if(null===(t=n.getMraid())||void 0===t?void 0:t.isViewable())e(!0);else{let t=window.setInterval((()=>{var i;(null===(i=n.getMraid())||void 0===i?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))}),100)}})))).then((()=>{var e,t,n,i,r;cO(),cS(),e=aG(ch,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),eU.__&&eU.__(e,t),n=t.__k,i=[],r=[],ta(t,e=t.__k=e5(e6,null,[e]),n||eQ,eQ,t.namespaceURI,n?null:t.firstChild?ek.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),to(i,e,r)}));</script> </body></html>